{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ryany\\\\OneDrive\\\\\\u684C\\u9762\\\\primeal\\\\src\\\\pages\\\\share\\\\SharePost.js\",\n    _s = $RefreshSig$();\n\nimport { Header, Title, AsideLeft, AsideRight, Footer } from '../layout/Layout';\nimport NavPage from '../layout/components/NavPage';\nimport Masonry from './components/Masonry';\nimport ShareProfile from './components/ShareProfile';\nimport ShareComment from './components/ShareComment';\nimport { ReactComponent as Rect } from '../../imgs/tags/Rectangle_orange.svg';\nimport styles from './Share.module.scss';\nimport config from '../../Config';\nimport { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Button, Modal } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction SharePost(props) {\n  _s();\n\n  const [subTopic, setSubTopic] = useState('shared');\n  const [postItemsData, setPostItemsData] = useState([]);\n  const [commentsData, setCommentsData] = useState([]);\n  const location = useLocation(null);\n  const {\n    action = 'shared'\n  } = location.state || {}; // 加入購物車光箱\n\n  const [show, setShow] = useState(false); //加入NAVBar漢堡選單開關\n\n  const showBlock = {\n    display: 'block'\n  };\n  const hiddenBlock = {\n    display: 'none'\n  };\n  const {\n    navIsOpen,\n    setNavIsOpen\n  } = props; // 解構NAVBAR\n  //Get member id\n\n  const memId = localStorage.getItem('mem_id');\n\n  const getUserSharePost = async () => {\n    const response = await fetch(config.GET_USER_SHARE_POST + `${memId}`, {\n      method: 'GET'\n    });\n    const itemsArr = await response.json();\n    return itemsArr;\n  };\n\n  const getUserShareComment = async () => {\n    const response = await fetch(config.GET_USER_SHARE_COMMENT + `${memId}`, {\n      method: 'GET'\n    });\n    const itemsArr = await response.json();\n    return itemsArr;\n  }; // fetch(config.DELETE_CART_PROD, {\n  //   method: 'POST',\n  //   headers: {\n  //     'Content-Type': 'application/json',\n  //   },\n  //   body: JSON.stringify({\n  //     memId: mid,\n  //     cartid: cartid,\n  //     pid: prodid,\n  //     category: category,\n  //   }),\n  // })\n\n\n  const deleteShareComment = async () => {\n    const response = await fetch(config.DELETE_COMMENT, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        memId: mid,\n        cartid: cartid,\n        pid: prodid,\n        category: category\n      })\n    });\n  };\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = commentSid => setShow(true);\n\n  const modal = /*#__PURE__*/_jsxDEV(Modal, {\n    show: show,\n    onHide: handleClose,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        className: \"en-cont-30 m-3\",\n        children: \"\\u63D0\\u9192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      style: {\n        margin: '0 3%'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"en-cont-14 pb-2\",\n        children: \"\\u60A8\\u78BA\\u5B9A\\u8981\\u522A\\u9664\\u8A72\\u5247\\u7559\\u8A00?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        className: \"btn btn-sm btn-primary primeal-btn-sm mx-5 m-3\",\n        children: \"\\u78BA\\u5B9A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this); // Fetching data\n\n\n  useEffect(() => {\n    (async () => {\n      const resultPost = await getUserSharePost();\n      const resultComment = await getUserShareComment();\n      setPostItemsData(resultPost.data);\n      setCommentsData(resultComment.data);\n    })();\n\n    if (action === 'COMMENT') setSubTopic('comment');\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [modal, /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), navIsOpen && /*#__PURE__*/_jsxDEV(NavPage, {\n      navIsOpen: navIsOpen,\n      setNavIsOpen: setNavIsOpen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: navIsOpen ? hiddenBlock : showBlock,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(AsideLeft, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            title: 'Share',\n            setNavIsOpen: setNavIsOpen\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ShareProfile, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `mycontainer ${styles['upload-min-height']}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"myshare-layout d-flex\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-6 flex-column d-none d-lg-flex\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `${styles['topic-box']} mb-5`,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `${styles['topic-rect']} d-none d-sm-block`,\n                    style: subTopic === 'shared' ? {\n                      opacity: '1'\n                    } : {\n                      opacity: '0'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Rect, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 139,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `${styles['subtopic-link']}`,\n                    onClick: () => setSubTopic('shared'),\n                    style: subTopic === 'shared' ? {\n                      color: '#212121'\n                    } : {\n                      color: '#c4c4c4'\n                    },\n                    children: \"\\u5DF2\\u5206\\u4EAB\\u8CBC\\u6587\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 141,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `${styles['topic-box']}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `${styles['topic-rect']} d-none d-sm-block`,\n                    style: subTopic === 'comment' ? {\n                      opacity: '1'\n                    } : {\n                      opacity: '0'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Rect, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 162,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 154,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `${styles['subtopic-link']}`,\n                    onClick: () => setSubTopic('comment'),\n                    style: subTopic === 'comment' ? {\n                      color: '#212121'\n                    } : {\n                      color: '#c4c4c4'\n                    },\n                    children: \"\\u7559\\u8A00\\u7D00\\u9304\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-lg-17\",\n                children: [subTopic === 'shared' ? /*#__PURE__*/_jsxDEV(Masonry, {\n                  columns: 4,\n                  gap: 3,\n                  data: postItemsData\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 21\n                }, this) : '', subTopic === 'comment' ? /*#__PURE__*/_jsxDEV(ShareComment, {\n                  commentsData: commentsData,\n                  handleShow: handleShow\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 21\n                }, this) : '']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AsideRight, {\n          setNavIsOpen: setNavIsOpen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(SharePost, \"XVlYFN1MOLCp41r3MIEfw2LskZo=\", false, function () {\n  return [useLocation];\n});\n\n_c = SharePost;\nexport default SharePost;\n\nvar _c;\n\n$RefreshReg$(_c, \"SharePost\");","map":{"version":3,"sources":["C:/Users/ryany/OneDrive/桌面/primeal/src/pages/share/SharePost.js"],"names":["Header","Title","AsideLeft","AsideRight","Footer","NavPage","Masonry","ShareProfile","ShareComment","ReactComponent","Rect","styles","config","useState","useEffect","useLocation","Button","Modal","SharePost","props","subTopic","setSubTopic","postItemsData","setPostItemsData","commentsData","setCommentsData","location","action","state","show","setShow","showBlock","display","hiddenBlock","navIsOpen","setNavIsOpen","memId","localStorage","getItem","getUserSharePost","response","fetch","GET_USER_SHARE_POST","method","itemsArr","json","getUserShareComment","GET_USER_SHARE_COMMENT","deleteShareComment","DELETE_COMMENT","headers","body","JSON","stringify","mid","cartid","pid","prodid","category","handleClose","handleShow","commentSid","modal","margin","resultPost","resultComment","data","width","opacity","color"],"mappings":"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","sourcesContent":["import { Header, Title, AsideLeft, AsideRight, Footer } from '../layout/Layout';\r\n\r\nimport NavPage from '../layout/components/NavPage';\r\nimport Masonry from './components/Masonry';\r\nimport ShareProfile from './components/ShareProfile';\r\nimport ShareComment from './components/ShareComment';\r\n\r\nimport { ReactComponent as Rect } from '../../imgs/tags/Rectangle_orange.svg';\r\nimport styles from './Share.module.scss';\r\nimport config from '../../Config';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nimport { Button, Modal } from 'react-bootstrap';\r\n\r\nfunction SharePost(props) {\r\n  const [subTopic, setSubTopic] = useState('shared');\r\n  const [postItemsData, setPostItemsData] = useState([]);\r\n  const [commentsData, setCommentsData] = useState([]);\r\n\r\n  const location = useLocation(null);\r\n  const { action = 'shared' } = location.state || {};\r\n\r\n  // 加入購物車光箱\r\n  const [show, setShow] = useState(false);\r\n\r\n  //加入NAVBar漢堡選單開關\r\n  const showBlock = { display: 'block' };\r\n  const hiddenBlock = { display: 'none' };\r\n  const { navIsOpen, setNavIsOpen } = props; // 解構NAVBAR\r\n\r\n  //Get member id\r\n  const memId = localStorage.getItem('mem_id');\r\n\r\n  const getUserSharePost = async () => {\r\n    const response = await fetch(config.GET_USER_SHARE_POST + `${memId}`, {\r\n      method: 'GET',\r\n    });\r\n    const itemsArr = await response.json();\r\n    return itemsArr;\r\n  };\r\n\r\n  const getUserShareComment = async () => {\r\n    const response = await fetch(config.GET_USER_SHARE_COMMENT + `${memId}`, {\r\n      method: 'GET',\r\n    });\r\n    const itemsArr = await response.json();\r\n    return itemsArr;\r\n  };\r\n\r\n  // fetch(config.DELETE_CART_PROD, {\r\n  //   method: 'POST',\r\n  //   headers: {\r\n  //     'Content-Type': 'application/json',\r\n  //   },\r\n  //   body: JSON.stringify({\r\n  //     memId: mid,\r\n  //     cartid: cartid,\r\n  //     pid: prodid,\r\n  //     category: category,\r\n  //   }),\r\n  // })\r\n\r\n  const deleteShareComment = async () => {\r\n    const response = await fetch(config.DELETE_COMMENT, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        memId: mid,\r\n        cartid: cartid,\r\n        pid: prodid,\r\n        category: category,\r\n      }),\r\n    });\r\n  };\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = commentSid => setShow(true);\r\n\r\n  const modal = (\r\n    <Modal show={show} onHide={handleClose}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title className=\"en-cont-30 m-3\">提醒</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body style={{ margin: '0 3%' }}>\r\n        <div className=\"en-cont-14 pb-2\">您確定要刪除該則留言?</div>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button\r\n          variant=\"secondary\"\r\n          className=\"btn btn-sm btn-primary primeal-btn-sm mx-5 m-3\"\r\n        >\r\n          確定\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n\r\n  // Fetching data\r\n  useEffect(() => {\r\n    (async () => {\r\n      const resultPost = await getUserSharePost();\r\n      const resultComment = await getUserShareComment();\r\n\r\n      setPostItemsData(resultPost.data);\r\n      setCommentsData(resultComment.data);\r\n    })();\r\n    if (action === 'COMMENT') setSubTopic('comment');\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {modal}\r\n      <Header />\r\n      {navIsOpen && (\r\n        <NavPage navIsOpen={navIsOpen} setNavIsOpen={setNavIsOpen} />\r\n      )}\r\n      <div style={navIsOpen ? hiddenBlock : showBlock}>\r\n        <div style={{ display: 'flex' }}>\r\n          <AsideLeft />\r\n          <div style={{ width: '100%' }}>\r\n            <Title title={'Share'} setNavIsOpen={setNavIsOpen} />\r\n            <ShareProfile />\r\n            <div className={`mycontainer ${styles['upload-min-height']}`}>\r\n              <div className=\"myshare-layout d-flex\">\r\n                <div className=\"col-6 flex-column d-none d-lg-flex\">\r\n                  <div className={`${styles['topic-box']} mb-5`}>\r\n                    <div\r\n                      className={`${styles['topic-rect']} d-none d-sm-block`}\r\n                      style={\r\n                        subTopic === 'shared'\r\n                          ? { opacity: '1' }\r\n                          : { opacity: '0' }\r\n                      }\r\n                    >\r\n                      <Rect />\r\n                    </div>\r\n                    <div\r\n                      className={`${styles['subtopic-link']}`}\r\n                      onClick={() => setSubTopic('shared')}\r\n                      style={\r\n                        subTopic === 'shared'\r\n                          ? { color: '#212121' }\r\n                          : { color: '#c4c4c4' }\r\n                      }\r\n                    >\r\n                      已分享貼文\r\n                    </div>\r\n                  </div>\r\n                  <div className={`${styles['topic-box']}`}>\r\n                    <div\r\n                      className={`${styles['topic-rect']} d-none d-sm-block`}\r\n                      style={\r\n                        subTopic === 'comment'\r\n                          ? { opacity: '1' }\r\n                          : { opacity: '0' }\r\n                      }\r\n                    >\r\n                      <Rect />\r\n                    </div>\r\n                    <div\r\n                      className={`${styles['subtopic-link']}`}\r\n                      onClick={() => setSubTopic('comment')}\r\n                      style={\r\n                        subTopic === 'comment'\r\n                          ? { color: '#212121' }\r\n                          : { color: '#c4c4c4' }\r\n                      }\r\n                    >\r\n                      留言紀錄\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-lg-17\">\r\n                  {subTopic === 'shared' ? (\r\n                    <Masonry columns={4} gap={3} data={postItemsData} />\r\n                  ) : (\r\n                    ''\r\n                  )}\r\n                  {subTopic === 'comment' ? (\r\n                    <ShareComment\r\n                      commentsData={commentsData}\r\n                      handleShow={handleShow}\r\n                    />\r\n                  ) : (\r\n                    ''\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <br />\r\n            <Footer />\r\n          </div>\r\n          <AsideRight setNavIsOpen={setNavIsOpen} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SharePost;\r\n"]},"metadata":{},"sourceType":"module"}