{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ryany\\\\OneDrive\\\\\\u684C\\u9762\\\\primeal\\\\src\\\\pages\\\\share\\\\ShareUpload.js\",\n    _s = $RefreshSig$();\n\nimport { Header, Title, AsideLeft, AsideRight, Footer } from '../layout/Layout';\nimport ShareProfile from './components/ShareProfile';\nimport NavPage from '../layout/components/NavPage';\nimport { ReactComponent as Trash } from '../../imgs/tags/trash-line.svg';\nimport config from '../../Config';\nimport styles from './Share.module.scss';\nimport { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst dateConvertHandler = date => {\n  return new Date(date).toLocaleDateString('zh-tw');\n};\n\nconst cateConvertHandler = cate => {\n  if (!cate) return;\n  const cateArr = [{\n    cate: 'cs',\n    name: '經典'\n  }, {\n    cate: 'cm',\n    name: '客製'\n  }, {\n    cate: 'set',\n    name: '套餐'\n  }];\n  const cateName = cateArr.find(cateObj => cateObj.cate === cate);\n  return cateName.name;\n};\n\nconst creditHandler = cate => {\n  let credit;\n  const cateCredits = [{\n    cate: 'cs',\n    credit: 300\n  }, {\n    cate: 'cm',\n    credit: 500\n  }, {\n    cate: 'set',\n    credit: 800\n  }];\n\n  if (!cate) {\n    credit = '5000 pt';\n  } else {\n    credit = cateCredits.map(cateCredit => cateCredit.cate === cate ? `${5000 + cateCredit.credit} pt` : '').join('');\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"h3\", {\n    className: `en-cont-28 ${cate ? 'text-primary' : ''}`,\n    children: credit\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n\nfunction ShareUpload(props) {\n  _s();\n\n  var _uploadItemsData$uplo, _uploadItemsData$uplo2, _uploadItemsData$, _uploadItemsData$uplo3;\n\n  const [uploadItem, setUploadItem] = useState(-1);\n  const [uploadItemsData, setUploadItemsData] = useState([]);\n  let history = useHistory(null); //加入NAVBar漢堡選單開關\n\n  const showBlock = {\n    display: 'block'\n  };\n  const hiddenBlock = {\n    display: 'none'\n  };\n  const {\n    navIsOpen,\n    setNavIsOpen\n  } = props; // 解構NAVBAR\n  //Get member id\n\n  const memId = localStorage.getItem('mem_id');\n\n  const getUserShareUpload = async () => {\n    const response = await fetch(config.GET_USER_SHARE_UPLOAD + `${memId}`, {\n      method: 'GET'\n    });\n    const itemsArr = await response.json();\n    return itemsArr;\n  }; // Fetching data\n\n\n  useEffect(() => {\n    (async () => {\n      const result = await getUserShareUpload();\n      setUploadItemsData(result.data);\n    })();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), navIsOpen && /*#__PURE__*/_jsxDEV(NavPage, {\n      navIsOpen: navIsOpen,\n      setNavIsOpen: setNavIsOpen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: navIsOpen ? hiddenBlock : showBlock,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(AsideLeft, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            title: 'Share',\n            setNavIsOpen: setNavIsOpen\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ShareProfile, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `mycontainer ${styles['upload-min-height']}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `${styles['myshare-layout']} d-flex`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-6 flex-column d-none d-lg-flex\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ch-cont-14 font-weight-bold mb-5\",\n                  children: \"\\u5546\\u54C1\\u9810\\u89BD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-center mb-5\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `${styles['preview-img']} col-18 `,\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: config.HOST + `${(_uploadItemsData$uplo = (_uploadItemsData$uplo2 = uploadItemsData[uploadItem]) === null || _uploadItemsData$uplo2 === void 0 ? void 0 : _uploadItemsData$uplo2.c_prod_img_path) !== null && _uploadItemsData$uplo !== void 0 ? _uploadItemsData$uplo : (_uploadItemsData$ = uploadItemsData[0]) === null || _uploadItemsData$ === void 0 ? void 0 : _uploadItemsData$.c_prod_img_path // default image\n                      }`,\n                      alt: \"\"\n                    }, uploadItem, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 103,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 102,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ch-cont-14 font-weight-bold mb-5\",\n                  children: \"\\u6703\\u54E1\\u7A4D\\u5206\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-center mb-5\",\n                  children: creditHandler((_uploadItemsData$uplo3 = uploadItemsData[uploadItem]) === null || _uploadItemsData$uplo3 === void 0 ? void 0 : _uploadItemsData$uplo3.orders_category)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-lg-18\",\n                children: /*#__PURE__*/_jsxDEV(\"table\", {\n                  className: `${styles['saves-table']} table table-hover`,\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        className: \"ch-cont-14\",\n                        children: \"\\u5546\\u54C1\\u540D\\u7A31\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 132,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        className: \"ch-cont-14\",\n                        children: \"\\u8A02\\u8CFC\\u65E5\\u671F\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 135,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        className: `${styles['cate-disabled']} ch-cont-14`,\n                        children: \"\\u7522\\u54C1\\u985E\\u5225\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 138,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        className: \"\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 144,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 131,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 130,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: uploadItemsData.map((_ref, i) => {\n                      let {\n                        orders_id: id,\n                        orders_category: cate,\n                        c_prod_ch_name: name,\n                        orders_date: date\n                      } = _ref;\n                      return /*#__PURE__*/_jsxDEV(\"tr\", {\n                        onMouseEnter: () => setUploadItem(i),\n                        onMouseLeave: () => setUploadItem(-1),\n                        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                          className: \"font-weight-normal \",\n                          children: name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 164,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          className: \"font-weight-bold\",\n                          children: dateConvertHandler(date)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 165,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          className: `${styles['cate-disabled']} `,\n                          children: cateConvertHandler(cate)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 168,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          style: {\n                            width: '22%'\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                            className: `${styles['share-item-button']} btn-sm btn-primary mr-md-5`,\n                            onClick: () => {\n                              history.push({\n                                pathname: '/share/edit',\n                                state: {\n                                  orderId: id,\n                                  orderName: name\n                                }\n                              });\n                            },\n                            children: \"\\u5206\\u4EAB\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 172,\n                            columnNumber: 33\n                          }, this), i === uploadItem ? /*#__PURE__*/_jsxDEV(Trash, {\n                            className: `${styles['upload-del-button']} mb-2 ml-4`\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 184,\n                            columnNumber: 35\n                          }, this) : '']\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 171,\n                          columnNumber: 31\n                        }, this)]\n                      }, id, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 159,\n                        columnNumber: 29\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AsideRight, {\n          setNavIsOpen: setNavIsOpen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ShareUpload, \"uUem4+9H1ycLbB/7sLbcKQkO9m0=\", false, function () {\n  return [useHistory];\n});\n\n_c = ShareUpload;\nexport default ShareUpload;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShareUpload\");","map":{"version":3,"sources":["C:/Users/ryany/OneDrive/桌面/primeal/src/pages/share/ShareUpload.js"],"names":["Header","Title","AsideLeft","AsideRight","Footer","ShareProfile","NavPage","ReactComponent","Trash","config","styles","useState","useEffect","useHistory","dateConvertHandler","date","Date","toLocaleDateString","cateConvertHandler","cate","cateArr","name","cateName","find","cateObj","creditHandler","credit","cateCredits","map","cateCredit","join","ShareUpload","props","uploadItem","setUploadItem","uploadItemsData","setUploadItemsData","history","showBlock","display","hiddenBlock","navIsOpen","setNavIsOpen","memId","localStorage","getItem","getUserShareUpload","response","fetch","GET_USER_SHARE_UPLOAD","method","itemsArr","json","result","data","width","HOST","c_prod_img_path","orders_category","i","orders_id","id","c_prod_ch_name","orders_date","push","pathname","state","orderId","orderName"],"mappings":"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","sourcesContent":["import { Header, Title, AsideLeft, AsideRight, Footer } from '../layout/Layout';\r\n\r\nimport ShareProfile from './components/ShareProfile';\r\nimport NavPage from '../layout/components/NavPage';\r\n\r\nimport { ReactComponent as Trash } from '../../imgs/tags/trash-line.svg';\r\n\r\nimport config from '../../Config';\r\nimport styles from './Share.module.scss';\r\nimport { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst dateConvertHandler = date => {\r\n  return new Date(date).toLocaleDateString('zh-tw');\r\n};\r\n\r\nconst cateConvertHandler = cate => {\r\n  if (!cate) return;\r\n  const cateArr = [\r\n    { cate: 'cs', name: '經典' },\r\n    { cate: 'cm', name: '客製' },\r\n    { cate: 'set', name: '套餐' },\r\n  ];\r\n\r\n  const cateName = cateArr.find(cateObj => cateObj.cate === cate);\r\n\r\n  return cateName.name;\r\n};\r\n\r\nconst creditHandler = cate => {\r\n  let credit;\r\n\r\n  const cateCredits = [\r\n    { cate: 'cs', credit: 300 },\r\n    { cate: 'cm', credit: 500 },\r\n    { cate: 'set', credit: 800 },\r\n  ];\r\n  if (!cate) {\r\n    credit = '5000 pt';\r\n  } else {\r\n    credit = cateCredits\r\n      .map(cateCredit =>\r\n        cateCredit.cate === cate ? `${5000 + cateCredit.credit} pt` : ''\r\n      )\r\n      .join('');\r\n  }\r\n\r\n  return (\r\n    <h3 className={`en-cont-28 ${cate ? 'text-primary' : ''}`}>{credit}</h3>\r\n  );\r\n};\r\n\r\nfunction ShareUpload(props) {\r\n  const [uploadItem, setUploadItem] = useState(-1);\r\n  const [uploadItemsData, setUploadItemsData] = useState([]);\r\n  let history = useHistory(null);\r\n\r\n  //加入NAVBar漢堡選單開關\r\n  const showBlock = { display: 'block' };\r\n  const hiddenBlock = { display: 'none' };\r\n  const { navIsOpen, setNavIsOpen } = props; // 解構NAVBAR\r\n\r\n  //Get member id\r\n  const memId = localStorage.getItem('mem_id');\r\n\r\n  const getUserShareUpload = async () => {\r\n    const response = await fetch(config.GET_USER_SHARE_UPLOAD + `${memId}`, {\r\n      method: 'GET',\r\n    });\r\n    const itemsArr = await response.json();\r\n    return itemsArr;\r\n  };\r\n\r\n  // Fetching data\r\n  useEffect(() => {\r\n    (async () => {\r\n      const result = await getUserShareUpload();\r\n\r\n      setUploadItemsData(result.data);\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      {navIsOpen && (\r\n        <NavPage navIsOpen={navIsOpen} setNavIsOpen={setNavIsOpen} />\r\n      )}\r\n      <div style={navIsOpen ? hiddenBlock : showBlock}>\r\n        <div style={{ display: 'flex' }}>\r\n          <AsideLeft />\r\n          <div style={{ width: '100%' }}>\r\n            <Title title={'Share'} setNavIsOpen={setNavIsOpen} />\r\n            <ShareProfile />\r\n            <div className={`mycontainer ${styles['upload-min-height']}`}>\r\n              <div className={`${styles['myshare-layout']} d-flex`}>\r\n                <div className=\"col-6 flex-column d-none d-lg-flex\">\r\n                  <div className=\"ch-cont-14 font-weight-bold mb-5\">\r\n                    商品預覽\r\n                  </div>\r\n                  <div className=\"d-flex justify-content-center mb-5\">\r\n                    <div className={`${styles['preview-img']} col-18 `}>\r\n                      <img\r\n                        key={uploadItem}\r\n                        src={\r\n                          config.HOST +\r\n                          `${\r\n                            uploadItemsData[uploadItem]?.c_prod_img_path ??\r\n                            uploadItemsData[0]?.c_prod_img_path // default image\r\n                          }`\r\n                        }\r\n                        alt=\"\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"ch-cont-14 font-weight-bold mb-5\">\r\n                    會員積分\r\n                  </div>\r\n                  <div className=\"d-flex justify-content-center mb-5\">\r\n                    {creditHandler(\r\n                      uploadItemsData[uploadItem]?.orders_category\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-lg-18\">\r\n                  <table\r\n                    className={`${styles['saves-table']} table table-hover`}\r\n                  >\r\n                    <thead>\r\n                      <tr>\r\n                        <th scope=\"col\" className=\"ch-cont-14\">\r\n                          商品名稱\r\n                        </th>\r\n                        <th scope=\"col\" className=\"ch-cont-14\">\r\n                          訂購日期\r\n                        </th>\r\n                        <th\r\n                          scope=\"col\"\r\n                          className={`${styles['cate-disabled']} ch-cont-14`}\r\n                        >\r\n                          產品類別\r\n                        </th>\r\n                        <th scope=\"col\" className=\"\"></th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {uploadItemsData.map(\r\n                        (\r\n                          {\r\n                            orders_id: id,\r\n                            orders_category: cate,\r\n                            c_prod_ch_name: name,\r\n                            orders_date: date,\r\n                          },\r\n                          i\r\n                        ) => {\r\n                          return (\r\n                            <tr\r\n                              key={id}\r\n                              onMouseEnter={() => setUploadItem(i)}\r\n                              onMouseLeave={() => setUploadItem(-1)}\r\n                            >\r\n                              <td className=\"font-weight-normal \">{name}</td>\r\n                              <td className=\"font-weight-bold\">\r\n                                {dateConvertHandler(date)}\r\n                              </td>\r\n                              <td className={`${styles['cate-disabled']} `}>\r\n                                {cateConvertHandler(cate)}\r\n                              </td>\r\n                              <td style={{ width: '22%' }}>\r\n                                <button\r\n                                  className={`${styles['share-item-button']} btn-sm btn-primary mr-md-5`}\r\n                                  onClick={() => {\r\n                                    history.push({\r\n                                      pathname: '/share/edit',\r\n                                      state: { orderId: id, orderName: name },\r\n                                    });\r\n                                  }}\r\n                                >\r\n                                  分享\r\n                                </button>\r\n                                {i === uploadItem ? (\r\n                                  <Trash\r\n                                    className={`${styles['upload-del-button']} mb-2 ml-4`}\r\n                                  />\r\n                                ) : (\r\n                                  ''\r\n                                )}\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        }\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <Footer />\r\n          </div>\r\n          <AsideRight setNavIsOpen={setNavIsOpen} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ShareUpload;\r\n"]},"metadata":{},"sourceType":"module"}