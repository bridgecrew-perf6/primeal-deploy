{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ryany\\\\OneDrive\\\\\\u684C\\u9762\\\\primeal\\\\src\\\\pages\\\\cart\\\\StepTwo.js\",\n    _s = $RefreshSig$();\n\n//cart/StepTwo.js\nimport { Header, Title, AsideLeft, AsideRight, Footer } from '../layout/Layout';\nimport { Link, useHistory } from 'react-router-dom';\nimport CartSum from './CartSum';\nimport CartDetail from '././components/CartDetial';\nimport NavPage from '../layout/components/NavPage';\nimport React, { useState, useEffect, useRef } from 'react';\nimport StepMap from '././components/StepMap';\nimport { Button, Modal } from 'react-bootstrap';\nimport { getMemId, getCart } from '../../utils'; // TODO: 資料庫拿資料\n\nimport config from '../../Config';\nimport { set } from 'date-fns';\nimport { fi } from 'date-fns/locale';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction StepTwo(props) {\n  _s();\n\n  // NAV BAR 使用 蓋版漢堡\n  const showBlock = {\n    display: 'block'\n  };\n  const hiddenBlock = {\n    display: 'none'\n  };\n  const {\n    navIsOpen,\n    setNavIsOpen\n  } = props; // 解構\n  // 套餐光箱\n\n  const [map, setMap] = useState(false);\n\n  const handleClose = () => setMap(false);\n\n  const handleShow = () => setMap(true); // 回上一頁 按鈕\n\n\n  let history = useHistory(); // 用於光箱傳資料的方式\n\n  const inputStoreId = useRef(null); // 去取得光箱內地圖的store_id 要往下傳4 層\n\n  const [getStoreId, setGetStoreId] = useState(''); // console.log(inputStoreId.current);\n  // console.log('jklkjlkjlkj', inputStoreId.current?.innerText);\n\n  const inputEl = useRef(null); // console.log('12332112324', inputEl.current?.innerText);\n  // console.log(inputEl);\n  // const [storeID, setStoreID] = useState('');\n\n  const [sum, setSum] = useState([]); // 畫面右側小計 狀態\n\n  const [info, setInfo] = useState([]); // input 欄位預設值 mem_name mem_mobile\n\n  const [itemInfo, setItemInfo] = useState({}); //交易明細 狀態\n\n  const [mem_id, setMem_id] = useState(0);\n  const [cart_id, setCart_id] = useState(0);\n  const [storeName, setStoreName] = useState('');\n  const [fields, setFields] = useState({\n    buyer: '',\n    buyer_mobile: '',\n    picker: '',\n    order_notes: '' || null,\n    cart_store_id: ''\n  }); // -----先取得 畫面右側小計\n  //  共同取 mem_id & cart_id 的地方\n\n  useEffect(() => {\n    const getInit = async () => {\n      const Mid = getMemId();\n      const Cid = await getCart();\n      setMem_id(+Mid);\n      setCart_id(+Cid.cartid);\n    };\n\n    getInit(); // console.log('info', info);\n  }, []); // 取得store id 後 拷貝陣列並把值塞進去 fields\n\n  useEffect(() => {\n    // if (getStoreId > 0) {\n    setFields({ ...fields,\n      cart_store_id: getStoreId\n    }); // } else {\n    //   alert('請選擇取貨門市');\n    // }\n  }, [getStoreId]);\n  useEffect(() => {\n    const getSum = async () => {\n      const res = await fetch(config.GET_CART_SUM + `${mem_id}/${cart_id}`);\n      const obj = await res.json(); // console.log('obj:', obj);\n\n      setSum(obj.data);\n    }; // ----先取得 表單資料name mobile\n\n\n    const getInfo = async () => {\n      const res = await fetch(config.GET_CART_INFO + `${mem_id}/${cart_id}`); // console.log('res', res);\n\n      const obj = await res.json();\n      console.log('obj:', obj);\n      setInfo(obj.result);\n    };\n\n    getSum();\n    getInfo();\n  }, [mem_id, cart_id]); // console.log('sum', sum);\n\n  useEffect(() => {// console.log(sum);\n  }, [sum]); // Input State 要填寫的資料欄位\n  // Error Message State\n\n  const [fieldsError, setFieldsError] = useState({\n    buyer: '',\n    buyer_mobile: '',\n    picker: '',\n    cart_store_id: ''\n  }); // 處理欄位改變\n\n  const handleFieldChange = e => {\n    console.log(e.target.name);\n    const newData = { ...fields,\n      [e.target.name]: e.target.value\n    };\n    setFields(newData);\n  }; // 驗證並處理欄位錯誤訊息\n\n\n  const handleValidation = () => {\n    let formIsValid = true;\n    let errorMsg = {}; // 提交前作驗証，並自定義fieldsError訊息\n\n    console.log('fields:', fields); // 格式規則\n\n    const buyer_re = /[ `!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?~]/;\n    const mobile_re = /^09\\d{2}-?\\d{3}-?\\d{3}$/; // buyer\n\n    if (!fields.buyer) {\n      formIsValid = false;\n      errorMsg.buyer = '姓名欄位不可為空';\n    } else if (fields.buyer && buyer_re.test(fields.buyer)) {\n      formIsValid = false;\n      errorMsg.buyer = '姓名欄位不可包含特殊符號';\n    } // buyer_mobile\n\n\n    if (!fields.buyer_mobile) {\n      formIsValid = false;\n      errorMsg.buyer_mobile = '連絡電話不可為空';\n    } else if (fields.buyer_mobile && !mobile_re.test(fields.buyer_mobile)) {\n      formIsValid = false;\n      errorMsg.buyer_mobile = '連絡電話格式不正確';\n    }\n\n    if (!fields.cart_store_id) {\n      formIsValid = false;\n      errorMsg.cart_store_id = '取貨門市不可為空';\n    } //TODO: 重新點要把提示訊息刪除\n\n\n    setFieldsError(errorMsg);\n    return formIsValid;\n  }; // 當欄位有更動時，處理清空錯誤訊息\n\n\n  const handleChange = e => {\n    const updatedFieldError = { ...fieldsError,\n      [e.target.name]: ''\n    };\n    setFieldsError(updatedFieldError);\n  }; // 提交\n\n\n  const handleSubmit = e => {\n    e.preventDefault(); // setFields(info);\n\n    console.log('info', info);\n    console.log('fields', fields);\n\n    if (handleValidation()) {\n      // fetch\n      const r = fetch(config.POST_CART_INFO + `${mem_id}/${cart_id}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(fields)\n      }).then(r => r.json()).then(obj => {\n        console.log(obj);\n\n        if (obj.success) {\n          console.log(obj.success); // 有成功更新頁面才轉向\n\n          history.push('/cart/stepthree');\n        } else {\n          alert('資料錯誤請重新輸入！');\n        }\n      });\n    } else {\n      console.log('form has errors.');\n    }\n  }; //取得資料後 把欄位資料狀態設定回去\n\n\n  useEffect(() => {\n    var _info$, _info$2, _info$3;\n\n    console.log(info);\n    setFields({ ...fields,\n      buyer: (_info$ = info[0]) === null || _info$ === void 0 ? void 0 : _info$.mem_name,\n      buyer_mobile: (_info$2 = info[0]) === null || _info$2 === void 0 ? void 0 : _info$2.mem_mobile,\n      picker: (_info$3 = info[0]) === null || _info$3 === void 0 ? void 0 : _info$3.mem_name,\n      // order_notes: '',\n      cart_store_id: getStoreId\n    }); // setFields({ ...fields, cart_store_id: getStoreId });\n\n    console.log('222', fields);\n  }, [info]); // console.log(fields);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this), navIsOpen && /*#__PURE__*/_jsxDEV(NavPage, {\n      navIsOpen: navIsOpen,\n      setNavIsOpen: setNavIsOpen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: navIsOpen ? hiddenBlock : showBlock,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart-asideLeft-nav d-lg-block d-none ch-title-16 \",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-asL-nav-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3 cart-asL-nav-text\",\n              style: {\n                color: '#212121'\n              },\n              children: \"\\u6211\\u7684\\u8CFC\\u7269\\u6E05\\u55AE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-asL-nav-square\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-asL-nav-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3 cart-asL-nav-text\",\n              style: {\n                color: '#212121'\n              },\n              children: \"\\u586B\\u5BEB\\u8A02\\u8CFC\\u8CC7\\u8A0A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-asL-nav-square\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-asL-nav-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3 cart-asL-nav-text\",\n              style: {\n                color: '#C4C4C4'\n              },\n              children: \"\\u8F38\\u5165\\u4FE1\\u7528\\u5361\\u8CC7\\u6599\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-asL-nav-square-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-asL-nav-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3 cart-asL-nav-text\",\n              style: {\n                color: '#C4C4C4'\n              },\n              children: \"\\u5B8C\\u6210\\u8A02\\u55AE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-asL-nav-square-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AsideLeft, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            title: 'Shipping Info',\n            setNavIsOpen: setNavIsOpen\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mycontainer cart min-hi\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"breadcart\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"en-title-14-10\",\n                children: [/*#__PURE__*/_jsxDEV(Link, {\n                  to: '/',\n                  style: {\n                    textDecoration: 'none',\n                    color: '#575757'\n                  },\n                  children: \"HOME/\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: '/cart/stepone',\n                  style: {\n                    textDecoration: 'none',\n                    color: '#b03342'\n                  },\n                  children: \"CART\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CartDetail, {\n              cart_id: cart_id,\n              mem_id: mem_id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              // onSubmit={handleSubmit}\n              // onInvalid={handleValid}\n              onChange: handleChange,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row mt-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-12 col-24\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"shipping-info ch-cont-14 \",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"my-4\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"d-flex justify-content-between\",\n                        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                          className: \"form-label \",\n                          children: \"\\u8A02\\u8CFC\\u4EBA\\u59D3\\u540D\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 308,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                          className: \"form-label text-primary ch-cont-12\",\n                          children: \"\\u5FC5\\u586B\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 309,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 307,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"form-control\",\n                        id: \"buyer\",\n                        name: \"buyer\",\n                        placeholder: \"\\u8A02\\u8CFC\\u4EBA\",\n                        required: true // value={fields.buyer}\n                        // TODO: v 改 info\n                        // ref={inputEl}\n                        // defaultValue={info[0] ? info[0].mem_name : ''}\n                        ,\n                        defaultValue: info[0] ? info[0].mem_name : '',\n                        onChange: handleFieldChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 313,\n                        columnNumber: 25\n                      }, this), fieldsError.buyer !== '' && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"error\",\n                        children: fieldsError.buyer\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 330,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 306,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"my-4\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"d-flex justify-content-between\",\n                        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                          className: \"form-label \",\n                          children: \"\\u9023\\u7D61\\u96FB\\u8A71\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 335,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                          className: \"form-label text-primary ch-cont-12\",\n                          children: \"\\u5FC5\\u586B\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 336,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 334,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"form-control \",\n                        id: \"buyer_mobile\",\n                        name: \"buyer_mobile\" // placeholder=\"09XX-XXX-XXX\"\n                        ,\n                        \"data-pattern\": \"09\\\\d{2}-?\\\\d{3}-?\\\\d{3}\",\n                        onChange: handleFieldChange,\n                        required: true // ref={inputEl}\n                        ,\n                        defaultValue: info[0] ? info[0].mem_mobile : ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 341,\n                        columnNumber: 25\n                      }, this), fieldsError.buyer_mobile !== '' && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"error\",\n                        children: fieldsError.buyer_mobile\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 354,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 333,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"my-4\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"form-label \",\n                        children: \"\\u53D6\\u8CA8\\u4EBA\\u59D3\\u540D\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 360,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"form-control \",\n                        name: \"picker\",\n                        id: \"picker\",\n                        placeholder: \"\\u53D6\\u8CA8\\u4EBA\",\n                        defaultValue: info[0] ? info[0].mem_name : '',\n                        onChange: handleFieldChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 361,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"form-check d-flex\",\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          className: \"form-check-input\",\n                          type: \"checkbox\",\n                          value: \"\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 371,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                          className: \"form-check-label \",\n                          children: \"\\u540C\\u8A02\\u8CFC\\u4EBA\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 376,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 370,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 359,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"my-4\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"exampleFormControlTextarea1 \",\n                        className: \"form-label ch-cont-14\",\n                        children: \"\\u8A02\\u55AE\\u7279\\u6B8A\\u5099\\u8A3B\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 380,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                        className: \"form-control textarea\" // maxRows=\"5\"\n                        ,\n                        id: \"order_notes\",\n                        name: \"order_notes\",\n                        onChange: handleFieldChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 386,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 379,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"my-4 mx-5\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        type: \"text\",\n                        className: \"form-label \",\n                        children: \"\\u78BA\\u8A8D\\u9078\\u64C7\\u7684\\u9580\\u5E02\\uFF1A\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 411,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                        type: \"text\",\n                        className: \"form-label \",\n                        name: \"cart_store_id\",\n                        id: \"cart_store_id\",\n                        value: getStoreId,\n                        children: getStoreId + ' ' + storeName\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 414,\n                        columnNumber: 25\n                      }, this), fieldsError.cart_store_id !== '' && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"error\",\n                        children: fieldsError.cart_store_id\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 424,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        className: \"btn btn-sm btn-outline-primary btn-block px-5 my-5 ch-title-14\",\n                        onClick: handleShow,\n                        children: \"\\u9078\\u64C7\\u53D6\\u8CA8\\u9580\\u5E02\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 428,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n                        show: map,\n                        onHide: handleClose,\n                        setGetStoreId: setGetStoreId,\n                        size: \"lg\",\n                        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n                          closeButton: true,\n                          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n                            className: \"en-cont-30 m-3\",\n                            children: \"\\u9078\\u64C7\\u53D6\\u8CA8\\u9580\\u5E02\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 443,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 442,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n                          style: {\n                            margin: '0 3%'\n                          },\n                          children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                            children: /*#__PURE__*/_jsxDEV(StepMap, {\n                              ref: inputStoreId,\n                              getStoreId: getStoreId //設定storeid\n                              ,\n                              setGetStoreId: setGetStoreId,\n                              storeName: storeName,\n                              setStoreName: setStoreName\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 449,\n                              columnNumber: 33\n                            }, this)\n                          }, void 0, false)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 447,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n                          children: [/*#__PURE__*/_jsxDEV(Button, {\n                            variant: \"secondary\",\n                            className: \"btn btn-sm btn-primary primeal-btn-sm mx-md-4 mx-2\",\n                            onClick: handleClose,\n                            children: \"\\u53D6\\u6D88\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 459,\n                            columnNumber: 31\n                          }, this), /*#__PURE__*/_jsxDEV(Button, {\n                            variant: \"btn btn-sm btn-primary primeal-btn-sm mx-md-4 mx-2 m-3\",\n                            onClick: () => {\n                              // setGetStoreId(inputStoreId.current?.value);\n                              // { TODO: 門市換了不會回寫}\n                              // setGetStoreId = { setGetStoreId };\n                              handleClose();\n                            } // type=\"submit\"\n                            ,\n                            children: \"\\u78BA\\u8A8D\\u9580\\u5E02\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 467,\n                            columnNumber: 31\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 458,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 436,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 394,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 304,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(CartSum, {\n                  sum: sum,\n                  className: \"d-none d-md-block\" // style={{ position: 'fixed' }}\n\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row  d-flex justify-content-center justify-content-md-end\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"  d-flex next-btn my-5\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-sm btn-outline-primary primeal-btn-outline-sm  mx-5 mx-md-3\",\n                    onClick: () => {\n                      // 轉至上一頁\n                      history.goBack();\n                    },\n                    children: \"\\u4E0A\\u4E00\\u6B65\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 497,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    className: \"btn btn-sm btn-primary primeal-btn-sm mx-5 mx-md-3\",\n                    onClick: handleSubmit,\n                    children: \"\\u4E0B\\u4E00\\u6B65\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 508,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 496,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AsideRight, {\n          setNavIsOpen: setNavIsOpen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(StepTwo, \"ZYuo5NNxUR5A3YSX55c5HdU0/uA=\", false, function () {\n  return [useHistory];\n});\n\n_c = StepTwo;\nexport default StepTwo;\n\nvar _c;\n\n$RefreshReg$(_c, \"StepTwo\");","map":{"version":3,"sources":["C:/Users/ryany/OneDrive/桌面/primeal/src/pages/cart/StepTwo.js"],"names":["Header","Title","AsideLeft","AsideRight","Footer","Link","useHistory","CartSum","CartDetail","NavPage","React","useState","useEffect","useRef","StepMap","Button","Modal","getMemId","getCart","config","set","fi","StepTwo","props","showBlock","display","hiddenBlock","navIsOpen","setNavIsOpen","map","setMap","handleClose","handleShow","history","inputStoreId","getStoreId","setGetStoreId","inputEl","sum","setSum","info","setInfo","itemInfo","setItemInfo","mem_id","setMem_id","cart_id","setCart_id","storeName","setStoreName","fields","setFields","buyer","buyer_mobile","picker","order_notes","cart_store_id","getInit","Mid","Cid","cartid","getSum","res","fetch","GET_CART_SUM","obj","json","data","getInfo","GET_CART_INFO","console","log","result","fieldsError","setFieldsError","handleFieldChange","e","target","name","newData","value","handleValidation","formIsValid","errorMsg","buyer_re","mobile_re","test","handleChange","updatedFieldError","handleSubmit","preventDefault","r","POST_CART_INFO","method","headers","body","JSON","stringify","then","success","push","alert","mem_name","mem_mobile","color","width","textDecoration","margin","goBack"],"mappings":"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","sourcesContent":["//cart/StepTwo.js\r\n\r\nimport { Header, Title, AsideLeft, AsideRight, Footer } from '../layout/Layout';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport CartSum from './CartSum';\r\nimport CartDetail from '././components/CartDetial';\r\nimport NavPage from '../layout/components/NavPage';\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport StepMap from '././components/StepMap';\r\nimport { Button, Modal } from 'react-bootstrap';\r\n\r\nimport { getMemId, getCart } from '../../utils';\r\n// TODO: 資料庫拿資料\r\nimport config from '../../Config';\r\nimport { set } from 'date-fns';\r\nimport { fi } from 'date-fns/locale';\r\n\r\nfunction StepTwo(props) {\r\n  // NAV BAR 使用 蓋版漢堡\r\n  const showBlock = { display: 'block' };\r\n  const hiddenBlock = { display: 'none' };\r\n  const { navIsOpen, setNavIsOpen } = props; // 解構\r\n\r\n  // 套餐光箱\r\n  const [map, setMap] = useState(false);\r\n  const handleClose = () => setMap(false);\r\n  const handleShow = () => setMap(true);\r\n  // 回上一頁 按鈕\r\n  let history = useHistory();\r\n  // 用於光箱傳資料的方式\r\n  const inputStoreId = useRef(null);\r\n  // 去取得光箱內地圖的store_id 要往下傳4 層\r\n  const [getStoreId, setGetStoreId] = useState('');\r\n\r\n  // console.log(inputStoreId.current);\r\n  // console.log('jklkjlkjlkj', inputStoreId.current?.innerText);\r\n  const inputEl = useRef(null);\r\n  // console.log('12332112324', inputEl.current?.innerText);\r\n\r\n  // console.log(inputEl);\r\n  // const [storeID, setStoreID] = useState('');\r\n\r\n  const [sum, setSum] = useState([]); // 畫面右側小計 狀態\r\n  const [info, setInfo] = useState([]); // input 欄位預設值 mem_name mem_mobile\r\n  const [itemInfo, setItemInfo] = useState({}); //交易明細 狀態\r\n  const [mem_id, setMem_id] = useState(0);\r\n  const [cart_id, setCart_id] = useState(0);\r\n  const [storeName, setStoreName] = useState('');\r\n  const [fields, setFields] = useState({\r\n    buyer: '',\r\n    buyer_mobile: '',\r\n    picker: '',\r\n    order_notes: '' || null,\r\n    cart_store_id: '',\r\n  });\r\n\r\n  // -----先取得 畫面右側小計\r\n  //  共同取 mem_id & cart_id 的地方\r\n  useEffect(() => {\r\n    const getInit = async () => {\r\n      const Mid = getMemId();\r\n      const Cid = await getCart();\r\n      setMem_id(+Mid);\r\n      setCart_id(+Cid.cartid);\r\n    };\r\n    getInit();\r\n    // console.log('info', info);\r\n  }, []);\r\n\r\n  // 取得store id 後 拷貝陣列並把值塞進去 fields\r\n  useEffect(() => {\r\n    // if (getStoreId > 0) {\r\n    setFields({\r\n      ...fields,\r\n      cart_store_id: getStoreId,\r\n    });\r\n    // } else {\r\n    //   alert('請選擇取貨門市');\r\n    // }\r\n  }, [getStoreId]);\r\n\r\n  useEffect(() => {\r\n    const getSum = async () => {\r\n      const res = await fetch(config.GET_CART_SUM + `${mem_id}/${cart_id}`);\r\n      const obj = await res.json();\r\n      // console.log('obj:', obj);\r\n      setSum(obj.data);\r\n    };\r\n\r\n    // ----先取得 表單資料name mobile\r\n    const getInfo = async () => {\r\n      const res = await fetch(config.GET_CART_INFO + `${mem_id}/${cart_id}`);\r\n      // console.log('res', res);\r\n      const obj = await res.json();\r\n      console.log('obj:', obj);\r\n      setInfo(obj.result);\r\n    };\r\n\r\n    getSum();\r\n    getInfo();\r\n  }, [mem_id, cart_id]);\r\n  // console.log('sum', sum);\r\n  useEffect(() => {\r\n    // console.log(sum);\r\n  }, [sum]);\r\n\r\n  // Input State 要填寫的資料欄位\r\n\r\n  // Error Message State\r\n  const [fieldsError, setFieldsError] = useState({\r\n    buyer: '',\r\n    buyer_mobile: '',\r\n    picker: '',\r\n    cart_store_id: '',\r\n  });\r\n\r\n  // 處理欄位改變\r\n  const handleFieldChange = e => {\r\n    console.log(e.target.name);\r\n    const newData = {\r\n      ...fields,\r\n      [e.target.name]: e.target.value,\r\n    };\r\n    setFields(newData);\r\n  };\r\n\r\n  // 驗證並處理欄位錯誤訊息\r\n  const handleValidation = () => {\r\n    let formIsValid = true;\r\n    let errorMsg = {};\r\n    // 提交前作驗証，並自定義fieldsError訊息\r\n    console.log('fields:', fields);\r\n\r\n    // 格式規則\r\n    const buyer_re = /[ `!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?~]/;\r\n    const mobile_re = /^09\\d{2}-?\\d{3}-?\\d{3}$/;\r\n\r\n    // buyer\r\n    if (!fields.buyer) {\r\n      formIsValid = false;\r\n      errorMsg.buyer = '姓名欄位不可為空';\r\n    } else if (fields.buyer && buyer_re.test(fields.buyer)) {\r\n      formIsValid = false;\r\n      errorMsg.buyer = '姓名欄位不可包含特殊符號';\r\n    }\r\n\r\n    // buyer_mobile\r\n    if (!fields.buyer_mobile) {\r\n      formIsValid = false;\r\n      errorMsg.buyer_mobile = '連絡電話不可為空';\r\n    } else if (fields.buyer_mobile && !mobile_re.test(fields.buyer_mobile)) {\r\n      formIsValid = false;\r\n      errorMsg.buyer_mobile = '連絡電話格式不正確';\r\n    }\r\n\r\n    if (!fields.cart_store_id) {\r\n      formIsValid = false;\r\n      errorMsg.cart_store_id = '取貨門市不可為空';\r\n    }\r\n    //TODO: 重新點要把提示訊息刪除\r\n\r\n    setFieldsError(errorMsg);\r\n    return formIsValid;\r\n  };\r\n\r\n  // 當欄位有更動時，處理清空錯誤訊息\r\n  const handleChange = e => {\r\n    const updatedFieldError = {\r\n      ...fieldsError,\r\n      [e.target.name]: '',\r\n    };\r\n    setFieldsError(updatedFieldError);\r\n  };\r\n\r\n  // 提交\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    // setFields(info);\r\n    console.log('info', info);\r\n    console.log('fields', fields);\r\n    if (handleValidation()) {\r\n      // fetch\r\n      const r = fetch(config.POST_CART_INFO + `${mem_id}/${cart_id}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(fields),\r\n      })\r\n        .then(r => r.json())\r\n        .then(obj => {\r\n          console.log(obj);\r\n          if (obj.success) {\r\n            console.log(obj.success);\r\n            // 有成功更新頁面才轉向\r\n            history.push('/cart/stepthree');\r\n          } else {\r\n            alert('資料錯誤請重新輸入！');\r\n          }\r\n        });\r\n    } else {\r\n      console.log('form has errors.');\r\n    }\r\n  };\r\n  //取得資料後 把欄位資料狀態設定回去\r\n  useEffect(() => {\r\n    console.log(info);\r\n    setFields({\r\n      ...fields,\r\n      buyer: info[0]?.mem_name,\r\n      buyer_mobile: info[0]?.mem_mobile,\r\n      picker: info[0]?.mem_name,\r\n      // order_notes: '',\r\n      cart_store_id: getStoreId,\r\n    });\r\n    // setFields({ ...fields, cart_store_id: getStoreId });\r\n    console.log('222', fields);\r\n  }, [info]);\r\n\r\n  // console.log(fields);\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      {navIsOpen && (\r\n        <NavPage navIsOpen={navIsOpen} setNavIsOpen={setNavIsOpen} />\r\n      )}\r\n      <div style={navIsOpen ? hiddenBlock : showBlock}>\r\n        <div style={{ display: 'flex' }}>\r\n          <div className=\"cart-asideLeft-nav d-lg-block d-none ch-title-16 \">\r\n            <div className=\"cart-asL-nav-item\">\r\n              <div\r\n                className=\"mb-3 cart-asL-nav-text\"\r\n                style={{ color: '#212121' }}\r\n              >\r\n                我的購物清單\r\n              </div>\r\n              <div className=\"cart-asL-nav-square\"></div>\r\n            </div>\r\n\r\n            <div className=\"cart-asL-nav-item\">\r\n              <div\r\n                className=\"mb-3 cart-asL-nav-text\"\r\n                style={{\r\n                  color: '#212121',\r\n                }}\r\n              >\r\n                填寫訂購資訊\r\n              </div>\r\n              <div className=\"cart-asL-nav-square\"></div>\r\n            </div>\r\n\r\n            <div className=\"cart-asL-nav-item\">\r\n              <div\r\n                className=\"mb-3 cart-asL-nav-text\"\r\n                style={{ color: '#C4C4C4' }}\r\n              >\r\n                輸入信用卡資料\r\n              </div>\r\n              <div className=\"cart-asL-nav-square-white\"></div>\r\n            </div>\r\n\r\n            <div className=\"cart-asL-nav-item\">\r\n              <div\r\n                className=\"mb-3 cart-asL-nav-text\"\r\n                style={{ color: '#C4C4C4' }}\r\n              >\r\n                完成訂單\r\n              </div>\r\n              <div className=\"cart-asL-nav-square-white\"></div>\r\n            </div>\r\n          </div>\r\n          <AsideLeft />\r\n          <div style={{ width: '100%' }}>\r\n            <Title title={'Shipping Info'} setNavIsOpen={setNavIsOpen} />\r\n            {/* <div className=\"row\"></div> */}\r\n            <div className=\"mycontainer cart min-hi\">\r\n              <div className=\"breadcart\">\r\n                <p className=\"en-title-14-10\">\r\n                  <Link\r\n                    to={'/'}\r\n                    style={{ textDecoration: 'none', color: '#575757' }}\r\n                  >\r\n                    HOME/\r\n                  </Link>\r\n                  <Link\r\n                    to={'/cart/stepone'}\r\n                    style={{ textDecoration: 'none', color: '#b03342' }}\r\n                  >\r\n                    CART\r\n                  </Link>\r\n                </p>\r\n              </div>\r\n              {/* 訂單資訊 可以摺疊*/}\r\n              <CartDetail cart_id={cart_id} mem_id={mem_id} />\r\n              <form\r\n                // onSubmit={handleSubmit}\r\n                // onInvalid={handleValid}\r\n                onChange={handleChange}\r\n              >\r\n                <div className=\"row mt-5\">\r\n                  <div className=\"col-md-12 col-24\">\r\n                    <div className=\"shipping-info ch-cont-14 \">\r\n                      {/* TODO: Form className='needs-validation ' 表單驗證*/}\r\n                      <div className=\"my-4\">\r\n                        <div className=\"d-flex justify-content-between\">\r\n                          <label className=\"form-label \">訂購人姓名</label>\r\n                          <label className=\"form-label text-primary ch-cont-12\">\r\n                            必填\r\n                          </label>\r\n                        </div>\r\n                        <input\r\n                          type=\"text\"\r\n                          className=\"form-control\"\r\n                          id=\"buyer\"\r\n                          name=\"buyer\"\r\n                          placeholder=\"訂購人\"\r\n                          required\r\n                          // value={fields.buyer}\r\n\r\n                          // TODO: v 改 info\r\n                          // ref={inputEl}\r\n                          // defaultValue={info[0] ? info[0].mem_name : ''}\r\n                          defaultValue={info[0] ? info[0].mem_name : ''}\r\n                          onChange={handleFieldChange}\r\n                        />\r\n\r\n                        {fieldsError.buyer !== '' && (\r\n                          <div className=\"error\">{fieldsError.buyer}</div>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"my-4\">\r\n                        <div className=\"d-flex justify-content-between\">\r\n                          <label className=\"form-label \">連絡電話</label>\r\n                          <label className=\"form-label text-primary ch-cont-12\">\r\n                            必填\r\n                          </label>\r\n                        </div>\r\n\r\n                        <input\r\n                          type=\"text\"\r\n                          className=\"form-control \"\r\n                          id=\"buyer_mobile\"\r\n                          name=\"buyer_mobile\"\r\n                          // placeholder=\"09XX-XXX-XXX\"\r\n                          data-pattern=\"09\\d{2}-?\\d{3}-?\\d{3}\"\r\n                          onChange={handleFieldChange}\r\n                          required\r\n                          // ref={inputEl}\r\n                          defaultValue={info[0] ? info[0].mem_mobile : ''}\r\n                        />\r\n                        {fieldsError.buyer_mobile !== '' && (\r\n                          <div className=\"error\">\r\n                            {fieldsError.buyer_mobile}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"my-4\">\r\n                        <label className=\"form-label \">取貨人姓名</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          className=\"form-control \"\r\n                          name=\"picker\"\r\n                          id=\"picker\"\r\n                          placeholder=\"取貨人\"\r\n                          defaultValue={info[0] ? info[0].mem_name : ''}\r\n                          onChange={handleFieldChange}\r\n                        />\r\n                        <div className=\"form-check d-flex\">\r\n                          <input\r\n                            className=\"form-check-input\"\r\n                            type=\"checkbox\"\r\n                            value=\"\"\r\n                          />\r\n                          <label className=\"form-check-label \">同訂購人</label>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"my-4\">\r\n                        <label\r\n                          htmlFor=\"exampleFormControlTextarea1 \"\r\n                          className=\"form-label ch-cont-14\"\r\n                        >\r\n                          訂單特殊備註\r\n                        </label>\r\n                        <textarea\r\n                          className=\"form-control textarea\"\r\n                          // maxRows=\"5\"\r\n                          id=\"order_notes\"\r\n                          name=\"order_notes\"\r\n                          onChange={handleFieldChange}\r\n                        ></textarea>\r\n                      </div>\r\n                      <div className=\"my-4 mx-5\">\r\n                        {/* TODO: map 光箱 */}\r\n                        {/* <input\r\n                            type=\"text\"\r\n                            className=\"form-control \"\r\n                            name=\"cart_store_id\"\r\n                            id=\"cart_store_id\"\r\n                            value={getStoreId}\r\n                            required\r\n                            // hidden\r\n                            // onChange={e => {\r\n                            //   setFields({\r\n                            //     ...fields,\r\n                            //     cart_store_id: e.target.value,\r\n                            //   });\r\n                            // }}\r\n                          /> */}\r\n                        <label type=\"text\" className=\"form-label \">\r\n                          確認選擇的門市：\r\n                        </label>\r\n                        <label\r\n                          type=\"text\"\r\n                          className=\"form-label \"\r\n                          name=\"cart_store_id\"\r\n                          id=\"cart_store_id\"\r\n                          value={getStoreId}\r\n                        >\r\n                          {getStoreId + ' ' + storeName}\r\n                        </label>\r\n                        {fieldsError.cart_store_id !== '' && (\r\n                          <div className=\"error\">\r\n                            {fieldsError.cart_store_id}\r\n                          </div>\r\n                        )}\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-sm btn-outline-primary btn-block px-5 my-5 ch-title-14\"\r\n                          onClick={handleShow}\r\n                        >\r\n                          選擇取貨門市\r\n                        </button>\r\n                        {\r\n                          <Modal\r\n                            show={map}\r\n                            onHide={handleClose}\r\n                            setGetStoreId={setGetStoreId}\r\n                            size=\"lg\"\r\n                          >\r\n                            <Modal.Header closeButton>\r\n                              <Modal.Title className=\"en-cont-30 m-3\">\r\n                                選擇取貨門市\r\n                              </Modal.Title>\r\n                            </Modal.Header>\r\n                            <Modal.Body style={{ margin: '0 3%' }}>\r\n                              <>\r\n                                <StepMap\r\n                                  ref={inputStoreId}\r\n                                  getStoreId={getStoreId} //設定storeid\r\n                                  setGetStoreId={setGetStoreId}\r\n                                  storeName={storeName}\r\n                                  setStoreName={setStoreName}\r\n                                />\r\n                              </>\r\n                            </Modal.Body>\r\n                            <Modal.Footer>\r\n                              <Button\r\n                                variant=\"secondary\"\r\n                                className=\"btn btn-sm btn-primary primeal-btn-sm mx-md-4 mx-2\"\r\n                                onClick={handleClose}\r\n                              >\r\n                                取消\r\n                              </Button>\r\n                              {/*TODO: 確認門市要送出表單並存到DB mem */}\r\n                              <Button\r\n                                variant=\"btn btn-sm btn-primary primeal-btn-sm mx-md-4 mx-2 m-3\"\r\n                                onClick={() => {\r\n                                  // setGetStoreId(inputStoreId.current?.value);\r\n                                  // { TODO: 門市換了不會回寫}\r\n                                  // setGetStoreId = { setGetStoreId };\r\n\r\n                                  handleClose();\r\n                                }}\r\n                                // type=\"submit\"\r\n                              >\r\n                                確認門市\r\n                              </Button>\r\n                            </Modal.Footer>\r\n                          </Modal>\r\n                        }\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  {/* 右側 統計 summary */}\r\n                  <CartSum\r\n                    sum={sum}\r\n                    className=\"d-none d-md-block\"\r\n                    // style={{ position: 'fixed' }}\r\n                  />\r\n                  {/* ----summary-end */}\r\n                </div>\r\n                {/* 下一步 */}\r\n                <div className=\"row  d-flex justify-content-center justify-content-md-end\">\r\n                  <div className=\"  d-flex next-btn my-5\">\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn btn-sm btn-outline-primary primeal-btn-outline-sm  mx-5 mx-md-3\"\r\n                      onClick={() => {\r\n                        // 轉至上一頁\r\n                        history.goBack();\r\n                      }}\r\n                    >\r\n                      上一步\r\n                    </button>\r\n                    {/* <Link to=\"./StepThree\"> */}\r\n                    <button\r\n                      type=\"submit\"\r\n                      className=\"btn btn-sm btn-primary primeal-btn-sm mx-5 mx-md-3\"\r\n                      onClick={handleSubmit}\r\n                    >\r\n                      下一步\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n\r\n            <Footer />\r\n          </div>\r\n          <AsideRight setNavIsOpen={setNavIsOpen} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default StepTwo;\r\n"]},"metadata":{},"sourceType":"module"}