{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ryany\\\\OneDrive\\\\\\u684C\\u9762\\\\primeal\\\\src\\\\pages\\\\member\\\\IndexActive.js\",\n    _s = $RefreshSig$();\n\nimport { Header, AsideLeft, AsideRight, Footer } from './memLayout/LayoutLight';\nimport './index.scss';\nimport MemHead from './component/MemHead';\nimport { Calendar, dateFnsLocalizer } from 'react-big-calendar';\nimport format from 'date-fns/format';\nimport parse from 'date-fns/parse';\nimport startOfWeek from 'date-fns/startOfWeek';\nimport getDay from 'date-fns/getDay';\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport config from '../../Config';\nimport { getMemId } from '../../utils';\nimport { useState, useEffect } from 'react';\nimport DeleteActiveModal from './component/DeleteActiveModal';\nimport NavPage from '../layout/components/NavPage'; // import DatePicker from 'react-datepicker';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst locales = {\n  'zh-TW': require('date-fns/locale/zh-TW')\n};\nconst localizer = dateFnsLocalizer({\n  format,\n  parse,\n  startOfWeek,\n  getDay,\n  locales\n}); // SQL\n// [\n//   {\n//     \"name\": \"State\",\n//     \"value\": [\n//       {\n//         \"evnts_id\": 2,\n//         \"evnts_signup_number\": 2,\n//         \"id\": 2,\n//         \"title\": \"營養小知識講座\",\n//         \"start\": \"Sat May 07 2022 14:00:00 GMT+0800 (台北標準時間)\",\n//         \"end\": \"Sat May 07 2022 17:00:00 GMT+0800 (台北標準時間)\",\n//         \"desc\": \"台北市大安區復興南路一段390號2樓\",\n//         \"allDay\": false\n//       },\n//       \"{allDay: false, desc: \\\"台北市大安區復興南路一段390號2樓\\\", end: We…}\",\n//       \"{allDay: false, desc: \\\"台北市大安區復興南路一段390號2樓\\\", end: Sa…}\"\n//     ],\n//     \"subHooks\": [],\n//     \"hookSource\": {\n//       \"lineNumber\": 22009,\n//       \"functionName\": \"IndexActive\",\n//       \"fileName\": \"http://localhost:3000/static/js/bundle.js\",\n//       \"columnNumber\": 82\n//     }\n//   }\n// ]\n\nfunction IndexActive(props) {\n  _s();\n\n  const [allEvent, setAllEvent] = useState([]);\n  const [selected, setSelected] = useState({});\n  const [modalShow, setModalShow] = useState(false);\n  const {\n    navIsOpen,\n    setNavIsOpen,\n    isLogin\n  } = props;\n  const mem_id = getMemId();\n\n  const getActive = async () => {\n    const res = await fetch(config.ACTIVE_PATH + `${mem_id}`);\n    const obj = await res.json();\n    const events = obj.data.map(d => {\n      return { ...d,\n        start: new Date(d.start),\n        end: new Date(d.end)\n      };\n    });\n    setAllEvent(events);\n  };\n\n  useEffect(() => {\n    getActive();\n  }, [modalShow]);\n\n  const handleSelected = event => {\n    setModalShow(true);\n    setSelected(event);\n    console.info('[handleSelected - event]', event);\n  };\n\n  const showBlock = {\n    display: 'block'\n  };\n  const hiddenBlock = {\n    display: 'none'\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), navIsOpen && /*#__PURE__*/_jsxDEV(NavPage, {\n      navIsOpen: navIsOpen,\n      setNavIsOpen: setNavIsOpen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: navIsOpen ? hiddenBlock : showBlock,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(AsideLeft, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '75%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"member \",\n            children: [/*#__PURE__*/_jsxDEV(MemHead, {\n              isLogin: isLogin\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mycontainer\",\n              children: [/*#__PURE__*/_jsxDEV(Calendar, {\n                localizer: localizer,\n                events: allEvent,\n                startAccessor: \"start\",\n                endAccessor: \"end\",\n                style: {\n                  height: 500,\n                  margin: '50px'\n                },\n                selected: selected,\n                onSelectEvent: handleSelected\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 17\n              }, this), modalShow && /*#__PURE__*/_jsxDEV(DeleteActiveModal, {\n                show: modalShow,\n                setModalShow: setModalShow,\n                selected: selected,\n                onHide: () => {\n                  setModalShow(false);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AsideRight, {\n          setNavIsOpen: setNavIsOpen,\n          isLogin: isLogin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(IndexActive, \"yjXLIMr34mP8f4FnD0c02xMaT90=\");\n\n_c = IndexActive;\nexport default IndexActive;\n\nvar _c;\n\n$RefreshReg$(_c, \"IndexActive\");","map":{"version":3,"sources":["C:/Users/ryany/OneDrive/桌面/primeal/src/pages/member/IndexActive.js"],"names":["Header","AsideLeft","AsideRight","Footer","MemHead","Calendar","dateFnsLocalizer","format","parse","startOfWeek","getDay","config","getMemId","useState","useEffect","DeleteActiveModal","NavPage","locales","require","localizer","IndexActive","props","allEvent","setAllEvent","selected","setSelected","modalShow","setModalShow","navIsOpen","setNavIsOpen","isLogin","mem_id","getActive","res","fetch","ACTIVE_PATH","obj","json","events","data","map","d","start","Date","end","handleSelected","event","console","info","showBlock","display","hiddenBlock","width","height","margin"],"mappings":"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","sourcesContent":["import { Header, AsideLeft, AsideRight, Footer } from './memLayout/LayoutLight';\r\nimport './index.scss';\r\nimport MemHead from './component/MemHead';\r\nimport { Calendar, dateFnsLocalizer } from 'react-big-calendar';\r\nimport format from 'date-fns/format';\r\nimport parse from 'date-fns/parse';\r\nimport startOfWeek from 'date-fns/startOfWeek';\r\nimport getDay from 'date-fns/getDay';\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\r\nimport config from '../../Config';\r\nimport { getMemId } from '../../utils';\r\nimport { useState, useEffect } from 'react';\r\nimport DeleteActiveModal from './component/DeleteActiveModal';\r\nimport NavPage from '../layout/components/NavPage';\r\n\r\n// import DatePicker from 'react-datepicker';\r\nconst locales = {\r\n  'zh-TW': require('date-fns/locale/zh-TW'),\r\n};\r\n\r\nconst localizer = dateFnsLocalizer({\r\n  format,\r\n  parse,\r\n  startOfWeek,\r\n  getDay,\r\n  locales,\r\n});\r\n\r\n// SQL\r\n// [\r\n//   {\r\n//     \"name\": \"State\",\r\n//     \"value\": [\r\n//       {\r\n//         \"evnts_id\": 2,\r\n//         \"evnts_signup_number\": 2,\r\n//         \"id\": 2,\r\n//         \"title\": \"營養小知識講座\",\r\n//         \"start\": \"Sat May 07 2022 14:00:00 GMT+0800 (台北標準時間)\",\r\n//         \"end\": \"Sat May 07 2022 17:00:00 GMT+0800 (台北標準時間)\",\r\n//         \"desc\": \"台北市大安區復興南路一段390號2樓\",\r\n//         \"allDay\": false\r\n//       },\r\n//       \"{allDay: false, desc: \\\"台北市大安區復興南路一段390號2樓\\\", end: We…}\",\r\n//       \"{allDay: false, desc: \\\"台北市大安區復興南路一段390號2樓\\\", end: Sa…}\"\r\n//     ],\r\n//     \"subHooks\": [],\r\n//     \"hookSource\": {\r\n//       \"lineNumber\": 22009,\r\n//       \"functionName\": \"IndexActive\",\r\n//       \"fileName\": \"http://localhost:3000/static/js/bundle.js\",\r\n//       \"columnNumber\": 82\r\n//     }\r\n//   }\r\n// ]\r\n\r\nfunction IndexActive(props) {\r\n  const [allEvent, setAllEvent] = useState([]);\r\n  const [selected, setSelected] = useState({});\r\n  const [modalShow, setModalShow] = useState(false);\r\n  const { navIsOpen, setNavIsOpen, isLogin } = props;\r\n  const mem_id = getMemId();\r\n\r\n  const getActive = async () => {\r\n    const res = await fetch(config.ACTIVE_PATH + `${mem_id}`);\r\n    const obj = await res.json();\r\n    const events = obj.data.map(d => {\r\n      return { ...d, start: new Date(d.start), end: new Date(d.end) };\r\n    });\r\n    setAllEvent(events);\r\n  };\r\n\r\n  useEffect(() => {\r\n    getActive();\r\n  }, [modalShow]);\r\n\r\n  const handleSelected = event => {\r\n    setModalShow(true);\r\n    setSelected(event);\r\n    console.info('[handleSelected - event]', event);\r\n  };\r\n  const showBlock = { display: 'block' };\r\n  const hiddenBlock = { display: 'none' };\r\n  return (\r\n    <>\r\n      <Header />\r\n      {navIsOpen && (\r\n        <NavPage navIsOpen={navIsOpen} setNavIsOpen={setNavIsOpen} />\r\n      )}\r\n      <div style={navIsOpen ? hiddenBlock : showBlock}>\r\n        <div style={{ display: 'flex' }}>\r\n          <AsideLeft />\r\n          <div style={{ width: '75%' }}>\r\n            {/* <Title title={''} /> */}\r\n            <div className=\"member \">\r\n              <MemHead isLogin={isLogin} />\r\n              <div className=\"mycontainer\">\r\n                <Calendar\r\n                  localizer={localizer}\r\n                  events={allEvent}\r\n                  startAccessor=\"start\"\r\n                  endAccessor=\"end\"\r\n                  style={{ height: 500, margin: '50px' }}\r\n                  selected={selected}\r\n                  onSelectEvent={handleSelected}\r\n                />\r\n                {modalShow && (\r\n                  <DeleteActiveModal\r\n                    show={modalShow}\r\n                    setModalShow={setModalShow}\r\n                    selected={selected}\r\n                    onHide={() => {\r\n                      setModalShow(false);\r\n                    }}\r\n                  />\r\n                )}\r\n              </div>\r\n            </div>\r\n            <Footer />\r\n          </div>\r\n          <AsideRight setNavIsOpen={setNavIsOpen} isLogin={isLogin} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default IndexActive;\r\n"]},"metadata":{},"sourceType":"module"}