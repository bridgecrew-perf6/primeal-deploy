{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ryany\\\\OneDrive\\\\\\u684C\\u9762\\\\primeal\\\\src\\\\pages\\\\share\\\\components\\\\HeartTemplate.js\";\nimport { ReactComponent as HeartOutline } from '../../../imgs/heart-outline.svg';\nimport { ReactComponent as HeartFill } from '../../../imgs/heart-fill.svg';\nimport IconButton from '@mui/material/IconButton';\nimport config from '../../../Config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction HeartTemplate(props) {\n  const {\n    saves,\n    setSaves,\n    item\n  } = props;\n  const isSaveItem = saves.some(save => save.share_item_id === item.share_item_id);\n\n  const toggleSaveItem = async (itemId, action) => {\n    try {\n      let method;\n\n      if (action === 'ADD') {\n        method = 'POST';\n      }\n\n      if (action === 'REMOVE') {\n        method = 'DELETE';\n      }\n\n      const response = await fetch(config.TOGGLE_SAVE, {\n        method: method,\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          itemId: itemId,\n          memberId: '1'\n        })\n      });\n      if (!response.ok) throw new Error('Something went wrong!');\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  if (isSaveItem) {\n    return /*#__PURE__*/_jsxDEV(IconButton, {\n      sx: {\n        color: 'rgba(255, 100, 100, 0.9)'\n      },\n      \"aria-label\": `info about ${item.share_title}`,\n      onClick: () => {\n        setSaves(saves.filter(save => save.share_item_id !== item.share_item_id));\n        toggleSaveItem(item.share_item_id, 'REMOVE');\n      },\n      children: /*#__PURE__*/_jsxDEV(HeartFill, {\n        style: {\n          padding: '0 5px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(IconButton, {\n      sx: {\n        color: 'rgba(255, 255, 255, 0.54)'\n      },\n      \"aria-label\": `info about ${item.share_title}`,\n      onClick: () => {\n        setSaves([...saves, item]);\n        toggleSaveItem(item.share_item_id, 'ADD');\n      },\n      children: /*#__PURE__*/_jsxDEV(HeartOutline, {\n        style: {\n          padding: '0 5px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_c = HeartTemplate;\nexport default HeartTemplate;\n\nvar _c;\n\n$RefreshReg$(_c, \"HeartTemplate\");","map":{"version":3,"sources":["C:/Users/ryany/OneDrive/桌面/primeal/src/pages/share/components/HeartTemplate.js"],"names":["ReactComponent","HeartOutline","HeartFill","IconButton","config","HeartTemplate","props","saves","setSaves","item","isSaveItem","some","save","share_item_id","toggleSaveItem","itemId","action","method","response","fetch","TOGGLE_SAVE","headers","body","JSON","stringify","memberId","ok","Error","err","console","error","message","color","share_title","filter","padding"],"mappings":";AAAA,SAASA,cAAc,IAAIC,YAA3B,QAA+C,iCAA/C;AACA,SAASD,cAAc,IAAIE,SAA3B,QAA4C,8BAA5C;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AAEA,OAAOC,MAAP,MAAmB,iBAAnB;;;AAEA,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAC5B,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA,QAAT;AAAmBC,IAAAA;AAAnB,MAA4BH,KAAlC;AAEA,QAAMI,UAAU,GAAGH,KAAK,CAACI,IAAN,CACjBC,IAAI,IAAIA,IAAI,CAACC,aAAL,KAAuBJ,IAAI,CAACI,aADnB,CAAnB;;AAIA,QAAMC,cAAc,GAAG,OAAOC,MAAP,EAAeC,MAAf,KAA0B;AAC/C,QAAI;AACF,UAAIC,MAAJ;;AACA,UAAID,MAAM,KAAK,KAAf,EAAsB;AACpBC,QAAAA,MAAM,GAAG,MAAT;AACD;;AACD,UAAID,MAAM,KAAK,QAAf,EAAyB;AACvBC,QAAAA,MAAM,GAAG,QAAT;AACD;;AAED,YAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACf,MAAM,CAACgB,WAAR,EAAqB;AAC/CH,QAAAA,MAAM,EAAEA,MADuC;AAE/CI,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB,SAFsC;AAG/CC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAET,UAAAA,MAAM,EAAEA,MAAV;AAAkBU,UAAAA,QAAQ,EAAE;AAA5B,SAAf;AAHyC,OAArB,CAA5B;AAKA,UAAI,CAACP,QAAQ,CAACQ,EAAd,EAAkB,MAAM,IAAIC,KAAJ,CAAU,uBAAV,CAAN;AACnB,KAfD,CAeE,OAAOC,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACC,KAAR,CAAcF,GAAG,CAACG,OAAlB;AACD;AACF,GAnBD;;AAqBA,MAAIrB,UAAJ,EAAgB;AACd,wBACE,QAAC,UAAD;AACE,MAAA,EAAE,EAAE;AAAEsB,QAAAA,KAAK,EAAE;AAAT,OADN;AAEE,oBAAa,cAAavB,IAAI,CAACwB,WAAY,EAF7C;AAGE,MAAA,OAAO,EAAE,MAAM;AACbzB,QAAAA,QAAQ,CACND,KAAK,CAAC2B,MAAN,CAAatB,IAAI,IAAIA,IAAI,CAACC,aAAL,KAAuBJ,IAAI,CAACI,aAAjD,CADM,CAAR;AAGAC,QAAAA,cAAc,CAACL,IAAI,CAACI,aAAN,EAAqB,QAArB,CAAd;AACD,OARH;AAAA,6BAUE,QAAC,SAAD;AAAW,QAAA,KAAK,EAAE;AAAEsB,UAAAA,OAAO,EAAE;AAAX;AAAlB;AAAA;AAAA;AAAA;AAAA;AAVF;AAAA;AAAA;AAAA;AAAA,YADF;AAcD,GAfD,MAeO;AACL,wBACE,QAAC,UAAD;AACE,MAAA,EAAE,EAAE;AAAEH,QAAAA,KAAK,EAAE;AAAT,OADN;AAEE,oBAAa,cAAavB,IAAI,CAACwB,WAAY,EAF7C;AAGE,MAAA,OAAO,EAAE,MAAM;AACbzB,QAAAA,QAAQ,CAAC,CAAC,GAAGD,KAAJ,EAAWE,IAAX,CAAD,CAAR;AACAK,QAAAA,cAAc,CAACL,IAAI,CAACI,aAAN,EAAqB,KAArB,CAAd;AACD,OANH;AAAA,6BAQE,QAAC,YAAD;AAAc,QAAA,KAAK,EAAE;AAAEsB,UAAAA,OAAO,EAAE;AAAX;AAArB;AAAA;AAAA;AAAA;AAAA;AARF;AAAA;AAAA;AAAA;AAAA,YADF;AAYD;AACF;;KAzDQ9B,a;AA2DT,eAAeA,aAAf","sourcesContent":["import { ReactComponent as HeartOutline } from '../../../imgs/heart-outline.svg';\r\nimport { ReactComponent as HeartFill } from '../../../imgs/heart-fill.svg';\r\nimport IconButton from '@mui/material/IconButton';\r\n\r\nimport config from '../../../Config';\r\n\r\nfunction HeartTemplate(props) {\r\n  const { saves, setSaves, item } = props;\r\n\r\n  const isSaveItem = saves.some(\r\n    save => save.share_item_id === item.share_item_id\r\n  );\r\n\r\n  const toggleSaveItem = async (itemId, action) => {\r\n    try {\r\n      let method;\r\n      if (action === 'ADD') {\r\n        method = 'POST';\r\n      }\r\n      if (action === 'REMOVE') {\r\n        method = 'DELETE';\r\n      }\r\n\r\n      const response = await fetch(config.TOGGLE_SAVE, {\r\n        method: method,\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ itemId: itemId, memberId: '1' }),\r\n      });\r\n      if (!response.ok) throw new Error('Something went wrong!');\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  if (isSaveItem) {\r\n    return (\r\n      <IconButton\r\n        sx={{ color: 'rgba(255, 100, 100, 0.9)' }}\r\n        aria-label={`info about ${item.share_title}`}\r\n        onClick={() => {\r\n          setSaves(\r\n            saves.filter(save => save.share_item_id !== item.share_item_id)\r\n          );\r\n          toggleSaveItem(item.share_item_id, 'REMOVE');\r\n        }}\r\n      >\r\n        <HeartFill style={{ padding: '0 5px' }} />\r\n      </IconButton>\r\n    );\r\n  } else {\r\n    return (\r\n      <IconButton\r\n        sx={{ color: 'rgba(255, 255, 255, 0.54)' }}\r\n        aria-label={`info about ${item.share_title}`}\r\n        onClick={() => {\r\n          setSaves([...saves, item]);\r\n          toggleSaveItem(item.share_item_id, 'ADD');\r\n        }}\r\n      >\r\n        <HeartOutline style={{ padding: '0 5px' }} />\r\n      </IconButton>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HeartTemplate;\r\n"]},"metadata":{},"sourceType":"module"}