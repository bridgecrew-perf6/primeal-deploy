{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ryany\\\\OneDrive\\\\\\u684C\\u9762\\\\primeal\\\\src\\\\pages\\\\customize\\\\components\\\\MtlRBtn.js\";\nimport { ReactComponent as Del } from '../../../imgs/del.svg';\nimport { ReactComponent as Plus } from '../../../imgs/plus.svg';\nimport { ReactComponent as Minus } from '../../../imgs/minus.svg';\nimport config from '../../../Config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MtlRBtn(props) {\n  const {\n    mtl_id,\n    mtl_name,\n    mtl_img_path,\n    removeMtl,\n    setRemoveMtl,\n    i,\n    el\n  } = props; // console.log(props);\n  // console.log(removeMtl);\n  // 刪除品項\n\n  const del = () => {\n    let originalMtlArr = [...removeMtl];\n    originalMtlArr.splice(i, 1);\n    setRemoveMtl(originalMtlArr);\n  }; // 判斷總層數不可大於10\n\n\n  const countTotal = arr => {\n    const totalPct = arr.map(pct => pct.mtlPct);\n    return totalPct.reduce((x, y) => x + y);\n  }; // 輸入數量\n\n\n  const countIt = count => {\n    if (count <= 0 || count >= 6 || countTotal(removeMtl) > 10) {\n      return false;\n    }\n\n    const newList = JSON.parse(JSON.stringify(removeMtl)); // count:數量 / e:第幾個\n\n    const newCount = newList.map((v, index) => {\n      if (index === i) {\n        return {\n          mtlId: mtl_id,\n          mtlPct: count\n        };\n      } else {\n        return { ...v\n        };\n      }\n    });\n    setRemoveMtl(newCount);\n  }; // 數量-1\n\n\n  const contMinus = () => {\n    const newList = JSON.parse(JSON.stringify(removeMtl));\n    const newCount = newList.map((v, index) => {\n      if (index === i) {\n        if (el.mtlPct <= 1 || countTotal(removeMtl) > 10) {\n          return { ...v\n          };\n        }\n\n        return {\n          mtlId: mtl_id,\n          mtlPct: el.mtlPct - 1\n        };\n      } else {\n        return { ...v\n        };\n      }\n    });\n    setRemoveMtl(newCount);\n  }; // 數量+1\n\n\n  const countAdd = () => {\n    const newList = JSON.parse(JSON.stringify(removeMtl));\n    const newCount = newList.map((v, index) => {\n      if (index === i) {\n        if (el.mtlPct >= 5 || countTotal(removeMtl) > 9) {\n          return { ...v\n          };\n        }\n\n        return {\n          mtlId: mtl_id,\n          mtlPct: el.mtlPct + 1\n        };\n      } else {\n        return { ...v\n        };\n      }\n    });\n    setRemoveMtl(newCount);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mtlRBtn my-3 mx-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mtlimg-r\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: `${config.HOST}${mtl_img_path}`,\n        alt: mtl_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mtlname-r ch-cont-16 col px-4\",\n      children: mtl_name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"select-add-cart ch-cont-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"select-count\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => contMinus(i),\n          children: /*#__PURE__*/_jsxDEV(Minus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: el.mtlPct,\n          onChange: e => countIt(+e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => countAdd(i),\n          children: /*#__PURE__*/_jsxDEV(Plus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Del, {\n      className: \"mtlDelIcon\",\n      onClick: del\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, mtl_id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n\n_c = MtlRBtn;\nexport default MtlRBtn;\n\nvar _c;\n\n$RefreshReg$(_c, \"MtlRBtn\");","map":{"version":3,"sources":["C:/Users/ryany/OneDrive/桌面/primeal/src/pages/customize/components/MtlRBtn.js"],"names":["ReactComponent","Del","Plus","Minus","config","MtlRBtn","props","mtl_id","mtl_name","mtl_img_path","removeMtl","setRemoveMtl","i","el","del","originalMtlArr","splice","countTotal","arr","totalPct","map","pct","mtlPct","reduce","x","y","countIt","count","newList","JSON","parse","stringify","newCount","v","index","mtlId","contMinus","countAdd","HOST","e","target","value"],"mappings":"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","sourcesContent":["import { ReactComponent as Del } from '../../../imgs/del.svg';\r\nimport { ReactComponent as Plus } from '../../../imgs/plus.svg';\r\nimport { ReactComponent as Minus } from '../../../imgs/minus.svg';\r\nimport config from '../../../Config';\r\n\r\nfunction MtlRBtn(props) {\r\n  const { mtl_id, mtl_name, mtl_img_path, removeMtl, setRemoveMtl, i, el } =\r\n    props;\r\n  // console.log(props);\r\n  // console.log(removeMtl);\r\n\r\n  // 刪除品項\r\n  const del = () => {\r\n    let originalMtlArr = [...removeMtl];\r\n    originalMtlArr.splice(i, 1);\r\n    setRemoveMtl(originalMtlArr);\r\n  };\r\n\r\n  // 判斷總層數不可大於10\r\n  const countTotal = (arr) => {\r\n    const totalPct = arr.map((pct) => pct.mtlPct);\r\n    return totalPct.reduce((x, y) => x + y);\r\n  };\r\n\r\n  // 輸入數量\r\n  const countIt = (count) => {\r\n    if (count <= 0 || count >= 6 || countTotal(removeMtl) > 10) {\r\n      return false;\r\n    }\r\n    const newList = JSON.parse(JSON.stringify(removeMtl));\r\n\r\n    // count:數量 / e:第幾個\r\n\r\n    const newCount = newList.map((v, index) => {\r\n      if (index === i) {\r\n        return { mtlId: mtl_id, mtlPct: count };\r\n      } else {\r\n        return { ...v };\r\n      }\r\n    });\r\n\r\n    setRemoveMtl(newCount);\r\n  };\r\n\r\n  // 數量-1\r\n  const contMinus = () => {\r\n    const newList = JSON.parse(JSON.stringify(removeMtl));\r\n\r\n    const newCount = newList.map((v, index) => {\r\n      if (index === i) {\r\n        if (el.mtlPct <= 1 || countTotal(removeMtl) > 10) {\r\n          return { ...v };\r\n        }\r\n        return { mtlId: mtl_id, mtlPct: el.mtlPct - 1 };\r\n      } else {\r\n        return { ...v };\r\n      }\r\n    });\r\n\r\n    setRemoveMtl(newCount);\r\n  };\r\n\r\n  // 數量+1\r\n  const countAdd = () => {\r\n    const newList = JSON.parse(JSON.stringify(removeMtl));\r\n\r\n    const newCount = newList.map((v, index) => {\r\n      if (index === i) {\r\n        if (el.mtlPct >= 5 || countTotal(removeMtl) > 9) {\r\n          return { ...v };\r\n        }\r\n        return { mtlId: mtl_id, mtlPct: el.mtlPct + 1 };\r\n      } else {\r\n        return { ...v };\r\n      }\r\n    });\r\n\r\n    setRemoveMtl(newCount);\r\n  };\r\n\r\n  return (\r\n    <div className=\"mtlRBtn my-3 mx-2\" key={mtl_id}>\r\n      <div className=\"mtlimg-r\">\r\n        <img src={`${config.HOST}${mtl_img_path}`} alt={mtl_name} />\r\n      </div>\r\n      <div className=\"mtlname-r ch-cont-16 col px-4\">{mtl_name}</div>\r\n      <div className=\"select-add-cart ch-cont-12\">\r\n        <div className=\"select-count\">\r\n          <button onClick={() => contMinus(i)}>\r\n            <Minus />\r\n          </button>\r\n          <input\r\n            type=\"number\"\r\n            value={el.mtlPct}\r\n            onChange={(e) => countIt(+e.target.value)}\r\n          />\r\n          <button onClick={() => countAdd(i)}>\r\n            <Plus />\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <Del className=\"mtlDelIcon\" onClick={del} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MtlRBtn;\r\n"]},"metadata":{},"sourceType":"module"}