{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ryany\\\\OneDrive\\\\\\u684C\\u9762\\\\primeal\\\\src\\\\pages\\\\member\\\\component\\\\HistoryOrder.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { orderInfo } from '../../../WebApi';\nimport { ReactComponent as SelectOpen } from '../../../imgs/selectopen.svg';\nimport { ReactComponent as SelectClose } from '../../../imgs/selectclose.svg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst HistoryOrder = () => {\n  _s();\n\n  const [historyOrderInfo, setHistoryOrderInfo] = useState('');\n  const mem_id = localStorage.getItem('mem_id');\n  const [cartId, setCartId] = useState();\n\n  const handleClickToggle = e => {\n    const id = e.target.attributes.getNamedItem('data-id').value; //react div元素的拿法\n\n    const newCartData = cartId.map(d => {\n      if (parseInt(d.cId) === parseInt(id)) {\n        if (d.open === true) {\n          return { ...d,\n            open: false\n          };\n        } else {\n          return { ...d,\n            open: true\n          };\n        }\n      } else {\n        return { ...d\n        };\n      }\n    }); // if (clickToggle === true) {\n    //   setClickToggle(false);\n    // } else {\n    //   setClickToggle(true);\n    // }\n    // setIndex(id);\n\n    setCartId(newCartData);\n  };\n\n  useEffect(() => {\n    orderInfo(mem_id).then(obj => {\n      const cartData = obj.newData2.filter(i => {\n        return i.cart_status !== '未結帳';\n      }).map(v => {\n        return { ...v,\n          cId: v.cart_id,\n          open: false\n        };\n      });\n      setHistoryOrderInfo(obj);\n      setCartId(cartData);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row orderDetailRow\",\n    children: [/*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table col-md-20 ch-title-16\",\n      children: /*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"col-4\",\n            children: \"\\u8A02\\u55AE\\u7DE8\\u865F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"col-4\",\n            children: \"\\u8CFC\\u8CB7\\u65E5\\u671F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"col-4\",\n            children: \"\\u8A02\\u55AE\\u72C0\\u614B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"col-4\",\n            children: \"\\u7E3D\\u50F9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"col-4\",\n            children: \"\\u5370\\u88FD\\u6642\\u9593\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"col-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), cartId && cartId.map((data, i) => {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table col-md-20 ch-cont-16\",\n          children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"col-4\",\n                children: data.order_num\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"col-4\",\n                children: data.cart_checkout_date\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"col-4\",\n                children: data.cart_status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"col-4\",\n                children: [\"NT$ \", data.cart_value, \" \\u5143\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"col-4\",\n                children: [data.cart_total_print_time, \" \\u5206\\u9418\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"col-4\",\n                onClick: handleClickToggle,\n                style: {\n                  cursor: 'pointer'\n                },\n                \"data-id\": data.cart_id,\n                children: [\"\\u4EA4\\u6613\\u660E\\u7D30\", data.open ? /*#__PURE__*/_jsxDEV(SelectClose, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 36\n                }, this) : /*#__PURE__*/_jsxDEV(SelectOpen, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 54\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-20\",\n          style: data.open ? {\n            display: 'block',\n            transition: '1s'\n          } : {\n            display: 'none',\n            transition: '1s'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '2%'\n            },\n            children: historyOrderInfo.newAllData && historyOrderInfo.newAllData.filter(d => d.cart_id === data.cart_id).map(info => {\n              return /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"order-detail-list\",\n                  style: {\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    textAlign: 'left',\n                    padding: '1%'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-4\",\n                    children: [info.c_prod_img_path ? /*#__PURE__*/_jsxDEV(\"img\", {\n                      style: {\n                        width: '100px'\n                      },\n                      src: 'http://localhost:3500' + info.c_prod_img_path\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 127,\n                      columnNumber: 35\n                    }, this) : '', info.cm_prod_img_path ? /*#__PURE__*/_jsxDEV(\"img\", {\n                      style: {\n                        width: '100px'\n                      },\n                      src: 'http://localhost:3500' + info.cm_prod_img_path\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 35\n                    }, this) : '', info.set_name ? /*#__PURE__*/_jsxDEV(\"img\", {\n                      style: {\n                        width: '100px'\n                      },\n                      src: 'http://localhost:3500/img/setorder/bento_img/default.png'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 149,\n                      columnNumber: 35\n                    }, this) : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-4 ch-cont-14\",\n                    children: [info.c_prod_ch_name ? info.c_prod_ch_name : '', info.set_name ? info.set_name : '', info.cm_prod_name ? info.cm_prod_name : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-4 ch-cont-14\",\n                    children: [\"\\u5171\", info.orders_amount, \"\\u4EF6\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-4 ch-cont-14\",\n                    children: [info.c_prod_value ? 'NT' + info.c_prod_value + '元/件' : '', info.set_price ? 'NT' + info.set_price / info.orders_amount + '元/件' : '', info.cm_prod_value ? 'NT' + info.cm_prod_value + '元/件' : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-4 ch-cont-14\",\n                    children: [info.orders_print_time / 60, \"\\u5206\\u9418/\\u4EF6\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n\n_s(HistoryOrder, \"glvE4BpMB07plyTrU3RnVeYQ4Ps=\");\n\n_c = HistoryOrder;\nexport default HistoryOrder;\n\nvar _c;\n\n$RefreshReg$(_c, \"HistoryOrder\");","map":{"version":3,"sources":["C:/Users/ryany/OneDrive/桌面/primeal/src/pages/member/component/HistoryOrder.js"],"names":["useState","useEffect","orderInfo","ReactComponent","SelectOpen","SelectClose","HistoryOrder","historyOrderInfo","setHistoryOrderInfo","mem_id","localStorage","getItem","cartId","setCartId","handleClickToggle","e","id","target","attributes","getNamedItem","value","newCartData","map","d","parseInt","cId","open","then","obj","cartData","newData2","filter","i","cart_status","v","cart_id","data","order_num","cart_checkout_date","cart_value","cart_total_print_time","cursor","display","transition","padding","newAllData","info","justifyContent","textAlign","c_prod_img_path","width","cm_prod_img_path","set_name","c_prod_ch_name","cm_prod_name","orders_amount","c_prod_value","set_price","cm_prod_value","orders_print_time"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { orderInfo } from '../../../WebApi';\r\nimport { ReactComponent as SelectOpen } from '../../../imgs/selectopen.svg';\r\nimport { ReactComponent as SelectClose } from '../../../imgs/selectclose.svg';\r\n\r\nconst HistoryOrder = () => {\r\n  const [historyOrderInfo, setHistoryOrderInfo] = useState('');\r\n  const mem_id = localStorage.getItem('mem_id');\r\n  const [cartId, setCartId] = useState();\r\n\r\n  const handleClickToggle = e => {\r\n    const id = e.target.attributes.getNamedItem('data-id').value; //react div元素的拿法\r\n\r\n    const newCartData = cartId.map(d => {\r\n      if (parseInt(d.cId) === parseInt(id)) {\r\n        if (d.open === true) {\r\n          return { ...d, open: false };\r\n        } else {\r\n          return { ...d, open: true };\r\n        }\r\n      } else {\r\n        return { ...d };\r\n      }\r\n    });\r\n    // if (clickToggle === true) {\r\n    //   setClickToggle(false);\r\n    // } else {\r\n    //   setClickToggle(true);\r\n    // }\r\n    // setIndex(id);\r\n    setCartId(newCartData);\r\n  };\r\n\r\n  useEffect(() => {\r\n    orderInfo(mem_id).then(obj => {\r\n      const cartData = obj.newData2\r\n        .filter(i => {\r\n          return i.cart_status !== '未結帳';\r\n        })\r\n        .map(v => {\r\n          return { ...v, cId: v.cart_id, open: false };\r\n        });\r\n      setHistoryOrderInfo(obj);\r\n      setCartId(cartData);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"row orderDetailRow\">\r\n      <table className=\"table col-md-20 ch-title-16\">\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\" className=\"col-4\">\r\n              訂單編號\r\n            </th>\r\n            <th scope=\"col\" className=\"col-4\">\r\n              購買日期\r\n            </th>\r\n            <th scope=\"col\" className=\"col-4\">\r\n              訂單狀態\r\n            </th>\r\n            <th scope=\"col\" className=\"col-4\">\r\n              總價\r\n            </th>\r\n            <th scope=\"col\" className=\"col-4\">\r\n              印製時間\r\n            </th>\r\n            <th scope=\"col\" className=\"col-4\"></th>\r\n          </tr>\r\n        </thead>\r\n      </table>\r\n      {cartId &&\r\n        cartId.map((data, i) => {\r\n          return (\r\n            <>\r\n              <table className=\"table col-md-20 ch-cont-16\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td className=\"col-4\">{data.order_num}</td>\r\n                    <td className=\"col-4\">{data.cart_checkout_date}</td>\r\n                    <td className=\"col-4\">{data.cart_status}</td>\r\n                    <td className=\"col-4\">NT$ {data.cart_value} 元</td>\r\n                    <td className=\"col-4\">{data.cart_total_print_time} 分鐘</td>\r\n                    <td\r\n                      className=\"col-4\"\r\n                      onClick={handleClickToggle}\r\n                      style={{ cursor: 'pointer' }}\r\n                      data-id={data.cart_id}\r\n                    >\r\n                      交易明細\r\n                      {data.open ? <SelectClose /> : <SelectOpen />}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n\r\n              <div\r\n                className=\"col-md-20\"\r\n                style={\r\n                  data.open\r\n                    ? { display: 'block', transition: '1s' }\r\n                    : { display: 'none', transition: '1s' }\r\n                }\r\n              >\r\n                <div\r\n                  style={{\r\n                    padding: '2%',\r\n                  }}\r\n                >\r\n                  {historyOrderInfo.newAllData &&\r\n                    historyOrderInfo.newAllData\r\n                      .filter(d => d.cart_id === data.cart_id)\r\n                      .map(info => {\r\n                        return (\r\n                          <>\r\n                            <div\r\n                              className=\"order-detail-list\"\r\n                              style={{\r\n                                display: 'flex',\r\n                                justifyContent: 'space-between',\r\n                                textAlign: 'left',\r\n                                padding: '1%',\r\n                              }}\r\n                            >\r\n                              <div className=\"col-4\">\r\n                                {info.c_prod_img_path ? (\r\n                                  <img\r\n                                    style={{ width: '100px' }}\r\n                                    src={\r\n                                      'http://localhost:3500' +\r\n                                      info.c_prod_img_path\r\n                                    }\r\n                                  />\r\n                                ) : (\r\n                                  ''\r\n                                )}\r\n                                {info.cm_prod_img_path ? (\r\n                                  <img\r\n                                    style={{ width: '100px' }}\r\n                                    src={\r\n                                      'http://localhost:3500' +\r\n                                      info.cm_prod_img_path\r\n                                    }\r\n                                  />\r\n                                ) : (\r\n                                  ''\r\n                                )}\r\n                                {info.set_name ? (\r\n                                  <img\r\n                                    style={{ width: '100px' }}\r\n                                    src={\r\n                                      'http://localhost:3500/img/setorder/bento_img/default.png'\r\n                                    }\r\n                                  />\r\n                                ) : (\r\n                                  ''\r\n                                )}\r\n                              </div>\r\n                              <div className=\"col-4 ch-cont-14\">\r\n                                {info.c_prod_ch_name ? info.c_prod_ch_name : ''}\r\n                                {info.set_name ? info.set_name : ''}\r\n                                {info.cm_prod_name ? info.cm_prod_name : ''}\r\n                              </div>\r\n                              <div className=\"col-4 ch-cont-14\">\r\n                                共{info.orders_amount}件\r\n                              </div>\r\n                              <div className=\"col-4 ch-cont-14\">\r\n                                {info.c_prod_value\r\n                                  ? 'NT' + info.c_prod_value + '元/件'\r\n                                  : ''}\r\n                                {info.set_price\r\n                                  ? 'NT' +\r\n                                    info.set_price / info.orders_amount +\r\n                                    '元/件'\r\n                                  : ''}\r\n                                {info.cm_prod_value\r\n                                  ? 'NT' + info.cm_prod_value + '元/件'\r\n                                  : ''}\r\n                              </div>\r\n                              <div className=\"col-4 ch-cont-14\">\r\n                                {info.orders_print_time / 60}分鐘/件\r\n                              </div>\r\n                            </div>\r\n                          </>\r\n                        );\r\n                      })}\r\n                </div>\r\n              </div>\r\n            </>\r\n          );\r\n        })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HistoryOrder;\r\n"]},"metadata":{},"sourceType":"module"}