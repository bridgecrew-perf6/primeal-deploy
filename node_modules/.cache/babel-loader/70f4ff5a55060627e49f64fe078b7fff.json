{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ryany\\\\OneDrive\\\\\\u684C\\u9762\\\\primeal\\\\src\\\\pages\\\\share\\\\components\\\\ShareFilter.js\",\n    _s = $RefreshSig$();\n\nimport styles from '../Share.module.scss';\nimport '../../classic/index.scss';\nimport config from '../../../Config';\nimport { useState, useEffect } from 'react';\nimport { ReactComponent as DeleteSm } from '../../../imgs/del.svg';\nimport { ReactComponent as OrangeTag } from '../../../imgs/tags/Rectangle_orange.svg';\nimport { IoIosArrowDown as DownArrow } from 'react-icons/io';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ShareFilter(props) {\n  _s();\n\n  const {\n    filter,\n    setFilter,\n    masonryContainer,\n    setMasonryContainer,\n    filterState,\n    dispatch,\n    setShareItemsData,\n    getShareItems,\n    setNoFound\n  } = props;\n  const [tagsInput, setTagsInput] = useState([]);\n  const [suggestedTags, setSuggestedTags] = useState([]);\n  const [foundTags, setFoundTags] = useState([]);\n\n  const filterDispatchHandler = e => {\n    const type = e.target.dataset.type;\n\n    if (type) {\n      return dispatch({\n        type: `${type.toUpperCase()}`,\n        [type]: e.target.value\n      });\n    }\n  };\n\n  const getSuggestedTags = async () => {\n    const response = await fetch(config.GET_TAGS, {\n      method: 'GET'\n    });\n    const itemsObj = await response.json();\n    return itemsObj;\n  };\n\n  const getFoundTags = async () => {\n    try {\n      const response = await fetch(config.GET_TAGS, {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify(tagsInput[0])\n      });\n      if (!response.ok) throw new Error('No tags found!');\n      const itemsObj = await response.json();\n      return itemsObj;\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  const getFilterData = async () => {\n    try {\n      const response = await fetch(config.GET_FILTER_ITEMS, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(filterState)\n      });\n      if (!response.ok) throw new Error('No items match your search!');\n      const itemsObj = await response.json();\n      setNoFound('');\n      setShareItemsData(itemsObj.data);\n    } catch (err) {\n      setNoFound('查無符合條件的貼文，請重新篩選或清空篩選條件');\n      setShareItemsData([]);\n      console.error(err.message);\n    }\n  };\n\n  const tagsInputHandler = e => {\n    const value = e.target.value;\n\n    if (value) {\n      setTagsInput([{\n        tagInput: e.target.value\n      }]);\n    } else {\n      setTagsInput([]);\n    }\n  };\n\n  const checkSelectedTags = e => {\n    const isSelected = filterState.tags.some(tag => tag === e.target.innerText);\n\n    if (!isSelected) {\n      return [...filterState.tags, e.target.innerText];\n    } else {\n      return filterState.tags;\n    }\n  };\n\n  const checkRemovedTags = e => filterState.tags.filter(tag => tag !== e.target.previousSibling.innerText);\n\n  const tagsAreaHandler = () => {\n    if (tagsInput.length === 0) {\n      return suggestedTags.map((tag, i) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flavor-tag ch-title-16\",\n          onClick: e => {\n            dispatch({\n              type: 'TAGS',\n              tags: checkSelectedTags(e)\n            });\n          },\n          children: tag.item_hash\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this);\n      });\n    }\n\n    if (tagsInput.length && foundTags.length) {\n      return foundTags.map((tag, i) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flavor-tag ch-title-16\",\n          onClick: e => {\n            dispatch({\n              type: 'TAGS',\n              tags: checkSelectedTags(e)\n            });\n          },\n          children: tag.item_hash\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this);\n      });\n    }\n\n    if (tagsInput.length && foundTags.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ch-title-16\",\n        children: \"\\u67E5\\u7121\\u7D50\\u679C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 14\n      }, this);\n    }\n  };\n\n  const selectedTagsHandler = () => {\n    if (filterState.tags.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"en-title-14-10 text-grey\",\n        children: \"Suggestions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flavor-tag-box\",\n        children: filterState.tags.map((tag, i) => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `${styles['filter-hashtag-tag']} d-flex align-items-center`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `${styles['hashtag-tag-text']} ch-cont-14 mr-2`,\n              children: tag\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(DeleteSm, {\n              style: {\n                cursor: 'pointer'\n              },\n              onClick: e => {\n                dispatch({\n                  type: 'TAGS',\n                  tags: checkRemovedTags(e)\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this);\n    }\n  }; // Finding tags when tag input changed\n\n\n  useEffect(() => {\n    if (Object.keys(tagsInput).length === 0) return;\n\n    (async () => {\n      const result = await getFoundTags();\n\n      if (!result) {\n        setFoundTags([]);\n      } else {\n        setFoundTags(result.data);\n      }\n    })();\n  }, [tagsInput]); // Fetching data\n\n  useEffect(() => {\n    (async () => {\n      const result = await getSuggestedTags();\n      setSuggestedTags(result.data);\n    })();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${styles['filter-panel-mask']}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${styles['filter-panel']}`,\n      style: !filter ? {\n        right: '-100%'\n      } : {\n        right: '12.5%'\n      },\n      onTransitionEnd: () => filter && setMasonryContainer(!masonryContainer),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `mycontainer mb-5 classic`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"prod-filter-ryan\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-column\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `${styles['share-filter-top']} justify-content-end`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `clean-filter ch-cont-16 ${styles['mr-100']} d-flex align-items-center`,\n                onClick: () => {\n                  dispatch({\n                    type: 'RESET'\n                  });\n                  setNoFound('');\n\n                  (async () => {\n                    const result = await getShareItems();\n                    setShareItemsData(result.data);\n                  })();\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: require('./../../../imgs/tags/trash.png'),\n                  alt: \"trash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"\\u6E05\\u7A7A\\u689D\\u4EF6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(DeleteSm, {\n                  className: `${styles['button-default-lg']}`,\n                  onClick: () => {\n                    setFilter(!filter);\n                    setMasonryContainer(!masonryContainer);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"by-price col-18 d-flex flex-column\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"by-price-title\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"orange-tag\",\n                    children: /*#__PURE__*/_jsxDEV(OrangeTag, {\n                      className: \"tag-img\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 241,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"by-price-text en-title-big\",\n                    children: \"By PRICE\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"down-arrow\",\n                    children: /*#__PURE__*/_jsxDEV(DownArrow, {\n                      size: 22,\n                      color: \"gray\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 245,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"by-price-input justify-content-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    placeholder: \"\\u6700\\u5C0F\\u91D1\\u984D\",\n                    value: filterState.minPrice,\n                    \"data-type\": \"minPrice\",\n                    onChange: e => {\n                      filterDispatchHandler(e);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"by-price-dash-line\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    placeholder: \"\\u6700\\u5927\\u91D1\\u984D\",\n                    value: filterState.maxPrice,\n                    \"data-type\": \"maxPrice\",\n                    onChange: e => {\n                      filterDispatchHandler(e);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"by-flavor col-18 d-flex flex-column\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"by-flavor-title\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"orange-tag\",\n                    children: /*#__PURE__*/_jsxDEV(OrangeTag, {\n                      className: \"tag-img\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 277,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"by-price-text en-title-big\",\n                    children: \"By TAGS\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"down-arrow\",\n                    children: /*#__PURE__*/_jsxDEV(DownArrow, {\n                      size: 22,\n                      color: \"gray\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 281,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"by-price-input justify-content-between\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    style: {\n                      width: '100%'\n                    },\n                    type: \"text\",\n                    placeholder: \"\\u641C\\u5C0B\\u6A19\\u7C64\",\n                    onChange: e => tagsInputHandler(e)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 285,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 19\n                }, this), selectedTagsHandler(), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flavor-tag-box\",\n                  children: tagsAreaHandler()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-center mb-5\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-18 d-flex flex-column\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"by-category\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"orange-tag\",\n                    children: /*#__PURE__*/_jsxDEV(OrangeTag, {\n                      className: \"tag-img\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 302,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 301,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"by-price-text en-title-big\",\n                    children: \"By PRINT TIME\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 304,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"down-arrow\",\n                    children: /*#__PURE__*/_jsxDEV(DownArrow, {\n                      size: 22,\n                      color: \"gray\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 308,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"by-price-input justify-content-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    placeholder: \"\\u6700\\u5C0F\\u6642\\u9593\",\n                    value: filterState.minTime,\n                    \"data-type\": \"minTime\",\n                    onChange: e => {\n                      filterDispatchHandler(e);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 312,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"by-price-dash-line\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 321,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    placeholder: \"\\u6700\\u5927\\u6642\\u9593\",\n                    value: filterState.maxTime,\n                    \"data-type\": \"maxTime\",\n                    onChange: e => {\n                      filterDispatchHandler(e);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 322,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-18\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"send-filter-btn-box d-flex justify-content-end\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-sm btn-primary primeal-btn-sm\",\n                    onClick: () => {\n                      getFilterData();\n                      setFilter(!filter);\n                      setMasonryContainer(!masonryContainer);\n                    },\n                    children: \"\\u9001\\u51FA\\u689D\\u4EF6\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 337,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ShareFilter, \"J1YeG+6OlvaTxNWOh7zjrxsfztE=\");\n\n_c = ShareFilter;\nexport default ShareFilter;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShareFilter\");","map":{"version":3,"sources":["C:/Users/ryany/OneDrive/桌面/primeal/src/pages/share/components/ShareFilter.js"],"names":["styles","config","useState","useEffect","ReactComponent","DeleteSm","OrangeTag","IoIosArrowDown","DownArrow","ShareFilter","props","filter","setFilter","masonryContainer","setMasonryContainer","filterState","dispatch","setShareItemsData","getShareItems","setNoFound","tagsInput","setTagsInput","suggestedTags","setSuggestedTags","foundTags","setFoundTags","filterDispatchHandler","e","type","target","dataset","toUpperCase","value","getSuggestedTags","response","fetch","GET_TAGS","method","itemsObj","json","getFoundTags","headers","body","JSON","stringify","ok","Error","err","console","error","message","getFilterData","GET_FILTER_ITEMS","data","tagsInputHandler","tagInput","checkSelectedTags","isSelected","tags","some","tag","innerText","checkRemovedTags","previousSibling","tagsAreaHandler","length","map","i","item_hash","selectedTagsHandler","cursor","Object","keys","result","right","require","minPrice","maxPrice","width","minTime","maxTime"],"mappings":"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","sourcesContent":["import styles from '../Share.module.scss';\r\nimport '../../classic/index.scss';\r\nimport config from '../../../Config';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\nimport { ReactComponent as DeleteSm } from '../../../imgs/del.svg';\r\nimport { ReactComponent as OrangeTag } from '../../../imgs/tags/Rectangle_orange.svg';\r\nimport { IoIosArrowDown as DownArrow } from 'react-icons/io';\r\n\r\nfunction ShareFilter(props) {\r\n  const {\r\n    filter,\r\n    setFilter,\r\n    masonryContainer,\r\n    setMasonryContainer,\r\n    filterState,\r\n    dispatch,\r\n    setShareItemsData,\r\n    getShareItems,\r\n    setNoFound,\r\n  } = props;\r\n\r\n  const [tagsInput, setTagsInput] = useState([]);\r\n  const [suggestedTags, setSuggestedTags] = useState([]);\r\n  const [foundTags, setFoundTags] = useState([]);\r\n\r\n  const filterDispatchHandler = e => {\r\n    const type = e.target.dataset.type;\r\n    if (type) {\r\n      return dispatch({\r\n        type: `${type.toUpperCase()}`,\r\n        [type]: e.target.value,\r\n      });\r\n    }\r\n  };\r\n\r\n  const getSuggestedTags = async () => {\r\n    const response = await fetch(config.GET_TAGS, {\r\n      method: 'GET',\r\n    });\r\n    const itemsObj = await response.json();\r\n    return itemsObj;\r\n  };\r\n\r\n  const getFoundTags = async () => {\r\n    try {\r\n      const response = await fetch(config.GET_TAGS, {\r\n        method: 'POST',\r\n        headers: { 'content-type': 'application/json' },\r\n        body: JSON.stringify(tagsInput[0]),\r\n      });\r\n      if (!response.ok) throw new Error('No tags found!');\r\n      const itemsObj = await response.json();\r\n      return itemsObj;\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  const getFilterData = async () => {\r\n    try {\r\n      const response = await fetch(config.GET_FILTER_ITEMS, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(filterState),\r\n      });\r\n      if (!response.ok) throw new Error('No items match your search!');\r\n\r\n      const itemsObj = await response.json();\r\n      setNoFound('');\r\n      setShareItemsData(itemsObj.data);\r\n    } catch (err) {\r\n      setNoFound('查無符合條件的貼文，請重新篩選或清空篩選條件');\r\n      setShareItemsData([]);\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  const tagsInputHandler = e => {\r\n    const value = e.target.value;\r\n    if (value) {\r\n      setTagsInput([{ tagInput: e.target.value }]);\r\n    } else {\r\n      setTagsInput([]);\r\n    }\r\n  };\r\n\r\n  const checkSelectedTags = e => {\r\n    const isSelected = filterState.tags.some(tag => tag === e.target.innerText);\r\n    if (!isSelected) {\r\n      return [...filterState.tags, e.target.innerText];\r\n    } else {\r\n      return filterState.tags;\r\n    }\r\n  };\r\n\r\n  const checkRemovedTags = e =>\r\n    filterState.tags.filter(tag => tag !== e.target.previousSibling.innerText);\r\n\r\n  const tagsAreaHandler = () => {\r\n    if (tagsInput.length === 0) {\r\n      return suggestedTags.map((tag, i) => {\r\n        return (\r\n          <div\r\n            className=\"flavor-tag ch-title-16\"\r\n            key={i}\r\n            onClick={e => {\r\n              dispatch({ type: 'TAGS', tags: checkSelectedTags(e) });\r\n            }}\r\n          >\r\n            {tag.item_hash}\r\n          </div>\r\n        );\r\n      });\r\n    }\r\n    if (tagsInput.length && foundTags.length) {\r\n      return foundTags.map((tag, i) => {\r\n        return (\r\n          <div\r\n            className=\"flavor-tag ch-title-16\"\r\n            key={i}\r\n            onClick={e => {\r\n              dispatch({ type: 'TAGS', tags: checkSelectedTags(e) });\r\n            }}\r\n          >\r\n            {tag.item_hash}\r\n          </div>\r\n        );\r\n      });\r\n    }\r\n    if (tagsInput.length && foundTags.length === 0) {\r\n      return <div className=\"ch-title-16\">查無結果</div>;\r\n    }\r\n  };\r\n\r\n  const selectedTagsHandler = () => {\r\n    if (filterState.tags.length === 0) {\r\n      return <div className=\"en-title-14-10 text-grey\">Suggestions</div>;\r\n    } else {\r\n      return (\r\n        <div className=\"flavor-tag-box\">\r\n          {filterState.tags.map((tag, i) => {\r\n            return (\r\n              <div\r\n                key={i}\r\n                className={`${styles['filter-hashtag-tag']} d-flex align-items-center`}\r\n              >\r\n                <div\r\n                  className={`${styles['hashtag-tag-text']} ch-cont-14 mr-2`}\r\n                >\r\n                  {tag}\r\n                </div>\r\n                <DeleteSm\r\n                  style={{ cursor: 'pointer' }}\r\n                  onClick={e => {\r\n                    dispatch({ type: 'TAGS', tags: checkRemovedTags(e) });\r\n                  }}\r\n                />\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  // Finding tags when tag input changed\r\n  useEffect(() => {\r\n    if (Object.keys(tagsInput).length === 0) return;\r\n    (async () => {\r\n      const result = await getFoundTags();\r\n      if (!result) {\r\n        setFoundTags([]);\r\n      } else {\r\n        setFoundTags(result.data);\r\n      }\r\n    })();\r\n  }, [tagsInput]);\r\n\r\n  // Fetching data\r\n  useEffect(() => {\r\n    (async () => {\r\n      const result = await getSuggestedTags();\r\n\r\n      setSuggestedTags(result.data);\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div className={`${styles['filter-panel-mask']}`}></div>\r\n      <div\r\n        className={`${styles['filter-panel']}`}\r\n        style={!filter ? { right: '-100%' } : { right: '12.5%' }}\r\n        onTransitionEnd={() => filter && setMasonryContainer(!masonryContainer)}\r\n      >\r\n        {/* <div className={`${styles['waterfall-container']}`}></div> */}\r\n        <div className={`mycontainer mb-5 classic`}>\r\n          {/* 主要篩選條件區 */}\r\n          <div className=\"prod-filter-ryan\">\r\n            {/* clean or cancel filter */}\r\n            <div className=\"d-flex flex-column\">\r\n              <div\r\n                className={`${styles['share-filter-top']} justify-content-end`}\r\n              >\r\n                <div\r\n                  className={`clean-filter ch-cont-16 ${styles['mr-100']} d-flex align-items-center`}\r\n                  onClick={() => {\r\n                    dispatch({ type: 'RESET' });\r\n                    setNoFound('');\r\n                    (async () => {\r\n                      const result = await getShareItems();\r\n\r\n                      setShareItemsData(result.data);\r\n                    })();\r\n                  }}\r\n                >\r\n                  <img\r\n                    src={require('./../../../imgs/tags/trash.png')}\r\n                    alt=\"trash\"\r\n                  />\r\n                  <span>清空條件</span>\r\n                </div>\r\n                <div>\r\n                  <DeleteSm\r\n                    className={`${styles['button-default-lg']}`}\r\n                    onClick={() => {\r\n                      setFilter(!filter);\r\n                      setMasonryContainer(!masonryContainer);\r\n                    }}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* by price */}\r\n              <div className=\"d-flex justify-content-center\">\r\n                <div className=\"by-price col-18 d-flex flex-column\">\r\n                  <div className=\"by-price-title\">\r\n                    <div className=\"orange-tag\">\r\n                      <OrangeTag className=\"tag-img\" />\r\n                    </div>\r\n                    <div className=\"by-price-text en-title-big\">By PRICE</div>\r\n                    <div className=\"down-arrow\">\r\n                      <DownArrow size={22} color=\"gray\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"by-price-input justify-content-between\">\r\n                    <input\r\n                      type=\"number\"\r\n                      placeholder=\"最小金額\"\r\n                      value={filterState.minPrice}\r\n                      data-type=\"minPrice\"\r\n                      onChange={e => {\r\n                        filterDispatchHandler(e);\r\n                      }}\r\n                    />\r\n                    <div className=\"by-price-dash-line\"></div>\r\n                    <input\r\n                      type=\"number\"\r\n                      placeholder=\"最大金額\"\r\n                      value={filterState.maxPrice}\r\n                      data-type=\"maxPrice\"\r\n                      onChange={e => {\r\n                        filterDispatchHandler(e);\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* by tags */}\r\n              <div className=\"d-flex justify-content-center\">\r\n                <div className=\"by-flavor col-18 d-flex flex-column\">\r\n                  <div className=\"by-flavor-title\">\r\n                    <div className=\"orange-tag\">\r\n                      <OrangeTag className=\"tag-img\" />\r\n                    </div>\r\n                    <div className=\"by-price-text en-title-big\">By TAGS</div>\r\n                    <div className=\"down-arrow\">\r\n                      <DownArrow size={22} color=\"gray\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"by-price-input justify-content-between\">\r\n                    <input\r\n                      style={{ width: '100%' }}\r\n                      type=\"text\"\r\n                      placeholder=\"搜尋標籤\"\r\n                      onChange={e => tagsInputHandler(e)}\r\n                    />\r\n                  </div>\r\n                  {selectedTagsHandler()}\r\n                  <div className=\"flavor-tag-box\">{tagsAreaHandler()}</div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* by category */}\r\n              <div className=\"d-flex justify-content-center mb-5\">\r\n                <div className=\"col-18 d-flex flex-column\">\r\n                  <div className=\"by-category\">\r\n                    <div className=\"orange-tag\">\r\n                      <OrangeTag className=\"tag-img\" />\r\n                    </div>\r\n                    <div className=\"by-price-text en-title-big\">\r\n                      By PRINT TIME\r\n                    </div>\r\n                    <div className=\"down-arrow\">\r\n                      <DownArrow size={22} color=\"gray\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"by-price-input justify-content-between\">\r\n                    <input\r\n                      type=\"number\"\r\n                      placeholder=\"最小時間\"\r\n                      value={filterState.minTime}\r\n                      data-type=\"minTime\"\r\n                      onChange={e => {\r\n                        filterDispatchHandler(e);\r\n                      }}\r\n                    />\r\n                    <div className=\"by-price-dash-line\"></div>\r\n                    <input\r\n                      type=\"number\"\r\n                      placeholder=\"最大時間\"\r\n                      value={filterState.maxTime}\r\n                      data-type=\"maxTime\"\r\n                      onChange={e => {\r\n                        filterDispatchHandler(e);\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"d-flex justify-content-center\">\r\n                <div className=\"col-18\">\r\n                  <div className=\"send-filter-btn-box d-flex justify-content-end\">\r\n                    <button\r\n                      className=\"btn-sm btn-primary primeal-btn-sm\"\r\n                      onClick={() => {\r\n                        getFilterData();\r\n                        setFilter(!filter);\r\n                        setMasonryContainer(!masonryContainer);\r\n                      }}\r\n                    >\r\n                      送出條件\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ShareFilter;\r\n"]},"metadata":{},"sourceType":"module"}