{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ryany\\\\OneDrive\\\\\\u684C\\u9762\\\\primeal\\\\src\\\\pages\\\\classic\\\\Index.js\",\n    _s = $RefreshSig$();\n\nimport { Header, Title, AsideLeft, Footer } from '../layout/Layout';\nimport AsideRight from './AsideRight'; //右邊layout多了歷史查詢功能，因此拉出來自製\n\nimport './index.scss';\nimport { ReactComponent as Cart } from '../../imgs/tags/add_cart.svg';\nimport { ReactComponent as OrangeTag } from '../../imgs/tags/Rectangle_orange.svg';\nimport { ReactComponent as SearchBtn } from '../../imgs/search.svg';\nimport { ReactComponent as FilterBtn } from '../../imgs/filter-icon.svg';\nimport { IoIosArrowDown as DownArrow } from 'react-icons/io';\nimport { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport config from '../../Config';\nimport NavPage from '../layout/components/NavPage'; //加入漢堡選單\n\nimport { getCartCount } from '../../utils';\nimport { Button, Modal } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Index(props) {\n  _s();\n\n  const [allData, setAllData] = useState([]);\n  const [isOpenFilter, setIsOpenFilter] = useState(false); //是否開啟篩選器選單\n\n  const [isOpenMainContent, setIsOpenMainContent] = useState(true); //是否開啟主要商品列表\n\n  const [currentPage, setCurrentPage] = useState(1); //當前分頁\n\n  const [totalPage, setTotalPage] = useState(0); //總分頁數\n\n  const [category, setCategory] = useState('sushi'); //商品分類\n\n  const [prodList, setProdList] = useState([]); //依分類呈現商品資料\n\n  const [tagShow, setTagShow] = useState([]); //商品列表上方的分類標籤\n\n  const [materials, setMaterials] = useState([]); //材料\n\n  const [priceFilter, setPriceFilter] = useState(['', '']); //依金額搜尋([最小金額, 最大金額])\n\n  const [specialCategoryFilter, setSpecialCategoryFilter] = useState([{\n    tag: 'new',\n    value: false\n  }, {\n    tag: 'hot',\n    value: false\n  }, {\n    tag: 'sale',\n    value: false\n  }]); //依特殊標籤搜尋\n\n  const [filterData, setFilterData] = useState([]); //套用篩選條件後的商品列表\n\n  const [buyProdCount, setBuyProdCount] = useState([]); //紀錄每個商品購買的數量[{pid, pname, count}]\n\n  const [search, setSearch] = useState(false); //是否開啟搜尋框\n\n  const [searchText, setSearchText] = useState('');\n  const [cartCount, setCartCount] = useState(0);\n  const pageProdCount = 6; //一頁呈現的商品個數\n  //加入NAVBar漢堡選單開關\n\n  const showBlock = {\n    display: 'block'\n  };\n  const hiddenBlock = {\n    display: 'none'\n  };\n  const {\n    navIsOpen,\n    setNavIsOpen\n  } = props; // 解構NAVBAR\n  //處理點擊分類商品(SUSHI、DESSERT、PACKAGE)\n\n  const handleClickCategory = e => {\n    switch (e.target.innerText) {\n      case 'SUSHI':\n        const dataByCategory1 = allData.filter(pro => pro.c_prod_cate === 'sushi'); // setProdList(allData.filter(pro => pro.c_prod_cate === 'sushi'));\n\n        setProdList(dataByCategory1);\n        setCategory('sushi');\n        applyFilter(false, dataByCategory1);\n        break;\n\n      case 'DESSERT':\n        const dataByCategory2 = allData.filter(pro => pro.c_prod_cate === 'dessert'); // setProdList(allData.filter(pro => pro.c_prod_cate === 'dessert'));\n\n        setProdList(dataByCategory2);\n        setCategory('dessert');\n        applyFilter(false, dataByCategory2);\n        break;\n\n      case 'PACKAGE':\n        const dataByCategory3 = allData.filter(pro => pro.c_prod_cate === 'package'); // setProdList(allData.filter(pro => pro.c_prod_cate === 'package'));\n\n        setProdList(dataByCategory3);\n        setCategory('package');\n        applyFilter(false, dataByCategory3);\n        break;\n\n      default:\n        setProdList(allData.filter(pro => pro.c_prod_cate === 'sushi'));\n        setCategory('sushi');\n        applyFilter();\n    }\n  }; //控制依金額篩選的輸入欄\n\n\n  const handleChangePriceFilter = e => {\n    if (e.target.dataset.pfilter === 'min') {\n      setPriceFilter([e.target.value, priceFilter[1]]);\n    } else if (e.target.dataset.pfilter === 'max') {\n      setPriceFilter([priceFilter[0], e.target.value]);\n    }\n  }; //處理點擊材料篩選\n\n\n  const handelClickFlavor = e => {\n    const newData = materials.map(v => {\n      //將原有的材料id與被點擊的材料id做比對\n      if (+e.target.dataset.mtlid === v.mtl_id) {\n        return { ...v,\n          selected: !v.selected\n        };\n      } else {\n        return v;\n      }\n    });\n    setMaterials(newData);\n  }; //處理點擊特殊標籤篩選\n\n\n  const handelChangeSpecCategory = e => {\n    const newData = specialCategoryFilter.map(v => {\n      if (e.target.dataset.tag === v.tag) {\n        return { ...v,\n          value: !v.value\n        };\n      } else {\n        return v;\n      }\n    });\n    setSpecialCategoryFilter(newData);\n  }; //重設篩選條件\n\n\n  const cleanFilter = e => {\n    const resetMtls = materials.map(m => {\n      return { ...m,\n        selected: false\n      };\n    });\n    setPriceFilter(['', '']);\n    setMaterials(resetMtls);\n    setSpecialCategoryFilter([{\n      tag: 'new',\n      value: false\n    }, {\n      tag: 'hot',\n      value: false\n    }, {\n      tag: 'sale',\n      value: false\n    }]);\n  }; //移除商品列表上方的tag\n\n\n  const removeTag = e => {\n    switch (e.target.dataset.tagtype) {\n      //移除價格標籤\n      case 'p':\n        setPriceFilter(['', '']);\n        break;\n      //移除材料標籤\n\n      case 'c':\n        const newCData = materials.map(v => {\n          if (v.mtl_name === e.target.dataset.tagname) {\n            return { ...v,\n              selected: false\n            }; //把要取消的材料改為false\n          } else {\n            return v;\n          }\n        });\n        setMaterials(newCData);\n        break;\n      //移除特殊標籤\n\n      case 't':\n        let changedTagName = '';\n\n        if (e.target.dataset.tagname === '新品') {\n          changedTagName = 'new';\n        } else if (e.target.dataset.tagname === '熱門') {\n          changedTagName = 'hot';\n        } else if (e.target.dataset.tagname === '特價') {\n          changedTagName = 'sale';\n        }\n\n        const newTData = specialCategoryFilter.map(v => {\n          if (v.tag === changedTagName) {\n            return { ...v,\n              value: false\n            }; //把要取消的特殊標籤改為false\n          } else {\n            return v;\n          }\n        });\n        setSpecialCategoryFilter(newTData);\n        break;\n\n      default:\n        break;\n    }\n  }; //套用篩選條件\n\n\n  const applyFilter = function () {\n    let isClose = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    let isCategory = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    //如果要套用篩選條件後關掉篩選視窗，則isClose要傳true\n    //如果要直接套用上方三分類(SUSHI、DESSERT、PACKAGE)的資料，可以直接傳進來\n    let filteredData = [];\n\n    if (isCategory.length > 0) {\n      filteredData = isCategory;\n    } else {\n      filteredData = allData.filter(pro => pro.c_prod_cate === category);\n    }\n\n    if (searchText !== '') {\n      filteredData = filteredData.filter(data => data.c_prod_ch_name.includes(searchText));\n    } //最小金額\n\n\n    const minPrice = priceFilter[0] === '' ? 0 : +priceFilter[0]; //最大金額\n\n    const maxPrice = priceFilter[1] === '' ? 9999 : +priceFilter[1]; //沒填最大金額時搜尋9999\n    //口味選擇(被選中材料的id陣列)\n\n    const flavor = materials.filter(mtl => mtl.selected).map(mtl => mtl.mtl_id); //特殊標籤選擇('new'、'hot'、'sale')\n\n    const specTag = specialCategoryFilter.filter(tag => tag.value).map(tag => tag.tag);\n    const showTags = []; //套用篩選金額範圍\n\n    filteredData = filteredData.filter(prod => {\n      if (prod.c_prod_spe_value === 0) {\n        //當商品沒有特價時，用原價來篩選\n        return prod.c_prod_value >= minPrice && prod.c_prod_value <= maxPrice;\n      } else {\n        //當商品有特價時，用特價來篩選\n        return prod.c_prod_spe_value >= minPrice && prod.c_prod_spe_value <= maxPrice;\n      }\n    }); //套用篩選特殊標籤\n\n    if (specTag.length > 0) {\n      //specTag.length = 0(沒有選擇任何特殊標籤)時視為全選，不做任何過濾條件\n      filteredData = filteredData.filter(prod => {\n        let checkTag = ''; //c_prod_special_tag對照(XX%OFF轉為sale、HOT轉為hot、NEW轉為new)\n\n        if (prod.c_prod_special_tag.includes('OFF')) {\n          checkTag = 'sale';\n        } else if (prod.c_prod_special_tag !== '') {\n          checkTag = prod.c_prod_special_tag.toLowerCase();\n        }\n\n        if (specTag.includes(checkTag)) return true;\n      });\n    } //套用篩選口味\n\n\n    if (flavor.length > 0) {\n      //當flavor.length = 0(沒有選擇任何材料)時視為全選，不做任何過濾條件\n      filteredData = filteredData.filter(prod => {\n        for (const m of prod.c_prod_material_arr.split(',')) {\n          if (flavor.includes(+m)) return true;\n        }\n      });\n    } //處理商品列表上方的篩選標籤\n    //[{tagName: '鮭魚', type: 'c'}, {tagName: '20~50', type: 'p'}, {tagName: '特價', type: 't'}]\n    //金額標籤\n\n\n    if (priceFilter[0] !== '' || priceFilter[1] !== '') {\n      //若兩個金額都沒填寫則不處理\n      showTags.push({\n        tagName: `${priceFilter[0] === '' ? '0' : priceFilter[0]}~${priceFilter[1] === '' ? 'max' : priceFilter[1]}`,\n        type: 'p'\n      });\n    } //口味標籤\n\n\n    materials.forEach(v => {\n      if (v.selected) showTags.push({\n        tagName: v.mtl_name,\n        type: 'c'\n      });\n    }); //特殊標籤\n\n    specialCategoryFilter.forEach(v => {\n      if (v.value) {\n        let showTagName = '';\n\n        switch (v.tag) {\n          case 'new':\n            showTagName = '新品';\n            break;\n\n          case 'hot':\n            showTagName = '熱門';\n            break;\n\n          case 'sale':\n            showTagName = '特價';\n            break;\n\n          default:\n            break;\n        }\n\n        showTags.push({\n          tagName: showTagName,\n          type: 't'\n        });\n      }\n    });\n    if (isClose) setIsOpenFilter(false);\n    setTagShow(showTags);\n    setFilterData(filteredData);\n    setTotalPage(Math.ceil(filteredData.length / 6)); //取當頁所呈現的商品列表\n\n    if (isCategory.length > 0) {\n      //若是點選上方三大分類，則分頁從1開始\n      setProdList(filteredData.slice(0, pageProdCount));\n      setCurrentPage(1);\n    } else {\n      setProdList(filteredData.slice((currentPage - 1) * pageProdCount, currentPage * pageProdCount));\n    }\n  }; //處理搜尋框輸入\n\n\n  const handleChangeSearch = e => {\n    setSearchText(e.target.value);\n  }; //點擊商品分頁的箭頭按鈕\n\n\n  const changePageArrow = e => {\n    if (e.target.dataset.canchange === 'true') {\n      //上下頁數在合理範圍時才會換頁\n      setCurrentPage(+e.target.dataset.page);\n    }\n  }; //處理換頁\n\n\n  const changePage = e => {\n    setCurrentPage(+e.target.dataset.page);\n  };\n\n  const applyPage = () => {\n    setProdList(prodList.slice((currentPage - 1) * pageProdCount, currentPage * pageProdCount)); //取當頁所呈現的商品列表\n  }; // 加入購物車光箱\n\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true); //加入購物車\n\n\n  const addToCart = id => {\n    const isLogin = localStorage.getItem('mem_id') !== null; //判斷是否登入\n\n    if (isLogin) {\n      const addProd = buyProdCount.find(p => p.pid === +id);\n      const res = fetch(config.ADD_CART, {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify({\n          mid: +localStorage.getItem('mem_id'),\n          pid: addProd.pid,\n          count: addProd.count,\n          value: addProd.value,\n          print: addProd.print,\n          category: 'cs'\n        })\n      }).then(res => res.json()).then(d => {\n        //加入購物車後重新設定購物車的商品數量\n        getCartCount(+localStorage.getItem('mem_id'));\n      });\n      handleCartShow();\n    } else {\n      handleLikeShow();\n    }\n  }; //初始化所有商品的購買數量(皆為1)\n\n\n  const initProdBuyCount = prodList => {\n    const prodCount = [];\n    prodList.forEach(prod => {\n      prodCount.push({\n        pid: prod.pid,\n        pname: prod.c_prod_ch_name,\n        print: prod.c_prod_print_time,\n        value: +prod.c_prod_spe_value === 0 ? prod.c_prod_value : prod.c_prod_spe_value,\n        count: 1\n      });\n    });\n    setBuyProdCount(prodCount);\n  }; //輸入商品數量\n\n\n  const changeCountByType = (count, pid) => {\n    //商品數量不能小於0或是大於99\n    if (count <= 0 || count > 99) {\n      return false;\n    }\n\n    const newData = buyProdCount.map(p => {\n      if (p.pid === +pid) {\n        return { ...p,\n          count: count\n        };\n      } else {\n        return p;\n      }\n    });\n    setBuyProdCount(newData);\n  }; //點擊商品減少按鈕(-1)\n\n\n  const changeCountByMinus = pid => {\n    const newData = buyProdCount.map(p => {\n      if (p.pid === +pid) {\n        //商品數量若小於等於1，則不能再減少數量(需大於0)\n        if (p.count <= 1) {\n          return { ...p,\n            count: p.count\n          };\n        }\n\n        return { ...p,\n          count: p.count - 1\n        };\n      } else {\n        return p;\n      }\n    });\n    setBuyProdCount(newData);\n  }; //點擊商品增加按鈕(+1)\n\n\n  const changeCountByAdd = pid => {\n    const newData = buyProdCount.map(p => {\n      if (p.pid === +pid) {\n        //商品數量若大於等於99，則不能再增加數量\n        if (p.count >= 99) {\n          return { ...p,\n            count: p.count\n          };\n        }\n\n        return { ...p,\n          count: p.count + 1\n        };\n      } else {\n        return p;\n      }\n    });\n    setBuyProdCount(newData);\n  }; //每次點擊商品詳細頁，都要將pid存到localstorage以供歷史查詢\n\n\n  const saveHistory = pid => {\n    var _localStorage$getItem;\n\n    let newHistory = (_localStorage$getItem = localStorage.getItem('history')) !== null && _localStorage$getItem !== void 0 ? _localStorage$getItem : '';\n    newHistory += pid + '-';\n    localStorage.setItem('history', newHistory);\n  };\n\n  useEffect(() => {\n    const fetchData = async () => {\n      //取得所有商品資料\n      const prodRes = await fetch(config.GET_INIT_PRODS);\n      const prodObj = await prodRes.json();\n      const prods = prodObj.rows; //data.data\n\n      setAllData(prods); //取得所有食材資料\n\n      const mtlRes = await fetch(config.GET_INIT_MTLS);\n      const mtlObj = await mtlRes.json();\n      const mtls = mtlObj.rows;\n      const initData = prods.filter(pro => pro.c_prod_cate === 'sushi'); //預設呈現的商品類型為壽司\n\n      setProdList(initData); //初始化所有材料\n\n      setMaterials(mtls); //初始化總分頁數\n\n      setTotalPage(Math.ceil(initData.length / 6)); //初始化商品購買數量\n\n      initProdBuyCount(prods);\n    };\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    applyFilter(); //當篩選條件其中一個有改變或是點其它分頁，就重新渲染商品列表\n  }, [materials, priceFilter, specialCategoryFilter, searchText, currentPage]);\n  const showStyle = {\n    display: 'block'\n  };\n  const showStyleInlne = {\n    display: 'inline'\n  };\n  const hiddenStyle = {\n    display: 'none'\n  };\n  const flavorTagNoClick = {\n    color: '#b03342',\n    backgroundColor: 'transparent'\n  };\n  const flavorTagClicked = {\n    color: '#ffffff',\n    backgroundColor: '#b03342'\n  };\n  const pageNoSelected = {\n    border: '1px solid #575757',\n    color: '#575757'\n  };\n  const pageSelected = {\n    border: '1px solid #B03342',\n    color: '#B03342'\n  };\n\n  const searchBarHandler = () => search ? {\n    transform: 'translateX(0px)'\n  } : {\n    transform: 'translateX(280px)'\n  }; //請先登入的光箱\n\n\n  const [likeShow, setLikeShow] = useState(false);\n\n  const handleLikeClose = () => setLikeShow(false);\n\n  const handleLikeShow = () => setLikeShow(true);\n\n  const likeModel = /*#__PURE__*/_jsxDEV(Modal, {\n    show: likeShow,\n    onHide: handleLikeClose,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        className: \"en-cont-30 m-3\",\n        children: \"\\u63D0\\u9192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      style: {\n        margin: '0 3%'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"en-cont-14 pb-2\",\n        children: \"\\u8ACB\\u5148\\u767B\\u5165\\u5F8C\\u624D\\u80FD\\u64CD\\u4F5C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        className: \"btn btn-sm btn-primary primeal-btn-sm mx-5 m-3\",\n        onClick: handleLikeClose,\n        children: \"\\u95DC\\u9589\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 482,\n    columnNumber: 5\n  }, this); //加入購物車的光箱\n\n\n  const [cartShow, setCartShow] = useState(false);\n\n  const handleCartClose = () => setCartShow(false);\n\n  const handleCartShow = () => setCartShow(true);\n\n  const cartModel = /*#__PURE__*/_jsxDEV(Modal, {\n    show: cartShow,\n    onHide: handleCartClose,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        className: \"en-cont-30 m-3\",\n        children: \"\\u63D0\\u9192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      style: {\n        margin: '0 3%'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"en-cont-14 pb-2\",\n        children: \"\\u5DF2\\u6210\\u529F\\u5C07\\u5546\\u54C1\\u52A0\\u5165\\u8CFC\\u7269\\u8ECA!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        className: \"btn btn-sm btn-primary primeal-btn-sm mx-5 m-3\",\n        onClick: handleCartClose,\n        children: \"\\u95DC\\u9589\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 513,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 506,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [likeModel, cartModel, /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 7\n    }, this), navIsOpen && /*#__PURE__*/_jsxDEV(NavPage, {\n      navIsOpen: navIsOpen,\n      setNavIsOpen: setNavIsOpen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 531,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: navIsOpen ? hiddenBlock : showBlock,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(AsideLeft, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            title: 'Classic',\n            setNavIsOpen: setNavIsOpen\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"en-title-14-10 bread\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: '/',\n              style: {\n                textDecoration: 'none',\n                color: '#575757'\n              },\n              children: \"HOME /\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: '/classic',\n              style: {\n                textDecoration: 'none',\n                color: '#b03342'\n              },\n              children: \"\\xA0CLASSIC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"classic min-hi\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"search-filter\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"search-btn d-flex\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"search-input d-flex justify-content-end align-items-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    style: searchBarHandler(),\n                    className: \"search-input-bar ch-cont-14\",\n                    value: searchText,\n                    onChange: handleChangeSearch,\n                    placeholder: \"Search\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 558,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 557,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"classic-search-btn\",\n                  children: /*#__PURE__*/_jsxDEV(SearchBtn, {\n                    onClick: () => setSearch(!search)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 568,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 567,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"filter-btn classic-filter-btn\",\n                onClick: () => {\n                  setIsOpenFilter(!isOpenFilter);\n                },\n                children: /*#__PURE__*/_jsxDEV(FilterBtn, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 577,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 571,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"main-content\",\n              style: isOpenMainContent ? showStyle : hiddenStyle,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"category-box\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"en-category\",\n                  onClick: handleClickCategory,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"cate-orange-tag-img\",\n                    style: category === 'sushi' ? showStyleInlne : hiddenStyle\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 589,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"en-category\",\n                    children: \"SUSHI\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 595,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 588,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"en-category\",\n                  onClick: handleClickCategory,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"cate-orange-tag-img\",\n                    style: category === 'dessert' ? showStyleInlne : hiddenStyle\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 598,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"en-category\",\n                    children: \"DESSERT\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 604,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 597,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"en-category\",\n                  onClick: handleClickCategory,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"cate-orange-tag-img\",\n                    style: category === 'package' ? showStyleInlne : hiddenStyle\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 607,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"en-category\",\n                    children: \"PACKAGE\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 613,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 606,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"filter-tag-box\",\n                children: tagShow.map((tag, i) => {\n                  return /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"filter-tag ch-cont-16\",\n                      children: [tag.tagName, ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n                        \"data-tagType\": tag.type,\n                        \"data-tagName\": tag.tagName,\n                        onClick: removeTag,\n                        children: \"\\xA0X\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 624,\n                        columnNumber: 27\n                      }, this)]\n                    }, i, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 622,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 618,\n                columnNumber: 17\n              }, this), prodList.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"no-result\",\n                children: [' ', /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"search-btn ch-title-22\",\n                  children: [/*#__PURE__*/_jsxDEV(SearchBtn, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 649,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"\\u67E5\\u7121\\u7B26\\u5408\\u689D\\u4EF6\\u7684\\u5546\\u54C1\\uFF0C\\u8ACB\\u91CD\\u65B0\\u7BE9\\u9078\\u6216\\u6E05\\u7A7A\\u7BE9\\u9078\\u689D\\u4EF6\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 650,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 648,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prod-list\",\n                children: [' ', prodList.map(prod => {\n                  var _buyCount$0$count, _buyCount$;\n\n                  const pid = prod.pid;\n                  {\n                    /* let buyCount = +buyProdCount.filter(p => p.pid === pid)[0].count; */\n                  }\n                  let buyCount = buyProdCount.filter(p => p.pid === pid);\n                  buyCount = (_buyCount$0$count = +((_buyCount$ = buyCount[0]) === null || _buyCount$ === void 0 ? void 0 : _buyCount$.count)) !== null && _buyCount$0$count !== void 0 ? _buyCount$0$count : 0;\n                  return /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"prod-card\",\n                      children: [/*#__PURE__*/_jsxDEV(Link, {\n                        to: `/classic/detail/${prod.pid}`,\n                        style: {\n                          textDecoration: 'none',\n                          color: '#212121'\n                        },\n                        onClick: () => {\n                          saveHistory(pid);\n                        },\n                        children: [' ', /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"prod-img-box\",\n                          children: [prod.c_prod_special_tag === '' ? '' : /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"discount-tag\",\n                            children: /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"discount-tag-content\",\n                              children: prod.c_prod_special_tag\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 687,\n                              columnNumber: 37\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 686,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                            // src={require('./../../imgs/temp/classic-pro1.png')}\n                            src: `http://localhost:3500${prod.c_prod_img_path}`,\n                            alt: \"product\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 693,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 681,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"content\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"intr-text ch-cont-14\",\n                            children: prod.c_prod_group_tag\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 700,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 699,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"prod-name-ch ch-title-22\",\n                          children: prod.c_prod_ch_name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 704,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"prod-name-en en-title-14-5\",\n                          children: prod.c_prod_en_name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 707,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 669,\n                        columnNumber: 29\n                      }, this), prod.c_prod_spe_value === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"prod-price-no-discount\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"no-discount ch-cont-16\",\n                          children: [\"NT_\", prod.c_prod_value]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 715,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 714,\n                        columnNumber: 31\n                      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"prod-price-special\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"original-price ch-cont-16\",\n                          children: [\"NT_\", prod.c_prod_value]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 721,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"special-price ch-cont-18\",\n                          children: [\"NT_\", prod.c_prod_spe_value]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 724,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 720,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"select-add-cart\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"select-count\",\n                          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                            onClick: e => changeCountByMinus(pid),\n                            children: \"-\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 732,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"number\",\n                            value: buyCount,\n                            onChange: e => changeCountByType(+e.target.value, pid)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 735,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                            onClick: e => changeCountByAdd(pid),\n                            children: \"+\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 742,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 731,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"cart-btn\",\n                          onClick: () => {\n                            addToCart(pid);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(Cart, {\n                            onClick: handleShow\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 753,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 747,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"add-cart btn-sm btn-primary primeal-btn\",\n                          onClick: () => {\n                            addToCart(pid);\n                          },\n                          children: \"\\u52A0\\u5165\\u8CFC\\u7269\\u8ECA\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 756,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 730,\n                        columnNumber: 29\n                      }, this)]\n                    }, pid, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 668,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 19\n              }, this), filterData.length > pageProdCount ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pagination-box\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"pagination ch-cont-16\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [' ', /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"page-prev\",\n                      \"data-page\": currentPage - 1,\n                      onClick: changePageArrow,\n                      \"data-canChange\": currentPage - 1 >= 1 ? true : false,\n                      children: \"<\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 780,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 777,\n                    columnNumber: 23\n                  }, this), Array(totalPage).fill(1).map((v, i) => {\n                    return /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: /*#__PURE__*/_jsxDEV(\"li\", {\n                        children: [' ', /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"page-number\",\n                          \"data-page\": i + 1,\n                          onClick: changePage,\n                          style: currentPage === i + 1 ? pageSelected : pageNoSelected,\n                          children: i + 1\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 797,\n                          columnNumber: 33\n                        }, this)]\n                      }, i, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 794,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false);\n                  }), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [' ', /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"page-next\",\n                      \"data-page\": currentPage + 1,\n                      \"data-canChange\": currentPage + 1 <= totalPage ? true : false,\n                      onClick: changePageArrow,\n                      children: \">\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 828,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 825,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 776,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 775,\n                columnNumber: 19\n              }, this) : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 582,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"prod-filter-sh\",\n              style: isOpenFilter ? {\n                right: '12.5%'\n              } : {\n                right: '-100%'\n              },\n              onTransitionEnd: () => {\n                setIsOpenMainContent(isOpenFilter ? false : true);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex flex-column\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"filter-top justify-content-end\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"clean-filter ch-cont-16\",\n                    onClick: cleanFilter,\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: require('./../../imgs/tags/trash.png'),\n                      alt: \"trash\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 861,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"\\u6E05\\u7A7A\\u689D\\u4EF6\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 865,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 857,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 856,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-center mobile-filter-title\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"by-price col-18 d-flex flex-column\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"by-price-title\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"orange-tag\",\n                        children: /*#__PURE__*/_jsxDEV(OrangeTag, {\n                          className: \"tag-img\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 877,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 876,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"by-price-text en-title-big\",\n                        children: \"By PRICE\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 879,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"down-arrow\",\n                        children: /*#__PURE__*/_jsxDEV(DownArrow, {\n                          size: 22,\n                          color: \"gray\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 883,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 882,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 875,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"by-price-input justify-content-between\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        placeholder: \"\\u6700\\u5C0F\\u91D1\\u984D\",\n                        \"data-pFilter\": \"min\",\n                        value: priceFilter[0],\n                        onChange: handleChangePriceFilter\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 887,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"by-price-dash-line\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 894,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        placeholder: \"\\u6700\\u5927\\u91D1\\u984D\",\n                        \"data-pFilter\": \"max\",\n                        value: priceFilter[1],\n                        onChange: handleChangePriceFilter\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 895,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 886,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 874,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 873,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-center mobile-filter-title\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"by-flavor col-18 d-flex flex-column\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"by-flavor-title\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"orange-tag\",\n                        children: /*#__PURE__*/_jsxDEV(OrangeTag, {\n                          className: \"tag-img\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 911,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 910,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"by-price-text en-title-big\",\n                        children: \"By FLAVOR\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 913,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"down-arrow\",\n                        children: /*#__PURE__*/_jsxDEV(DownArrow, {\n                          size: 22,\n                          color: \"gray\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 917,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 916,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 909,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flavor-tag-box\",\n                      children: materials.map(mtl => {\n                        return /*#__PURE__*/_jsxDEV(_Fragment, {\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flavor-tag ch-title-16\",\n                            \"data-mtlid\": mtl.mtl_id,\n                            style: mtl.selected ? flavorTagClicked : flavorTagNoClick,\n                            onClick: handelClickFlavor,\n                            children: mtl.mtl_name\n                          }, mtl.mtl_id, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 924,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 920,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 908,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 907,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-center mobile-filter-title\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-18 d-flex flex-column\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"by-category\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"orange-tag\",\n                        children: /*#__PURE__*/_jsxDEV(OrangeTag, {\n                          className: \"tag-img\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 961,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 960,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"by-price-text en-title-big\",\n                        children: \"By CATEGORY\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 963,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"down-arrow\",\n                        children: /*#__PURE__*/_jsxDEV(DownArrow, {\n                          size: 22,\n                          color: \"gray\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 967,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 966,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 959,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"category-checkbox-box\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        className: \"caterory-check\",\n                        type: \"checkbox\",\n                        id: \"new-item\",\n                        \"data-tag\": \"new\",\n                        checked: specialCategoryFilter[0].value,\n                        onChange: handelChangeSpecCategory\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 971,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"label-box\",\n                        children: /*#__PURE__*/_jsxDEV(\"label\", {\n                          className: \"ch-title-16\",\n                          for: \"new-item\",\n                          children: \"\\u65B0\\u54C1\\u4E0A\\u5E02\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 980,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 979,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        className: \"caterory-check\",\n                        type: \"checkbox\",\n                        id: \"hot-item\",\n                        \"data-tag\": \"hot\",\n                        checked: specialCategoryFilter[1].value,\n                        onChange: handelChangeSpecCategory\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 984,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"label-box\",\n                        children: /*#__PURE__*/_jsxDEV(\"label\", {\n                          className: \"ch-title-16\",\n                          for: \"hot-item\",\n                          children: \"\\u71B1\\u9580\\u5546\\u54C1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 993,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 992,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        className: \"caterory-check\",\n                        type: \"checkbox\",\n                        id: \"for-sale\",\n                        \"data-tag\": \"sale\",\n                        checked: specialCategoryFilter[2].value,\n                        onChange: handelChangeSpecCategory\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 997,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"label-box\",\n                        children: /*#__PURE__*/_jsxDEV(\"label\", {\n                          className: \"ch-title-16\",\n                          for: \"for-sale\",\n                          children: \"\\u4FC3\\u92B7\\u7279\\u50F9\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1006,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1005,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 970,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 958,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 957,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-18\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"send-filter-btn-box d-flex justify-content-end\",\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn-sm btn-primary primeal-btn-sm\",\n                        onClick: () => {\n                          applyFilter(true);\n                        },\n                        children: \"\\u9001\\u51FA\\u689D\\u4EF6\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1016,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1015,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1014,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1013,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 855,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 847,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1030,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AsideRight, {\n          setNavIsOpen: setNavIsOpen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1032,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Index, \"3IGhiIJIOgJc5saZoieKbaYQBFw=\");\n\n_c = Index;\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["C:/Users/ryany/OneDrive/桌面/primeal/src/pages/classic/Index.js"],"names":["Header","Title","AsideLeft","Footer","AsideRight","ReactComponent","Cart","OrangeTag","SearchBtn","FilterBtn","IoIosArrowDown","DownArrow","useState","useEffect","Link","config","NavPage","getCartCount","Button","Modal","Index","props","allData","setAllData","isOpenFilter","setIsOpenFilter","isOpenMainContent","setIsOpenMainContent","currentPage","setCurrentPage","totalPage","setTotalPage","category","setCategory","prodList","setProdList","tagShow","setTagShow","materials","setMaterials","priceFilter","setPriceFilter","specialCategoryFilter","setSpecialCategoryFilter","tag","value","filterData","setFilterData","buyProdCount","setBuyProdCount","search","setSearch","searchText","setSearchText","cartCount","setCartCount","pageProdCount","showBlock","display","hiddenBlock","navIsOpen","setNavIsOpen","handleClickCategory","e","target","innerText","dataByCategory1","filter","pro","c_prod_cate","applyFilter","dataByCategory2","dataByCategory3","handleChangePriceFilter","dataset","pfilter","handelClickFlavor","newData","map","v","mtlid","mtl_id","selected","handelChangeSpecCategory","cleanFilter","resetMtls","m","removeTag","tagtype","newCData","mtl_name","tagname","changedTagName","newTData","isClose","isCategory","filteredData","length","data","c_prod_ch_name","includes","minPrice","maxPrice","flavor","mtl","specTag","showTags","prod","c_prod_spe_value","c_prod_value","checkTag","c_prod_special_tag","toLowerCase","c_prod_material_arr","split","push","tagName","type","forEach","showTagName","Math","ceil","slice","handleChangeSearch","changePageArrow","canchange","page","changePage","applyPage","show","setShow","handleClose","handleShow","addToCart","id","isLogin","localStorage","getItem","addProd","find","p","pid","res","fetch","ADD_CART","method","headers","body","JSON","stringify","mid","count","print","then","json","d","handleCartShow","handleLikeShow","initProdBuyCount","prodCount","pname","c_prod_print_time","changeCountByType","changeCountByMinus","changeCountByAdd","saveHistory","newHistory","setItem","fetchData","prodRes","GET_INIT_PRODS","prodObj","prods","rows","mtlRes","GET_INIT_MTLS","mtlObj","mtls","initData","showStyle","showStyleInlne","hiddenStyle","flavorTagNoClick","color","backgroundColor","flavorTagClicked","pageNoSelected","border","pageSelected","searchBarHandler","transform","likeShow","setLikeShow","handleLikeClose","likeModel","margin","cartShow","setCartShow","handleCartClose","cartModel","width","textDecoration","i","buyCount","c_prod_img_path","c_prod_group_tag","c_prod_en_name","Array","fill","right","require"],"mappings":"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","sourcesContent":["import { Header, Title, AsideLeft, Footer } from '../layout/Layout';\r\nimport AsideRight from './AsideRight'; //右邊layout多了歷史查詢功能，因此拉出來自製\r\nimport './index.scss';\r\nimport { ReactComponent as Cart } from '../../imgs/tags/add_cart.svg';\r\nimport { ReactComponent as OrangeTag } from '../../imgs/tags/Rectangle_orange.svg';\r\nimport { ReactComponent as SearchBtn } from '../../imgs/search.svg';\r\nimport { ReactComponent as FilterBtn } from '../../imgs/filter-icon.svg';\r\nimport { IoIosArrowDown as DownArrow } from 'react-icons/io';\r\nimport { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport config from '../../Config';\r\nimport NavPage from '../layout/components/NavPage'; //加入漢堡選單\r\nimport { getCartCount } from '../../utils';\r\nimport { Button, Modal } from 'react-bootstrap';\r\n\r\nfunction Index(props) {\r\n  const [allData, setAllData] = useState([]);\r\n  const [isOpenFilter, setIsOpenFilter] = useState(false); //是否開啟篩選器選單\r\n  const [isOpenMainContent, setIsOpenMainContent] = useState(true); //是否開啟主要商品列表\r\n  const [currentPage, setCurrentPage] = useState(1); //當前分頁\r\n  const [totalPage, setTotalPage] = useState(0); //總分頁數\r\n  const [category, setCategory] = useState('sushi'); //商品分類\r\n  const [prodList, setProdList] = useState([]); //依分類呈現商品資料\r\n  const [tagShow, setTagShow] = useState([]); //商品列表上方的分類標籤\r\n  const [materials, setMaterials] = useState([]); //材料\r\n  const [priceFilter, setPriceFilter] = useState(['', '']); //依金額搜尋([最小金額, 最大金額])\r\n  const [specialCategoryFilter, setSpecialCategoryFilter] = useState([\r\n    { tag: 'new', value: false },\r\n    { tag: 'hot', value: false },\r\n    { tag: 'sale', value: false },\r\n  ]); //依特殊標籤搜尋\r\n  const [filterData, setFilterData] = useState([]); //套用篩選條件後的商品列表\r\n  const [buyProdCount, setBuyProdCount] = useState([]); //紀錄每個商品購買的數量[{pid, pname, count}]\r\n  const [search, setSearch] = useState(false); //是否開啟搜尋框\r\n  const [searchText, setSearchText] = useState('');\r\n  const [cartCount, setCartCount] = useState(0);\r\n  const pageProdCount = 6; //一頁呈現的商品個數\r\n  //加入NAVBar漢堡選單開關\r\n  const showBlock = { display: 'block' };\r\n  const hiddenBlock = { display: 'none' };\r\n  const { navIsOpen, setNavIsOpen } = props; // 解構NAVBAR\r\n\r\n  //處理點擊分類商品(SUSHI、DESSERT、PACKAGE)\r\n  const handleClickCategory = e => {\r\n    switch (e.target.innerText) {\r\n      case 'SUSHI':\r\n        const dataByCategory1 = allData.filter(\r\n          pro => pro.c_prod_cate === 'sushi'\r\n        );\r\n        // setProdList(allData.filter(pro => pro.c_prod_cate === 'sushi'));\r\n        setProdList(dataByCategory1);\r\n        setCategory('sushi');\r\n        applyFilter(false, dataByCategory1);\r\n        break;\r\n      case 'DESSERT':\r\n        const dataByCategory2 = allData.filter(\r\n          pro => pro.c_prod_cate === 'dessert'\r\n        );\r\n        // setProdList(allData.filter(pro => pro.c_prod_cate === 'dessert'));\r\n        setProdList(dataByCategory2);\r\n        setCategory('dessert');\r\n        applyFilter(false, dataByCategory2);\r\n        break;\r\n      case 'PACKAGE':\r\n        const dataByCategory3 = allData.filter(\r\n          pro => pro.c_prod_cate === 'package'\r\n        );\r\n        // setProdList(allData.filter(pro => pro.c_prod_cate === 'package'));\r\n        setProdList(dataByCategory3);\r\n        setCategory('package');\r\n        applyFilter(false, dataByCategory3);\r\n        break;\r\n      default:\r\n        setProdList(allData.filter(pro => pro.c_prod_cate === 'sushi'));\r\n        setCategory('sushi');\r\n        applyFilter();\r\n    }\r\n  };\r\n\r\n  //控制依金額篩選的輸入欄\r\n  const handleChangePriceFilter = e => {\r\n    if (e.target.dataset.pfilter === 'min') {\r\n      setPriceFilter([e.target.value, priceFilter[1]]);\r\n    } else if (e.target.dataset.pfilter === 'max') {\r\n      setPriceFilter([priceFilter[0], e.target.value]);\r\n    }\r\n  };\r\n\r\n  //處理點擊材料篩選\r\n  const handelClickFlavor = e => {\r\n    const newData = materials.map(v => {\r\n      //將原有的材料id與被點擊的材料id做比對\r\n      if (+e.target.dataset.mtlid === v.mtl_id) {\r\n        return { ...v, selected: !v.selected };\r\n      } else {\r\n        return v;\r\n      }\r\n    });\r\n    setMaterials(newData);\r\n  };\r\n\r\n  //處理點擊特殊標籤篩選\r\n  const handelChangeSpecCategory = e => {\r\n    const newData = specialCategoryFilter.map(v => {\r\n      if (e.target.dataset.tag === v.tag) {\r\n        return { ...v, value: !v.value };\r\n      } else {\r\n        return v;\r\n      }\r\n    });\r\n    setSpecialCategoryFilter(newData);\r\n  };\r\n\r\n  //重設篩選條件\r\n  const cleanFilter = e => {\r\n    const resetMtls = materials.map(m => {\r\n      return { ...m, selected: false };\r\n    });\r\n    setPriceFilter(['', '']);\r\n    setMaterials(resetMtls);\r\n    setSpecialCategoryFilter([\r\n      { tag: 'new', value: false },\r\n      { tag: 'hot', value: false },\r\n      { tag: 'sale', value: false },\r\n    ]);\r\n  };\r\n\r\n  //移除商品列表上方的tag\r\n  const removeTag = e => {\r\n    switch (e.target.dataset.tagtype) {\r\n      //移除價格標籤\r\n      case 'p':\r\n        setPriceFilter(['', '']);\r\n        break;\r\n      //移除材料標籤\r\n      case 'c':\r\n        const newCData = materials.map(v => {\r\n          if (v.mtl_name === e.target.dataset.tagname) {\r\n            return { ...v, selected: false }; //把要取消的材料改為false\r\n          } else {\r\n            return v;\r\n          }\r\n        });\r\n        setMaterials(newCData);\r\n        break;\r\n      //移除特殊標籤\r\n      case 't':\r\n        let changedTagName = '';\r\n        if (e.target.dataset.tagname === '新品') {\r\n          changedTagName = 'new';\r\n        } else if (e.target.dataset.tagname === '熱門') {\r\n          changedTagName = 'hot';\r\n        } else if (e.target.dataset.tagname === '特價') {\r\n          changedTagName = 'sale';\r\n        }\r\n        const newTData = specialCategoryFilter.map(v => {\r\n          if (v.tag === changedTagName) {\r\n            return { ...v, value: false }; //把要取消的特殊標籤改為false\r\n          } else {\r\n            return v;\r\n          }\r\n        });\r\n        setSpecialCategoryFilter(newTData);\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  //套用篩選條件\r\n  const applyFilter = (isClose = false, isCategory = []) => {\r\n    //如果要套用篩選條件後關掉篩選視窗，則isClose要傳true\r\n    //如果要直接套用上方三分類(SUSHI、DESSERT、PACKAGE)的資料，可以直接傳進來\r\n    let filteredData = [];\r\n    if (isCategory.length > 0) {\r\n      filteredData = isCategory;\r\n    } else {\r\n      filteredData = allData.filter(pro => pro.c_prod_cate === category);\r\n    }\r\n\r\n    if (searchText !== '') {\r\n      filteredData = filteredData.filter(data =>\r\n        data.c_prod_ch_name.includes(searchText)\r\n      );\r\n    }\r\n\r\n    //最小金額\r\n    const minPrice = priceFilter[0] === '' ? 0 : +priceFilter[0];\r\n    //最大金額\r\n    const maxPrice = priceFilter[1] === '' ? 9999 : +priceFilter[1]; //沒填最大金額時搜尋9999\r\n    //口味選擇(被選中材料的id陣列)\r\n    const flavor = materials.filter(mtl => mtl.selected).map(mtl => mtl.mtl_id);\r\n    //特殊標籤選擇('new'、'hot'、'sale')\r\n    const specTag = specialCategoryFilter\r\n      .filter(tag => tag.value)\r\n      .map(tag => tag.tag);\r\n    const showTags = [];\r\n\r\n    //套用篩選金額範圍\r\n    filteredData = filteredData.filter(prod => {\r\n      if (prod.c_prod_spe_value === 0) {\r\n        //當商品沒有特價時，用原價來篩選\r\n        return prod.c_prod_value >= minPrice && prod.c_prod_value <= maxPrice;\r\n      } else {\r\n        //當商品有特價時，用特價來篩選\r\n        return (\r\n          prod.c_prod_spe_value >= minPrice && prod.c_prod_spe_value <= maxPrice\r\n        );\r\n      }\r\n    });\r\n\r\n    //套用篩選特殊標籤\r\n    if (specTag.length > 0) {\r\n      //specTag.length = 0(沒有選擇任何特殊標籤)時視為全選，不做任何過濾條件\r\n      filteredData = filteredData.filter(prod => {\r\n        let checkTag = '';\r\n        //c_prod_special_tag對照(XX%OFF轉為sale、HOT轉為hot、NEW轉為new)\r\n        if (prod.c_prod_special_tag.includes('OFF')) {\r\n          checkTag = 'sale';\r\n        } else if (prod.c_prod_special_tag !== '') {\r\n          checkTag = prod.c_prod_special_tag.toLowerCase();\r\n        }\r\n\r\n        if (specTag.includes(checkTag)) return true;\r\n      });\r\n    }\r\n    //套用篩選口味\r\n    if (flavor.length > 0) {\r\n      //當flavor.length = 0(沒有選擇任何材料)時視為全選，不做任何過濾條件\r\n      filteredData = filteredData.filter(prod => {\r\n        for (const m of prod.c_prod_material_arr.split(',')) {\r\n          if (flavor.includes(+m)) return true;\r\n        }\r\n      });\r\n    }\r\n    //處理商品列表上方的篩選標籤\r\n    //[{tagName: '鮭魚', type: 'c'}, {tagName: '20~50', type: 'p'}, {tagName: '特價', type: 't'}]\r\n    //金額標籤\r\n    if (priceFilter[0] !== '' || priceFilter[1] !== '') {\r\n      //若兩個金額都沒填寫則不處理\r\n      showTags.push({\r\n        tagName: `${priceFilter[0] === '' ? '0' : priceFilter[0]}~${\r\n          priceFilter[1] === '' ? 'max' : priceFilter[1]\r\n        }`,\r\n        type: 'p',\r\n      });\r\n    }\r\n    //口味標籤\r\n    materials.forEach(v => {\r\n      if (v.selected) showTags.push({ tagName: v.mtl_name, type: 'c' });\r\n    });\r\n    //特殊標籤\r\n    specialCategoryFilter.forEach(v => {\r\n      if (v.value) {\r\n        let showTagName = '';\r\n        switch (v.tag) {\r\n          case 'new':\r\n            showTagName = '新品';\r\n            break;\r\n          case 'hot':\r\n            showTagName = '熱門';\r\n            break;\r\n          case 'sale':\r\n            showTagName = '特價';\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        showTags.push({ tagName: showTagName, type: 't' });\r\n      }\r\n    });\r\n\r\n    if (isClose) setIsOpenFilter(false);\r\n\r\n    setTagShow(showTags);\r\n    setFilterData(filteredData);\r\n    setTotalPage(Math.ceil(filteredData.length / 6));\r\n\r\n    //取當頁所呈現的商品列表\r\n    if (isCategory.length > 0) {\r\n      //若是點選上方三大分類，則分頁從1開始\r\n      setProdList(filteredData.slice(0, pageProdCount));\r\n      setCurrentPage(1);\r\n    } else {\r\n      setProdList(\r\n        filteredData.slice(\r\n          (currentPage - 1) * pageProdCount,\r\n          currentPage * pageProdCount\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  //處理搜尋框輸入\r\n  const handleChangeSearch = e => {\r\n    setSearchText(e.target.value);\r\n  };\r\n\r\n  //點擊商品分頁的箭頭按鈕\r\n  const changePageArrow = e => {\r\n    if (e.target.dataset.canchange === 'true') {\r\n      //上下頁數在合理範圍時才會換頁\r\n      setCurrentPage(+e.target.dataset.page);\r\n    }\r\n  };\r\n\r\n  //處理換頁\r\n  const changePage = e => {\r\n    setCurrentPage(+e.target.dataset.page);\r\n  };\r\n\r\n  const applyPage = () => {\r\n    setProdList(\r\n      prodList.slice(\r\n        (currentPage - 1) * pageProdCount,\r\n        currentPage * pageProdCount\r\n      )\r\n    ); //取當頁所呈現的商品列表\r\n  };\r\n\r\n  // 加入購物車光箱\r\n  const [show, setShow] = useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  //加入購物車\r\n  const addToCart = id => {\r\n    const isLogin = localStorage.getItem('mem_id') !== null; //判斷是否登入\r\n    if (isLogin) {\r\n      const addProd = buyProdCount.find(p => p.pid === +id);\r\n      const res = fetch(config.ADD_CART, {\r\n        method: 'POST',\r\n        headers: {\r\n          'content-type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          mid: +localStorage.getItem('mem_id'),\r\n          pid: addProd.pid,\r\n          count: addProd.count,\r\n          value: addProd.value,\r\n          print: addProd.print,\r\n          category: 'cs',\r\n        }),\r\n      })\r\n        .then(res => res.json())\r\n        .then(d => {\r\n          //加入購物車後重新設定購物車的商品數量\r\n          getCartCount(+localStorage.getItem('mem_id'));\r\n        });\r\n      handleCartShow();\r\n    } else {\r\n      handleLikeShow();\r\n    }\r\n  };\r\n\r\n  //初始化所有商品的購買數量(皆為1)\r\n  const initProdBuyCount = prodList => {\r\n    const prodCount = [];\r\n    prodList.forEach(prod => {\r\n      prodCount.push({\r\n        pid: prod.pid,\r\n        pname: prod.c_prod_ch_name,\r\n        print: prod.c_prod_print_time,\r\n        value:\r\n          +prod.c_prod_spe_value === 0\r\n            ? prod.c_prod_value\r\n            : prod.c_prod_spe_value,\r\n        count: 1,\r\n      });\r\n    });\r\n    setBuyProdCount(prodCount);\r\n  };\r\n\r\n  //輸入商品數量\r\n  const changeCountByType = (count, pid) => {\r\n    //商品數量不能小於0或是大於99\r\n    if (count <= 0 || count > 99) {\r\n      return false;\r\n    }\r\n\r\n    const newData = buyProdCount.map(p => {\r\n      if (p.pid === +pid) {\r\n        return { ...p, count: count };\r\n      } else {\r\n        return p;\r\n      }\r\n    });\r\n\r\n    setBuyProdCount(newData);\r\n  };\r\n\r\n  //點擊商品減少按鈕(-1)\r\n  const changeCountByMinus = pid => {\r\n    const newData = buyProdCount.map(p => {\r\n      if (p.pid === +pid) {\r\n        //商品數量若小於等於1，則不能再減少數量(需大於0)\r\n        if (p.count <= 1) {\r\n          return { ...p, count: p.count };\r\n        }\r\n        return { ...p, count: p.count - 1 };\r\n      } else {\r\n        return p;\r\n      }\r\n    });\r\n\r\n    setBuyProdCount(newData);\r\n  };\r\n\r\n  //點擊商品增加按鈕(+1)\r\n  const changeCountByAdd = pid => {\r\n    const newData = buyProdCount.map(p => {\r\n      if (p.pid === +pid) {\r\n        //商品數量若大於等於99，則不能再增加數量\r\n        if (p.count >= 99) {\r\n          return { ...p, count: p.count };\r\n        }\r\n        return { ...p, count: p.count + 1 };\r\n      } else {\r\n        return p;\r\n      }\r\n    });\r\n\r\n    setBuyProdCount(newData);\r\n  };\r\n\r\n  //每次點擊商品詳細頁，都要將pid存到localstorage以供歷史查詢\r\n  const saveHistory = pid => {\r\n    let newHistory = localStorage.getItem('history') ?? '';\r\n    newHistory += pid + '-';\r\n    localStorage.setItem('history', newHistory);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      //取得所有商品資料\r\n      const prodRes = await fetch(config.GET_INIT_PRODS);\r\n      const prodObj = await prodRes.json();\r\n      const prods = prodObj.rows; //data.data\r\n      setAllData(prods);\r\n\r\n      //取得所有食材資料\r\n      const mtlRes = await fetch(config.GET_INIT_MTLS);\r\n      const mtlObj = await mtlRes.json();\r\n      const mtls = mtlObj.rows;\r\n\r\n      const initData = prods.filter(pro => pro.c_prod_cate === 'sushi');\r\n      //預設呈現的商品類型為壽司\r\n      setProdList(initData);\r\n      //初始化所有材料\r\n      setMaterials(mtls);\r\n      //初始化總分頁數\r\n      setTotalPage(Math.ceil(initData.length / 6));\r\n      //初始化商品購買數量\r\n      initProdBuyCount(prods);\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    applyFilter(); //當篩選條件其中一個有改變或是點其它分頁，就重新渲染商品列表\r\n  }, [materials, priceFilter, specialCategoryFilter, searchText, currentPage]);\r\n\r\n  const showStyle = { display: 'block' };\r\n  const showStyleInlne = { display: 'inline' };\r\n  const hiddenStyle = { display: 'none' };\r\n  const flavorTagNoClick = { color: '#b03342', backgroundColor: 'transparent' };\r\n  const flavorTagClicked = { color: '#ffffff', backgroundColor: '#b03342' };\r\n  const pageNoSelected = { border: '1px solid #575757', color: '#575757' };\r\n  const pageSelected = { border: '1px solid #B03342', color: '#B03342' };\r\n  const searchBarHandler = () =>\r\n    search\r\n      ? { transform: 'translateX(0px)' }\r\n      : { transform: 'translateX(280px)' };\r\n\r\n  //請先登入的光箱\r\n  const [likeShow, setLikeShow] = useState(false);\r\n  const handleLikeClose = () => setLikeShow(false);\r\n  const handleLikeShow = () => setLikeShow(true);\r\n  const likeModel = (\r\n    <Modal show={likeShow} onHide={handleLikeClose}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title className=\"en-cont-30 m-3\">提醒</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body style={{ margin: '0 3%' }}>\r\n        <div className=\"en-cont-14 pb-2\">請先登入後才能操作</div>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button\r\n          variant=\"secondary\"\r\n          className=\"btn btn-sm btn-primary primeal-btn-sm mx-5 m-3\"\r\n          onClick={handleLikeClose}\r\n        >\r\n          關閉\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n\r\n  //加入購物車的光箱\r\n  const [cartShow, setCartShow] = useState(false);\r\n  const handleCartClose = () => setCartShow(false);\r\n  const handleCartShow = () => setCartShow(true);\r\n  const cartModel = (\r\n    <Modal show={cartShow} onHide={handleCartClose}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title className=\"en-cont-30 m-3\">提醒</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body style={{ margin: '0 3%' }}>\r\n        <div className=\"en-cont-14 pb-2\">已成功將商品加入購物車!</div>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button\r\n          variant=\"secondary\"\r\n          className=\"btn btn-sm btn-primary primeal-btn-sm mx-5 m-3\"\r\n          onClick={handleCartClose}\r\n        >\r\n          關閉\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {likeModel}\r\n      {cartModel}\r\n      <Header />\r\n      {navIsOpen && (\r\n        <NavPage navIsOpen={navIsOpen} setNavIsOpen={setNavIsOpen} />\r\n      )}\r\n      <div style={navIsOpen ? hiddenBlock : showBlock}>\r\n        <div style={{ display: 'flex' }}>\r\n          <AsideLeft />\r\n          <div style={{ width: '100%' }}>\r\n            <Title title={'Classic'} setNavIsOpen={setNavIsOpen} />\r\n\r\n            {/* 麵包屑 */}\r\n            <p className=\"en-title-14-10 bread\">\r\n              <Link\r\n                to={'/'}\r\n                style={{ textDecoration: 'none', color: '#575757' }}\r\n              >\r\n                HOME /\r\n              </Link>\r\n              <Link\r\n                to={'/classic'}\r\n                style={{ textDecoration: 'none', color: '#b03342' }}\r\n              >\r\n                 &nbsp;CLASSIC\r\n              </Link>\r\n            </p>\r\n            <div className=\"classic min-hi\">\r\n              <div className=\"search-filter\">\r\n                <div className=\"search-btn d-flex\">\r\n                  <div className=\"search-input d-flex justify-content-end align-items-center\">\r\n                    <input\r\n                      type=\"text\"\r\n                      style={searchBarHandler()}\r\n                      className=\"search-input-bar ch-cont-14\"\r\n                      value={searchText}\r\n                      onChange={handleChangeSearch}\r\n                      placeholder=\"Search\"\r\n                    ></input>\r\n                  </div>\r\n                  <div className=\"classic-search-btn\">\r\n                    <SearchBtn onClick={() => setSearch(!search)} />\r\n                  </div>\r\n                </div>\r\n                <div\r\n                  className=\"filter-btn classic-filter-btn\"\r\n                  onClick={() => {\r\n                    setIsOpenFilter(!isOpenFilter);\r\n                  }}\r\n                >\r\n                  <FilterBtn />\r\n                </div>\r\n              </div>\r\n\r\n              {/* 商品呈現區 */}\r\n              <div\r\n                className=\"main-content\"\r\n                style={isOpenMainContent ? showStyle : hiddenStyle}\r\n              >\r\n                {/* category tag */}\r\n                <div className=\"category-box\">\r\n                  <div className=\"en-category\" onClick={handleClickCategory}>\r\n                    <div\r\n                      className=\"cate-orange-tag-img\"\r\n                      style={\r\n                        category === 'sushi' ? showStyleInlne : hiddenStyle\r\n                      }\r\n                    ></div>\r\n                    <div className=\"en-category\">SUSHI</div>\r\n                  </div>\r\n                  <div className=\"en-category\" onClick={handleClickCategory}>\r\n                    <div\r\n                      className=\"cate-orange-tag-img\"\r\n                      style={\r\n                        category === 'dessert' ? showStyleInlne : hiddenStyle\r\n                      }\r\n                    ></div>\r\n                    <div className=\"en-category\">DESSERT</div>\r\n                  </div>\r\n                  <div className=\"en-category\" onClick={handleClickCategory}>\r\n                    <div\r\n                      className=\"cate-orange-tag-img\"\r\n                      style={\r\n                        category === 'package' ? showStyleInlne : hiddenStyle\r\n                      }\r\n                    ></div>\r\n                    <div className=\"en-category\">PACKAGE</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* filter tag */}\r\n                <div className=\"filter-tag-box\">\r\n                  {tagShow.map((tag, i) => {\r\n                    return (\r\n                      <>\r\n                        <div className=\"filter-tag ch-cont-16\" key={i}>\r\n                          {tag.tagName}{' '}\r\n                          <span\r\n                            data-tagType={tag.type}\r\n                            data-tagName={tag.tagName}\r\n                            onClick={removeTag}\r\n                          >\r\n                            &nbsp;X\r\n                          </span>\r\n                        </div>\r\n                      </>\r\n                    );\r\n                  })}\r\n\r\n                  {/* <div className=\"filter-tag ch-cont-16\">\r\n                  鮭魚 <span>&nbsp;X</span>\r\n                </div>\r\n                <div className=\"filter-tag ch-cont-16\">\r\n                  200~500 <span>&nbsp;X</span>\r\n                </div> */}\r\n                </div>\r\n\r\n                {prodList.length === 0 ? (\r\n                  <div className=\"no-result\">\r\n                    {' '}\r\n                    {/* no product data */}\r\n                    <div className=\"search-btn ch-title-22\">\r\n                      <SearchBtn />\r\n                      <span>查無符合條件的商品，請重新篩選或清空篩選條件</span>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"prod-list\">\r\n                    {' '}\r\n                    {/* product list */}\r\n                    {/* product card */}\r\n                    {prodList.map(prod => {\r\n                      const pid = prod.pid;\r\n                      {\r\n                        /* let buyCount = +buyProdCount.filter(p => p.pid === pid)[0].count; */\r\n                      }\r\n                      let buyCount = buyProdCount.filter(p => p.pid === pid);\r\n                      buyCount = +buyCount[0]?.count ?? 0;\r\n\r\n                      return (\r\n                        <>\r\n                          <div className=\"prod-card\" key={pid}>\r\n                            <Link\r\n                              to={`/classic/detail/${prod.pid}`}\r\n                              style={{\r\n                                textDecoration: 'none',\r\n                                color: '#212121',\r\n                              }}\r\n                              onClick={() => {\r\n                                saveHistory(pid);\r\n                              }}\r\n                            >\r\n                              {' '}\r\n                              {/* 點擊圖片可連到商品詳細頁 */}\r\n                              <div className=\"prod-img-box\">\r\n                                {/* 判斷有無特殊tag(xx%off、HOT、NEW) */}\r\n                                {prod.c_prod_special_tag === '' ? (\r\n                                  ''\r\n                                ) : (\r\n                                  <div className=\"discount-tag\">\r\n                                    <div className=\"discount-tag-content\">\r\n                                      {prod.c_prod_special_tag}\r\n                                    </div>\r\n                                  </div>\r\n                                )}\r\n\r\n                                <img\r\n                                  // src={require('./../../imgs/temp/classic-pro1.png')}\r\n                                  src={`http://localhost:3500${prod.c_prod_img_path}`}\r\n                                  alt=\"product\"\r\n                                />\r\n                              </div>\r\n                              <div className=\"content\">\r\n                                <div className=\"intr-text ch-cont-14\">\r\n                                  {prod.c_prod_group_tag}\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"prod-name-ch ch-title-22\">\r\n                                {prod.c_prod_ch_name}\r\n                              </div>\r\n                              <div className=\"prod-name-en en-title-14-5\">\r\n                                {prod.c_prod_en_name}\r\n                              </div>\r\n                            </Link>\r\n\r\n                            {/* 判斷是否有特價 */}\r\n                            {prod.c_prod_spe_value === 0 ? (\r\n                              <div className=\"prod-price-no-discount\">\r\n                                <div className=\"no-discount ch-cont-16\">\r\n                                  NT_{prod.c_prod_value}\r\n                                </div>\r\n                              </div>\r\n                            ) : (\r\n                              <div className=\"prod-price-special\">\r\n                                <div className=\"original-price ch-cont-16\">\r\n                                  NT_{prod.c_prod_value}\r\n                                </div>\r\n                                <div className=\"special-price ch-cont-18\">\r\n                                  NT_{prod.c_prod_spe_value}\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n\r\n                            <div className=\"select-add-cart\">\r\n                              <div className=\"select-count\">\r\n                                <button onClick={e => changeCountByMinus(pid)}>\r\n                                  -\r\n                                </button>\r\n                                <input\r\n                                  type=\"number\"\r\n                                  value={buyCount}\r\n                                  onChange={e =>\r\n                                    changeCountByType(+e.target.value, pid)\r\n                                  }\r\n                                />\r\n                                <button onClick={e => changeCountByAdd(pid)}>\r\n                                  +\r\n                                </button>\r\n                              </div>\r\n\r\n                              <div\r\n                                className=\"cart-btn\"\r\n                                onClick={() => {\r\n                                  addToCart(pid);\r\n                                }}\r\n                              >\r\n                                <Cart onClick={handleShow} />\r\n                              </div>\r\n\r\n                              <button\r\n                                className=\"add-cart btn-sm btn-primary primeal-btn\"\r\n                                onClick={() => {\r\n                                  addToCart(pid);\r\n                                }}\r\n                              >\r\n                                加入購物車\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        </>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                )}\r\n\r\n                {/* pagination */}\r\n                {/* 當總商品數量大於一頁的商品數量時才會有分頁按鈕可按 */}\r\n                {filterData.length > pageProdCount ? (\r\n                  <div className=\"pagination-box\">\r\n                    <ul className=\"pagination ch-cont-16\">\r\n                      <li>\r\n                        {' '}\r\n                        {/* 上一頁按鈕 */}\r\n                        <div\r\n                          className=\"page-prev\"\r\n                          data-page={currentPage - 1}\r\n                          onClick={changePageArrow}\r\n                          data-canChange={currentPage - 1 >= 1 ? true : false}\r\n                        >\r\n                          &lt;\r\n                        </div>\r\n                      </li>\r\n                      {Array(totalPage)\r\n                        .fill(1)\r\n                        .map((v, i) => {\r\n                          return (\r\n                            <>\r\n                              <li key={i}>\r\n                                {' '}\r\n                                {/* 各分頁按鈕 */}\r\n                                <div\r\n                                  className=\"page-number\"\r\n                                  data-page={i + 1}\r\n                                  onClick={changePage}\r\n                                  style={\r\n                                    currentPage === i + 1\r\n                                      ? pageSelected\r\n                                      : pageNoSelected\r\n                                  }\r\n                                >\r\n                                  {i + 1}\r\n                                </div>\r\n                              </li>\r\n                            </>\r\n                          );\r\n                        })}\r\n\r\n                      {/* <li>\r\n                    <div className=\"page-number\">1</div>\r\n                  </li>\r\n                  <li>\r\n                    <div className=\"page-number selected\">2</div>\r\n                  </li>\r\n                  <li>\r\n                    <div className=\"page-number\">3</div>\r\n                  </li>\r\n                  <li> */}\r\n\r\n                      <li>\r\n                        {' '}\r\n                        {/* 下一頁按鈕 */}\r\n                        <div\r\n                          className=\"page-next\"\r\n                          data-page={currentPage + 1}\r\n                          data-canChange={\r\n                            currentPage + 1 <= totalPage ? true : false\r\n                          }\r\n                          onClick={changePageArrow}\r\n                        >\r\n                          &gt;\r\n                        </div>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                ) : (\r\n                  ''\r\n                )}\r\n              </div>\r\n\r\n              {/* 主要篩選條件區 */}\r\n              <div\r\n                className=\"prod-filter-sh\"\r\n                style={isOpenFilter ? { right: '12.5%' } : { right: '-100%' }}\r\n                onTransitionEnd={() => {\r\n                  setIsOpenMainContent(isOpenFilter ? false : true);\r\n                }}\r\n              >\r\n                {/* clean or cancel filter */}\r\n                <div className=\"d-flex flex-column\">\r\n                  <div className=\"filter-top justify-content-end\">\r\n                    <div\r\n                      className=\"clean-filter ch-cont-16\"\r\n                      onClick={cleanFilter}\r\n                    >\r\n                      <img\r\n                        src={require('./../../imgs/tags/trash.png')}\r\n                        alt=\"trash\"\r\n                      />\r\n                      <span>清空條件</span>\r\n                    </div>\r\n                    {/* <div className=\"cancel-filter ch-cont-16\">\r\n                    <span>X</span>\r\n                  </div> */}\r\n                  </div>\r\n\r\n                  {/* by price */}\r\n                  <div className=\"d-flex justify-content-center mobile-filter-title\">\r\n                    <div className=\"by-price col-18 d-flex flex-column\">\r\n                      <div className=\"by-price-title\">\r\n                        <div className=\"orange-tag\">\r\n                          <OrangeTag className=\"tag-img\" />\r\n                        </div>\r\n                        <div className=\"by-price-text en-title-big\">\r\n                          By PRICE\r\n                        </div>\r\n                        <div className=\"down-arrow\">\r\n                          <DownArrow size={22} color=\"gray\" />\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"by-price-input justify-content-between\">\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"最小金額\"\r\n                          data-pFilter=\"min\"\r\n                          value={priceFilter[0]}\r\n                          onChange={handleChangePriceFilter}\r\n                        />\r\n                        <div className=\"by-price-dash-line\"></div>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"最大金額\"\r\n                          data-pFilter=\"max\"\r\n                          value={priceFilter[1]}\r\n                          onChange={handleChangePriceFilter}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* by flavor */}\r\n                  <div className=\"d-flex justify-content-center mobile-filter-title\">\r\n                    <div className=\"by-flavor col-18 d-flex flex-column\">\r\n                      <div className=\"by-flavor-title\">\r\n                        <div className=\"orange-tag\">\r\n                          <OrangeTag className=\"tag-img\" />\r\n                        </div>\r\n                        <div className=\"by-price-text en-title-big\">\r\n                          By FLAVOR\r\n                        </div>\r\n                        <div className=\"down-arrow\">\r\n                          <DownArrow size={22} color=\"gray\" />\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flavor-tag-box\">\r\n                        {materials.map(mtl => {\r\n                          return (\r\n                            <>\r\n                              <div\r\n                                key={mtl.mtl_id}\r\n                                className=\"flavor-tag ch-title-16\"\r\n                                data-mtlid={mtl.mtl_id}\r\n                                style={\r\n                                  mtl.selected\r\n                                    ? flavorTagClicked\r\n                                    : flavorTagNoClick\r\n                                }\r\n                                onClick={handelClickFlavor}\r\n                              >\r\n                                {mtl.mtl_name}\r\n                              </div>\r\n                            </>\r\n                          );\r\n                        })}\r\n                        {/* <div className=\"flavor-tag ch-title-16\">牛肉</div>\r\n                  <div className=\"flavor-tag ch-title-16\">豬肉</div>\r\n                  <div className=\"flavor-tag ch-title-16\">火腿</div>\r\n                  <div className=\"flavor-tag ch-title-16\">起司</div>\r\n                  <div className=\"flavor-tag ch-title-16\">鮭魚卵</div>\r\n                  <div className=\"flavor-tag ch-title-16\">鮮蝦/蝦卵</div>\r\n                  <div className=\"flavor-tag ch-title-16\">干貝</div>\r\n                  <div className=\"flavor-tag ch-title-16\">明太子</div>\r\n                  <div className=\"flavor-tag ch-title-16\">番薯/馬鈴薯</div>\r\n                  <div className=\"flavor-tag ch-title-16\">麻糬</div>\r\n                  <div className=\"flavor-tag ch-title-16\">抹茶</div>\r\n                  <div className=\"flavor-tag ch-title-16\">羊羹/果凍</div> */}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* by category */}\r\n                  <div className=\"d-flex justify-content-center mobile-filter-title\">\r\n                    <div className=\"col-18 d-flex flex-column\">\r\n                      <div className=\"by-category\">\r\n                        <div className=\"orange-tag\">\r\n                          <OrangeTag className=\"tag-img\" />\r\n                        </div>\r\n                        <div className=\"by-price-text en-title-big\">\r\n                          By CATEGORY\r\n                        </div>\r\n                        <div className=\"down-arrow\">\r\n                          <DownArrow size={22} color=\"gray\" />\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"category-checkbox-box\">\r\n                        <input\r\n                          className=\"caterory-check\"\r\n                          type=\"checkbox\"\r\n                          id=\"new-item\"\r\n                          data-tag=\"new\"\r\n                          checked={specialCategoryFilter[0].value}\r\n                          onChange={handelChangeSpecCategory}\r\n                        />\r\n                        <div className=\"label-box\">\r\n                          <label className=\"ch-title-16\" for=\"new-item\">\r\n                            新品上市\r\n                          </label>\r\n                        </div>\r\n                        <input\r\n                          className=\"caterory-check\"\r\n                          type=\"checkbox\"\r\n                          id=\"hot-item\"\r\n                          data-tag=\"hot\"\r\n                          checked={specialCategoryFilter[1].value}\r\n                          onChange={handelChangeSpecCategory}\r\n                        />\r\n                        <div className=\"label-box\">\r\n                          <label className=\"ch-title-16\" for=\"hot-item\">\r\n                            熱門商品\r\n                          </label>\r\n                        </div>\r\n                        <input\r\n                          className=\"caterory-check\"\r\n                          type=\"checkbox\"\r\n                          id=\"for-sale\"\r\n                          data-tag=\"sale\"\r\n                          checked={specialCategoryFilter[2].value}\r\n                          onChange={handelChangeSpecCategory}\r\n                        />\r\n                        <div className=\"label-box\">\r\n                          <label className=\"ch-title-16\" for=\"for-sale\">\r\n                            促銷特價\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"d-flex justify-content-center\">\r\n                    <div className=\"col-18\">\r\n                      <div className=\"send-filter-btn-box d-flex justify-content-end\">\r\n                        <button\r\n                          className=\"btn-sm btn-primary primeal-btn-sm\"\r\n                          onClick={() => {\r\n                            applyFilter(true);\r\n                          }}\r\n                        >\r\n                          送出條件\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <Footer />\r\n          </div>\r\n          <AsideRight setNavIsOpen={setNavIsOpen} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Index;\r\n"]},"metadata":{},"sourceType":"module"}