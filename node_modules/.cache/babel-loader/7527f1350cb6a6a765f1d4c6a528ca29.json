{"ast":null,"code":"import config from './Config';\nconst TOKEN_NAME = 'token';\nconst MEM_ID = 'mem_id';\nconst BASE_URL = 'http://localhost:3500';\nexport const setAuthToken = token => {\n  localStorage.setItem(TOKEN_NAME, token);\n};\nexport const getAuthToken = () => {\n  return localStorage.getItem(TOKEN_NAME);\n};\nexport const setMemId = mem_id => {\n  return localStorage.setItem(MEM_ID, mem_id);\n}; //取memID\n\nexport const getMemId = () => {\n  return localStorage.getItem(MEM_ID);\n}; //取購物車資料\n\nexport const getCart = async () => {\n  const isLogin = localStorage.getItem(MEM_ID) !== null;\n\n  if (isLogin) {\n    //會員有登入\n    const res = await fetch(config.GET_CUR_CART + localStorage.getItem(MEM_ID));\n    const obj = await res.json();\n    return obj;\n  } else {\n    //會員無登入\n    return {\n      hasCurCart: false,\n      cartid: 0,\n      cartCount: 0\n    };\n  }\n}; //取購物車未結帳數量\n\nexport const getCartCount = async mem_id => {\n  await fetch(`${BASE_URL}/member/api/get-cart-count`, {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      mem_id\n    })\n  }).then(res => res.json()).then(obj => {\n    localStorage.setItem('cart_count', obj.cart_count);\n  });\n};","map":{"version":3,"sources":["C:/Users/ryany/OneDrive/桌面/primeal/src/utils.js"],"names":["config","TOKEN_NAME","MEM_ID","BASE_URL","setAuthToken","token","localStorage","setItem","getAuthToken","getItem","setMemId","mem_id","getMemId","getCart","isLogin","res","fetch","GET_CUR_CART","obj","json","hasCurCart","cartid","cartCount","getCartCount","method","headers","body","JSON","stringify","then","cart_count"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,UAAnB;AACA,MAAMC,UAAU,GAAG,OAAnB;AACA,MAAMC,MAAM,GAAG,QAAf;AACA,MAAMC,QAAQ,GAAG,uBAAjB;AAEA,OAAO,MAAMC,YAAY,GAAGC,KAAK,IAAI;AACnCC,EAAAA,YAAY,CAACC,OAAb,CAAqBN,UAArB,EAAiCI,KAAjC;AACD,CAFM;AAIP,OAAO,MAAMG,YAAY,GAAG,MAAM;AAChC,SAAOF,YAAY,CAACG,OAAb,CAAqBR,UAArB,CAAP;AACD,CAFM;AAIP,OAAO,MAAMS,QAAQ,GAAGC,MAAM,IAAI;AAChC,SAAOL,YAAY,CAACC,OAAb,CAAqBL,MAArB,EAA6BS,MAA7B,CAAP;AACD,CAFM,C,CAIP;;AACA,OAAO,MAAMC,QAAQ,GAAG,MAAM;AAC5B,SAAON,YAAY,CAACG,OAAb,CAAqBP,MAArB,CAAP;AACD,CAFM,C,CAIP;;AACA,OAAO,MAAMW,OAAO,GAAG,YAAY;AACjC,QAAMC,OAAO,GAAGR,YAAY,CAACG,OAAb,CAAqBP,MAArB,MAAiC,IAAjD;;AACA,MAAIY,OAAJ,EAAa;AACX;AACA,UAAMC,GAAG,GAAG,MAAMC,KAAK,CAAChB,MAAM,CAACiB,YAAP,GAAsBX,YAAY,CAACG,OAAb,CAAqBP,MAArB,CAAvB,CAAvB;AACA,UAAMgB,GAAG,GAAG,MAAMH,GAAG,CAACI,IAAJ,EAAlB;AACA,WAAOD,GAAP;AACD,GALD,MAKO;AACL;AACA,WAAO;AACLE,MAAAA,UAAU,EAAE,KADP;AAELC,MAAAA,MAAM,EAAE,CAFH;AAGLC,MAAAA,SAAS,EAAE;AAHN,KAAP;AAKD;AACF,CAfM,C,CAiBP;;AAEA,OAAO,MAAMC,YAAY,GAAG,MAAMZ,MAAN,IAAgB;AAC1C,QAAMK,KAAK,CAAE,GAAEb,QAAS,4BAAb,EAA0C;AACnDqB,IAAAA,MAAM,EAAE,MAD2C;AAEnDC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAF0C;AAKnDC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBjB,MAAAA;AADmB,KAAf;AAL6C,GAA1C,CAAL,CASHkB,IATG,CASEd,GAAG,IAAIA,GAAG,CAACI,IAAJ,EATT,EAUHU,IAVG,CAUEX,GAAG,IAAI;AACXZ,IAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCW,GAAG,CAACY,UAAvC;AACD,GAZG,CAAN;AAaD,CAdM","sourcesContent":["import config from './Config';\r\nconst TOKEN_NAME = 'token';\r\nconst MEM_ID = 'mem_id';\r\nconst BASE_URL = 'http://localhost:3500';\r\n\r\nexport const setAuthToken = token => {\r\n  localStorage.setItem(TOKEN_NAME, token);\r\n};\r\n\r\nexport const getAuthToken = () => {\r\n  return localStorage.getItem(TOKEN_NAME);\r\n};\r\n\r\nexport const setMemId = mem_id => {\r\n  return localStorage.setItem(MEM_ID, mem_id);\r\n};\r\n\r\n//取memID\r\nexport const getMemId = () => {\r\n  return localStorage.getItem(MEM_ID);\r\n};\r\n\r\n//取購物車資料\r\nexport const getCart = async () => {\r\n  const isLogin = localStorage.getItem(MEM_ID) !== null;\r\n  if (isLogin) {\r\n    //會員有登入\r\n    const res = await fetch(config.GET_CUR_CART + localStorage.getItem(MEM_ID));\r\n    const obj = await res.json();\r\n    return obj;\r\n  } else {\r\n    //會員無登入\r\n    return {\r\n      hasCurCart: false,\r\n      cartid: 0,\r\n      cartCount: 0,\r\n    };\r\n  }\r\n};\r\n\r\n//取購物車未結帳數量\r\n\r\nexport const getCartCount = async mem_id => {\r\n  await fetch(`${BASE_URL}/member/api/get-cart-count`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'content-type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      mem_id,\r\n    }),\r\n  })\r\n    .then(res => res.json())\r\n    .then(obj => {\r\n      localStorage.setItem('cart_count', obj.cart_count);\r\n    });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}