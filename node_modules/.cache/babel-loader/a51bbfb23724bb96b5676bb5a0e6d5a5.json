{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ryany\\\\OneDrive\\\\\\u684C\\u9762\\\\primeal\\\\src\\\\pages\\\\share\\\\ShareItems.js\",\n    _s = $RefreshSig$();\n\nimport { Header, Title, AsideLeft, AsideRight, Footer } from '../layout/Layout';\nimport styles from './Share.module.scss';\nimport { ReactComponent as Delete } from '../../imgs/delete-lg.svg';\nimport { ReactComponent as HeartOutline } from '../../imgs/heart-outline.svg';\nimport { ReactComponent as HeartFillWhite } from '../../imgs/heart-fill-white.svg';\nimport { ReactComponent as Info } from '../../imgs/information.svg';\nimport { ReactComponent as Message } from '../../imgs/message.svg';\nimport { ReactComponent as Edit } from '../../imgs/edit.svg';\nimport NavPage from '../layout/components/NavPage';\nimport ShareItemImgs from './components/ShareItemImgs';\nimport ItemDetailsInfo from './components/ItemDetailsInfo';\nimport ItemDetailsComments from './components/ItemDetailsComments';\nimport Masonry from './components/Masonry';\nimport useCurrentWidth from './hooks/useCurrentWidth';\nimport getCurrentColumns from './helpers/getCurrentColumns';\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useHistory, useLocation, Link } from 'react-router-dom';\nimport { Button, Modal } from 'react-bootstrap';\nimport config from '../../Config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ShareItems(props) {\n  _s();\n\n  const [msgbtn, setMsgbtn] = useState(false);\n  const [infobtn, setInfobtn] = useState(false);\n  const [msgdiv, setMsgdiv] = useState(false);\n  const [infodiv, setInfodiv] = useState(false);\n  const [itemDetails, setItemDetails] = useState([]); //data\n\n  const [filterItemsData, setFilterItemsData] = useState([]); //window handler\n\n  const currentWidth = useCurrentWidth(); //masonry\n\n  const [columns, setColumns] = useState(getCurrentColumns(currentWidth));\n  const [gap, setGap] = useState(4); // 加入購物車光箱\n\n  const [show, setShow] = useState(false);\n  const [isSubmit, setIsSubmit] = useState(false); //加入NAVBar漢堡選單開關\n\n  const showBlock = {\n    display: 'block'\n  };\n  const hiddenBlock = {\n    display: 'none'\n  };\n  const {\n    navIsOpen,\n    setNavIsOpen\n  } = props; // 解構NAVBAR\n  //Get member id\n\n  const memId = localStorage.getItem('mem_id');\n  const {\n    mem_id: memberId,\n    mem_nickname: postMemName,\n    mem_photo_img_path: postMemImg,\n    share_title: shareTitle,\n    share_desc: shareDesc,\n    saves_count: savesCount,\n    share_order_id: orderId,\n    orders_value: orderVal,\n    orders_print_time: orderPrint,\n    share_imgs: itemImgs = [],\n    share_comments: shareComments = [],\n    share_tags: shareTags = [],\n    isSaved\n  } = itemDetails;\n  const {\n    id\n  } = useParams(null);\n  let history = useHistory(null);\n  const location = useLocation(null);\n  const {\n    action = 'VIEW',\n    commentSid = ''\n  } = location.state || {};\n\n  const getItemDetails = async () => {\n    const response = await fetch(config.GET_PROD_DETAILS + `${id}/${memId}`, {\n      method: 'GET'\n    });\n    const itemsArr = await response.json();\n    return itemsArr;\n  };\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  const toggleHeartHandler = () => {\n    if (isSaved) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${styles['heart-beat-on']}`,\n        onClick: () => {\n          toggleSaveItem(id, 'REMOVE');\n          setItemDetails({ ...itemDetails,\n            isSaved: false,\n            saves_count: savesCount - 1\n          });\n        },\n        children: /*#__PURE__*/_jsxDEV(HeartFillWhite, {\n          style: {\n            padding: '0 12px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => {\n          toggleSaveItem(id, 'ADD');\n          setItemDetails({ ...itemDetails,\n            isSaved: true,\n            saves_count: savesCount + 1\n          });\n        },\n        children: /*#__PURE__*/_jsxDEV(HeartOutline, {\n          style: {\n            padding: '0 12px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this);\n    }\n  };\n\n  const toggleSaveItem = async (itemId, action) => {\n    try {\n      let method;\n\n      if (action === 'ADD') {\n        method = 'POST';\n      }\n\n      if (action === 'REMOVE') {\n        method = 'DELETE';\n      }\n\n      const response = await fetch(config.TOGGLE_SAVE, {\n        method: method,\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          itemId: itemId,\n          memberId: memId\n        })\n      });\n      if (!response.ok) throw new Error('Something went wrong!');\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  const editHandler = () => {\n    return +memberId === +memId ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${styles['button-default-lg']} d-flex align-items-center mr-3`,\n      onClick: () => history.push({\n        pathname: '/share/edit',\n        state: {\n          shareId: id,\n          action: 'UPDATE',\n          orderId,\n          shareTitle,\n          shareDesc,\n          itemImgs,\n          shareTags\n        }\n      }),\n      children: /*#__PURE__*/_jsxDEV(Edit, {\n        className: `mx-3`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this) : '';\n  };\n\n  const getShareItems = async () => {\n    const response = await fetch(config.GET_SHARE_PRODS, {\n      method: 'GET'\n    });\n    const itemsObj = await response.json();\n    return itemsObj;\n  };\n\n  const getFilterData = async () => {\n    try {\n      var _shareTags$map;\n\n      const response = await fetch(config.GET_FILTER_ITEMS, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          minPrice: '',\n          maxPrice: '',\n          tags: (_shareTags$map = shareTags.map(tag => tag.item_hash)) !== null && _shareTags$map !== void 0 ? _shareTags$map : [],\n          minTime: '',\n          maxTime: '',\n          search: ''\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Something went wrong!');\n      }\n\n      const itemsObj = await response.json();\n\n      if (itemsObj.data.length === 1) {\n        const result = await getShareItems();\n        return result;\n      }\n\n      return itemsObj;\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  const updateDimensions = () => {\n    setColumns(getCurrentColumns(currentWidth));\n    setGap(getCurrentColumns(currentWidth));\n  }; // Fetching data\n\n\n  useEffect(() => {\n    (async () => {\n      const result = await getItemDetails();\n      setItemDetails(result.data[0]);\n    })();\n\n    if (action === 'COMMENT') setMsgbtn(true);\n  }, []); // Fetching filterItem data\n\n  useEffect(() => {\n    (async () => {\n      const result = await getFilterData();\n      setFilterItemsData(result.data);\n    })();\n  }, [itemDetails]); // Update column with current Width\n\n  useEffect(() => {\n    updateDimensions();\n  }, [currentWidth]);\n\n  const btnMoveTemplate = () => {\n    return msgbtn || infobtn ? {\n      transform: 'translateX(80px)',\n      transition: 'transform 0.3s, opacity 0.2s',\n      opacity: 0\n    } : {\n      transform: 'translateX(0px)',\n      transition: 'transform 0.3s, opacity 0.2s',\n      opacity: 1\n    };\n  };\n\n  const modal = /*#__PURE__*/_jsxDEV(Modal, {\n    show: show,\n    onHide: handleClose,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        className: \"en-cont-30 m-3\",\n        children: \"\\u63D0\\u9192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      style: {\n        margin: '0 3%'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"en-cont-14 pb-2\",\n        children: isSubmit ? '留言已更改成功' : '您確定要放棄修改?'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        className: \"btn btn-sm btn-primary primeal-btn-sm mx-5 m-3\",\n        onClick: () => history.push({\n          pathname: '/share/post',\n          action: 'COMMENT'\n        }),\n        children: isSubmit ? 'Close' : '確定'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 254,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [modal, /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this), navIsOpen && /*#__PURE__*/_jsxDEV(NavPage, {\n      navIsOpen: navIsOpen,\n      setNavIsOpen: setNavIsOpen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: navIsOpen ? hiddenBlock : showBlock,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(AsideLeft, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            title: 'Share',\n            setNavIsOpen: setNavIsOpen\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `mycontainer ${styles['share-bread']}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"pt-3 pt-md-0\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"en-title-14-10 d-flex\",\n                      children: [/*#__PURE__*/_jsxDEV(Link, {\n                        to: '/',\n                        style: {\n                          textDecoration: 'none',\n                          color: '#575757'\n                        },\n                        children: \"HOME/\\xA0\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 297,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Link, {\n                        to: '/share',\n                        style: {\n                          textDecoration: 'none',\n                          color: '#575757'\n                        },\n                        children: \"SHARE/\\xA0\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 303,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Link, {\n                        to: `/share/items/${id}`,\n                        style: {\n                          textDecoration: 'none',\n                          color: '#b03342'\n                        },\n                        children: \"ITEM\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 309,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 296,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"d-flex align-items-center\",\n                    children: [editHandler(), /*#__PURE__*/_jsxDEV(Delete, {\n                      className: `${styles['large-del']} mx-md-4 p-2`,\n                      onClick: () => history.push('/share')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 319,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 294,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-column\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `mycontainer ${styles['mb-30']} ${styles['items-box']} d-flex mb-5`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `${styles['img-section']} col d-flex align-items-center flex-column`,\n                children: [/*#__PURE__*/_jsxDEV(Message, {\n                  className: `${styles['message-button']} `,\n                  style: btnMoveTemplate(),\n                  onClick: () => {\n                    setMsgbtn(true);\n                  },\n                  onTransitionEnd: () => {\n                    msgbtn && setMsgdiv(true);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Info, {\n                  className: `${styles['info-button']}`,\n                  style: btnMoveTemplate(),\n                  onClick: () => {\n                    setInfobtn(true);\n                  },\n                  onTransitionEnd: () => {\n                    infobtn && setInfodiv(true);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `d-flex ${styles['img-info']}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `${styles['profile-img']} mb-3 mr-md-3 mr-2`,\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: config.MEM_PHOTO + `/${postMemImg}`,\n                      alt: \"\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 359,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 356,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `${styles['img-title-box']} d-flex flex-column flex-grow-1 justify-content-around mb-3  mr-3`,\n                    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                      className: `${styles['img-title']} pt-2`,\n                      children: shareTitle\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 364,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"en-cont-14\",\n                      children: postMemName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 367,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 361,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: `${styles['save-button']} mb-3 d-flex align-items-center justify-content-center btn btn-primary`,\n                    children: [toggleHeartHandler(), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"en-cont-16 text-white d-none d-lg-block\",\n                      children: savesCount\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 374,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 369,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(ShareItemImgs, {\n                  itemImgs: itemImgs\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 379,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `${styles['img-desc']} d-flex ch-cont-16 justify-content-center`,\n                  children: shareDesc\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `${styles['popup-section']} d-flex`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `${styles['detail-section']}  d-flex flex-column`,\n                  style: !infodiv ? {} : {\n                    width: '560px',\n                    padding: '0 15px'\n                  },\n                  onTransitionEnd: () => {\n                    !infodiv && setInfobtn(false);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(ItemDetailsInfo, {\n                    orderVal: orderVal,\n                    orderPrint: orderPrint,\n                    shareTags: shareTags,\n                    setInfodiv: setInfodiv\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 396,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `${styles['message-section']}  d-flex flex-column`,\n                  style: !msgdiv ? {} : {\n                    width: '560px',\n                    padding: '0 15px'\n                  },\n                  onTransitionEnd: () => {\n                    !msgdiv && setMsgbtn(false);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(ItemDetailsComments, {\n                    setMsgdiv: setMsgdiv,\n                    shareComments: shareComments,\n                    itemId: id,\n                    action: action,\n                    commentSid: commentSid,\n                    handleShow: handleShow,\n                    setIsSubmit: setIsSubmit\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 410,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 403,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-center en-title-24 my-5\",\n              children: \"You may also like\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `${styles['waterfall-container']}`,\n              children: /*#__PURE__*/_jsxDEV(Masonry, {\n                columns: columns,\n                gap: gap,\n                data: filterItemsData,\n                itemId: id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AsideRight, {\n          setNavIsOpen: setNavIsOpen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ShareItems, \"OadvxzCpTWIdLhqkOTmSKhhKCp8=\", false, function () {\n  return [useCurrentWidth, useParams, useHistory, useLocation];\n});\n\n_c = ShareItems;\nexport default ShareItems;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShareItems\");","map":{"version":3,"sources":["C:/Users/ryany/OneDrive/桌面/primeal/src/pages/share/ShareItems.js"],"names":["Header","Title","AsideLeft","AsideRight","Footer","styles","ReactComponent","Delete","HeartOutline","HeartFillWhite","Info","Message","Edit","NavPage","ShareItemImgs","ItemDetailsInfo","ItemDetailsComments","Masonry","useCurrentWidth","getCurrentColumns","React","useState","useEffect","useParams","useHistory","useLocation","Link","Button","Modal","config","ShareItems","props","msgbtn","setMsgbtn","infobtn","setInfobtn","msgdiv","setMsgdiv","infodiv","setInfodiv","itemDetails","setItemDetails","filterItemsData","setFilterItemsData","currentWidth","columns","setColumns","gap","setGap","show","setShow","isSubmit","setIsSubmit","showBlock","display","hiddenBlock","navIsOpen","setNavIsOpen","memId","localStorage","getItem","mem_id","memberId","mem_nickname","postMemName","mem_photo_img_path","postMemImg","share_title","shareTitle","share_desc","shareDesc","saves_count","savesCount","share_order_id","orderId","orders_value","orderVal","orders_print_time","orderPrint","share_imgs","itemImgs","share_comments","shareComments","share_tags","shareTags","isSaved","id","history","location","action","commentSid","state","getItemDetails","response","fetch","GET_PROD_DETAILS","method","itemsArr","json","handleClose","handleShow","toggleHeartHandler","toggleSaveItem","padding","itemId","TOGGLE_SAVE","headers","body","JSON","stringify","ok","Error","err","console","error","message","editHandler","push","pathname","shareId","getShareItems","GET_SHARE_PRODS","itemsObj","getFilterData","GET_FILTER_ITEMS","minPrice","maxPrice","tags","map","tag","item_hash","minTime","maxTime","search","data","length","result","updateDimensions","btnMoveTemplate","transform","transition","opacity","modal","margin","width","textDecoration","color","MEM_PHOTO"],"mappings":"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","sourcesContent":["import { Header, Title, AsideLeft, AsideRight, Footer } from '../layout/Layout';\r\nimport styles from './Share.module.scss';\r\n\r\nimport { ReactComponent as Delete } from '../../imgs/delete-lg.svg';\r\nimport { ReactComponent as HeartOutline } from '../../imgs/heart-outline.svg';\r\nimport { ReactComponent as HeartFillWhite } from '../../imgs/heart-fill-white.svg';\r\nimport { ReactComponent as Info } from '../../imgs/information.svg';\r\nimport { ReactComponent as Message } from '../../imgs/message.svg';\r\nimport { ReactComponent as Edit } from '../../imgs/edit.svg';\r\n\r\nimport NavPage from '../layout/components/NavPage';\r\nimport ShareItemImgs from './components/ShareItemImgs';\r\nimport ItemDetailsInfo from './components/ItemDetailsInfo';\r\nimport ItemDetailsComments from './components/ItemDetailsComments';\r\nimport Masonry from './components/Masonry';\r\nimport useCurrentWidth from './hooks/useCurrentWidth';\r\nimport getCurrentColumns from './helpers/getCurrentColumns';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useParams, useHistory, useLocation, Link } from 'react-router-dom';\r\nimport { Button, Modal } from 'react-bootstrap';\r\n\r\nimport config from '../../Config';\r\n\r\nfunction ShareItems(props) {\r\n  const [msgbtn, setMsgbtn] = useState(false);\r\n  const [infobtn, setInfobtn] = useState(false);\r\n  const [msgdiv, setMsgdiv] = useState(false);\r\n  const [infodiv, setInfodiv] = useState(false);\r\n\r\n  const [itemDetails, setItemDetails] = useState([]);\r\n\r\n  //data\r\n  const [filterItemsData, setFilterItemsData] = useState([]);\r\n\r\n  //window handler\r\n  const currentWidth = useCurrentWidth();\r\n\r\n  //masonry\r\n  const [columns, setColumns] = useState(getCurrentColumns(currentWidth));\r\n  const [gap, setGap] = useState(4);\r\n\r\n  // 加入購物車光箱\r\n  const [show, setShow] = useState(false);\r\n  const [isSubmit, setIsSubmit] = useState(false);\r\n\r\n  //加入NAVBar漢堡選單開關\r\n  const showBlock = { display: 'block' };\r\n  const hiddenBlock = { display: 'none' };\r\n  const { navIsOpen, setNavIsOpen } = props; // 解構NAVBAR\r\n\r\n  //Get member id\r\n  const memId = localStorage.getItem('mem_id');\r\n\r\n  const {\r\n    mem_id: memberId,\r\n    mem_nickname: postMemName,\r\n    mem_photo_img_path: postMemImg,\r\n    share_title: shareTitle,\r\n    share_desc: shareDesc,\r\n    saves_count: savesCount,\r\n    share_order_id: orderId,\r\n    orders_value: orderVal,\r\n    orders_print_time: orderPrint,\r\n    share_imgs: itemImgs = [],\r\n    share_comments: shareComments = [],\r\n    share_tags: shareTags = [],\r\n    isSaved,\r\n  } = itemDetails;\r\n\r\n  const { id } = useParams(null);\r\n  let history = useHistory(null);\r\n  const location = useLocation(null);\r\n\r\n  const { action = 'VIEW', commentSid = '' } = location.state || {};\r\n\r\n  const getItemDetails = async () => {\r\n    const response = await fetch(config.GET_PROD_DETAILS + `${id}/${memId}`, {\r\n      method: 'GET',\r\n    });\r\n    const itemsArr = await response.json();\r\n    return itemsArr;\r\n  };\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const toggleHeartHandler = () => {\r\n    if (isSaved) {\r\n      return (\r\n        <div\r\n          className={`${styles['heart-beat-on']}`}\r\n          onClick={() => {\r\n            toggleSaveItem(id, 'REMOVE');\r\n            setItemDetails({\r\n              ...itemDetails,\r\n              isSaved: false,\r\n              saves_count: savesCount - 1,\r\n            });\r\n          }}\r\n        >\r\n          <HeartFillWhite style={{ padding: '0 12px' }} />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div\r\n          onClick={() => {\r\n            toggleSaveItem(id, 'ADD');\r\n            setItemDetails({\r\n              ...itemDetails,\r\n              isSaved: true,\r\n              saves_count: savesCount + 1,\r\n            });\r\n          }}\r\n        >\r\n          <HeartOutline style={{ padding: '0 12px' }} />\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  const toggleSaveItem = async (itemId, action) => {\r\n    try {\r\n      let method;\r\n      if (action === 'ADD') {\r\n        method = 'POST';\r\n      }\r\n      if (action === 'REMOVE') {\r\n        method = 'DELETE';\r\n      }\r\n\r\n      const response = await fetch(config.TOGGLE_SAVE, {\r\n        method: method,\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ itemId: itemId, memberId: memId }),\r\n      });\r\n      if (!response.ok) throw new Error('Something went wrong!');\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  const editHandler = () => {\r\n    return +memberId === +memId ? (\r\n      <div\r\n        className={`${styles['button-default-lg']} d-flex align-items-center mr-3`}\r\n        onClick={() =>\r\n          history.push({\r\n            pathname: '/share/edit',\r\n            state: {\r\n              shareId: id,\r\n              action: 'UPDATE',\r\n              orderId,\r\n              shareTitle,\r\n              shareDesc,\r\n              itemImgs,\r\n              shareTags,\r\n            },\r\n          })\r\n        }\r\n      >\r\n        <Edit className={`mx-3`} />\r\n      </div>\r\n    ) : (\r\n      ''\r\n    );\r\n  };\r\n\r\n  const getShareItems = async () => {\r\n    const response = await fetch(config.GET_SHARE_PRODS, {\r\n      method: 'GET',\r\n    });\r\n    const itemsObj = await response.json();\r\n    return itemsObj;\r\n  };\r\n\r\n  const getFilterData = async () => {\r\n    try {\r\n      const response = await fetch(config.GET_FILTER_ITEMS, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          minPrice: '',\r\n          maxPrice: '',\r\n          tags: shareTags.map(tag => tag.item_hash) ?? [],\r\n          minTime: '',\r\n          maxTime: '',\r\n          search: '',\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Something went wrong!');\r\n      }\r\n\r\n      const itemsObj = await response.json();\r\n\r\n      if (itemsObj.data.length === 1) {\r\n        const result = await getShareItems();\r\n        return result;\r\n      }\r\n\r\n      return itemsObj;\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  const updateDimensions = () => {\r\n    setColumns(getCurrentColumns(currentWidth));\r\n    setGap(getCurrentColumns(currentWidth));\r\n  };\r\n\r\n  // Fetching data\r\n  useEffect(() => {\r\n    (async () => {\r\n      const result = await getItemDetails();\r\n\r\n      setItemDetails(result.data[0]);\r\n    })();\r\n\r\n    if (action === 'COMMENT') setMsgbtn(true);\r\n  }, []);\r\n\r\n  // Fetching filterItem data\r\n  useEffect(() => {\r\n    (async () => {\r\n      const result = await getFilterData();\r\n      setFilterItemsData(result.data);\r\n    })();\r\n  }, [itemDetails]);\r\n\r\n  // Update column with current Width\r\n  useEffect(() => {\r\n    updateDimensions();\r\n  }, [currentWidth]);\r\n\r\n  const btnMoveTemplate = () => {\r\n    return msgbtn || infobtn\r\n      ? {\r\n          transform: 'translateX(80px)',\r\n          transition: 'transform 0.3s, opacity 0.2s',\r\n          opacity: 0,\r\n        }\r\n      : {\r\n          transform: 'translateX(0px)',\r\n          transition: 'transform 0.3s, opacity 0.2s',\r\n          opacity: 1,\r\n        };\r\n  };\r\n\r\n  const modal = (\r\n    <Modal show={show} onHide={handleClose}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title className=\"en-cont-30 m-3\">提醒</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body style={{ margin: '0 3%' }}>\r\n        <div className=\"en-cont-14 pb-2\">\r\n          {isSubmit ? '留言已更改成功' : '您確定要放棄修改?'}\r\n        </div>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button\r\n          variant=\"secondary\"\r\n          className=\"btn btn-sm btn-primary primeal-btn-sm mx-5 m-3\"\r\n          onClick={() =>\r\n            history.push({\r\n              pathname: '/share/post',\r\n              action: 'COMMENT',\r\n            })\r\n          }\r\n        >\r\n          {isSubmit ? 'Close' : '確定'}\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n  return (\r\n    <>\r\n      {modal}\r\n      <Header />\r\n      {navIsOpen && (\r\n        <NavPage navIsOpen={navIsOpen} setNavIsOpen={setNavIsOpen} />\r\n      )}\r\n      <div style={navIsOpen ? hiddenBlock : showBlock}>\r\n        <div style={{ display: 'flex' }}>\r\n          <AsideLeft />\r\n          <div style={{ width: '100%' }}>\r\n            <Title title={'Share'} setNavIsOpen={setNavIsOpen} />\r\n            <div className={`mycontainer ${styles['share-bread']}`}>\r\n              <div className=\"row\">\r\n                <div className=\"col\">\r\n                  <div className=\"d-flex justify-content-between\">\r\n                    <div className=\"pt-3 pt-md-0\">\r\n                      <p className=\"en-title-14-10 d-flex\">\r\n                        <Link\r\n                          to={'/'}\r\n                          style={{ textDecoration: 'none', color: '#575757' }}\r\n                        >\r\n                          HOME/&nbsp;\r\n                        </Link>\r\n                        <Link\r\n                          to={'/share'}\r\n                          style={{ textDecoration: 'none', color: '#575757' }}\r\n                        >\r\n                          SHARE/&nbsp;\r\n                        </Link>\r\n                        <Link\r\n                          to={`/share/items/${id}`}\r\n                          style={{ textDecoration: 'none', color: '#b03342' }}\r\n                        >\r\n                          ITEM\r\n                        </Link>\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"d-flex align-items-center\">\r\n                      {editHandler()}\r\n                      <Delete\r\n                        className={`${styles['large-del']} mx-md-4 p-2`}\r\n                        onClick={() => history.push('/share')}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"d-flex flex-column\">\r\n              <div\r\n                className={`mycontainer ${styles['mb-30']} ${styles['items-box']} d-flex mb-5`}\r\n              >\r\n                <div\r\n                  className={`${styles['img-section']} col d-flex align-items-center flex-column`}\r\n                >\r\n                  <Message\r\n                    className={`${styles['message-button']} `}\r\n                    style={btnMoveTemplate()}\r\n                    onClick={() => {\r\n                      setMsgbtn(true);\r\n                    }}\r\n                    onTransitionEnd={() => {\r\n                      msgbtn && setMsgdiv(true);\r\n                    }}\r\n                  />\r\n                  <Info\r\n                    className={`${styles['info-button']}`}\r\n                    style={btnMoveTemplate()}\r\n                    onClick={() => {\r\n                      setInfobtn(true);\r\n                    }}\r\n                    onTransitionEnd={() => {\r\n                      infobtn && setInfodiv(true);\r\n                    }}\r\n                  />\r\n                  <div className={`d-flex ${styles['img-info']}`}>\r\n                    <div\r\n                      className={`${styles['profile-img']} mb-3 mr-md-3 mr-2`}\r\n                    >\r\n                      <img src={config.MEM_PHOTO + `/${postMemImg}`} alt=\"\" />\r\n                    </div>\r\n                    <div\r\n                      className={`${styles['img-title-box']} d-flex flex-column flex-grow-1 justify-content-around mb-3  mr-3`}\r\n                    >\r\n                      <h2 className={`${styles['img-title']} pt-2`}>\r\n                        {shareTitle}\r\n                      </h2>\r\n                      <h3 className=\"en-cont-14\">{postMemName}</h3>\r\n                    </div>\r\n                    <button\r\n                      className={`${styles['save-button']} mb-3 d-flex align-items-center justify-content-center btn btn-primary`}\r\n                    >\r\n                      {toggleHeartHandler()}\r\n                      {/* <Heart style={{ padding: '10px' }} /> */}\r\n                      <div className=\"en-cont-16 text-white d-none d-lg-block\">\r\n                        {savesCount}\r\n                      </div>\r\n                    </button>\r\n                  </div>\r\n                  <ShareItemImgs itemImgs={itemImgs} />\r\n                  <div\r\n                    className={`${styles['img-desc']} d-flex ch-cont-16 justify-content-center`}\r\n                  >\r\n                    {shareDesc}\r\n                  </div>\r\n                </div>\r\n                <div className={`${styles['popup-section']} d-flex`}>\r\n                  <div\r\n                    className={`${styles['detail-section']}  d-flex flex-column`}\r\n                    style={\r\n                      !infodiv ? {} : { width: '560px', padding: '0 15px' }\r\n                    }\r\n                    onTransitionEnd={() => {\r\n                      !infodiv && setInfobtn(false);\r\n                    }}\r\n                  >\r\n                    <ItemDetailsInfo\r\n                      orderVal={orderVal}\r\n                      orderPrint={orderPrint}\r\n                      shareTags={shareTags}\r\n                      setInfodiv={setInfodiv}\r\n                    />\r\n                  </div>\r\n                  <div\r\n                    className={`${styles['message-section']}  d-flex flex-column`}\r\n                    style={!msgdiv ? {} : { width: '560px', padding: '0 15px' }}\r\n                    onTransitionEnd={() => {\r\n                      !msgdiv && setMsgbtn(false);\r\n                    }}\r\n                  >\r\n                    <ItemDetailsComments\r\n                      setMsgdiv={setMsgdiv}\r\n                      shareComments={shareComments}\r\n                      itemId={id}\r\n                      action={action}\r\n                      commentSid={commentSid}\r\n                      handleShow={handleShow}\r\n                      setIsSubmit={setIsSubmit}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"d-flex justify-content-center en-title-24 my-5\">\r\n                You may also like\r\n              </div>\r\n              <div className={`${styles['waterfall-container']}`}>\r\n                <Masonry\r\n                  columns={columns}\r\n                  gap={gap}\r\n                  data={filterItemsData}\r\n                  itemId={id}\r\n                />\r\n              </div>\r\n            </div>\r\n            <Footer />\r\n          </div>\r\n          <AsideRight setNavIsOpen={setNavIsOpen} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ShareItems;\r\n"]},"metadata":{},"sourceType":"module"}